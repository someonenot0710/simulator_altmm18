cscope 15 /data3/jerry/simulator_mm18/ns-3-allinone/ns-3-dev/src/udp               0000213475
	@examples/dash-4g.cc

27 
	~<¡ršg
>

28 
	~<f¡»am
>

29 
	~<s¡»am
>

30 
	~"ns3/cÜe-moduË.h
"

31 
	~"ns3/pošt-to-pošt-moduË.h
"

32 
	~"ns3/š‹º‘-moduË.h
"

33 
	~"ns3/­¶iÿtiÚs-moduË.h
"

34 
	~"ns3/ÃtwÜk-moduË.h
"

35 
	~"ns3/dash-moduË.h
"

36 
	~<s¡»am
>

37 
	~"../mod–/·¿.h
"

38 
usšg
 
Çme¥aû
 
	gns3
;

39 
usšg
 
Çme¥aû
 
	g¡d
;

40 
NS_LOG_COMPONENT_DEFINE
("DashExample");

42 
	#SIZE
 100

	)

43 
	glše
[
SIZE
];

48 
	$BªdwidthT¿û
(){

50 
CÚfig
::
	`S‘
("/NodeLi¡/0/DeviûLi¡/0/$ns3::PoštToPoštN‘Deviû/D©aR©e", 
	`SŒšgV®ue
("5Mbps") );

57 
	}
}

60 
	$maš
(
¬gc
, *
¬gv
[])

62 
boŞ
 
Œacšg
 = 
çl£
;

63 
ušt32_t
 
maxBy‹s
 = 100;

64 
ušt32_t
 
u£rs
 = 1;

65 
rg‘_dt
 = 35.0;

66 
¡İTime
 = 100.0;

67 
¡d
::
¡ršg
 
lškR©e
 = "500Kbps";

68 
¡d
::
¡ršg
 
d–ay
 = "0ms";

69 
¡d
::
¡ršg
 
´ÙocŞ
 = "ns3::DashClient";

70 
¡d
::
¡ršg
 
wšdow
 = "10s";

71 
video_šfo_dœ
="";

72 
´ob_dœ
="";

73 
´ob_ov”®l_dœ
="";

74 
u£r_šfo_fe
="";

75 
ex³rim’t_dœ
="";

76 
te_rows
=0;

77 
te_cŞs
=0;

78 
rho
=0.5;

79 
š™_bufãr
 = 4;

80 
£g_Ëngth
 = 1;

81 
»q_num
 = 2;

82 
¡d
::
¡ršg
 
gt_dœ
="";

83 
¡d
::
¡ršg
 
´ed_dœ
="";

84 
¡d
::
¡ršg
 
size_dœ
="";

86 
mode
="";

87 
¡d
::
¡ršg
 
®go
="";

88 
veùÜ
<veùÜ<>> 
bw
;

89 
bw_¬—
=2;

90 
¡d
::
¡ršg
 
bw_ty³
;

91 
ušt32_t
 
bw_idx
=0;

92 
veùÜ
<> 
u£r_bw
;

94 
¡d
::
¡ršg
 
cur_dœ
="";

95 
¡d
::
¡ršg
 
dr_dœ
="";

102 
CommªdLše
 
cmd
;

103 
cmd
.
	`AddV®ue
("Œacšg", "FÏgØ’abË/di§bË¿cšg", 
Œacšg
);

104 
cmd
.
	`AddV®ue
("maxBytes", "Total‚umber of bytes for‡pplicationo send",

105 
maxBy‹s
);

106 
cmd
.
	`AddV®ue
("u£rs", "Thnumb” oàcÚcu¼’ˆvideos", 
u£rs
);

107 
cmd
.
	`AddV®ue
("targetDt",

109 
rg‘_dt
);

110 
cmd
.
	`AddV®ue
("stopTime",

111 "Thtimwh’hş›Á wÈ¡İ„eque¡šg segm’ts", 
¡İTime
);

112 
cmd
.
	`AddV®ue
("linkRate",

114 
lškR©e
);

115 
cmd
.
	`AddV®ue
("delay",

117 
d–ay
);

118 
cmd
.
	`AddV®ue
("protocol",

120 
´ÙocŞ
);

121 
cmd
.
	`AddV®ue
("window",

122 "Thwšdow fÜ m—suršghav”agthroughpuˆ(Time).", 
wšdow
);

124 
cmd
.
	`AddV®ue
("in_file",

125 "špuˆfe", 
šput_£r›s
);

127 
cmd
.
	`AddV®ue
("seg_length",

128 "Th£gm’ˆËngth.", 
£g_Ëngth
);

130 
cmd
.
	`AddV®ue
("init_buffer",

131 "Thš™ŸÈbufã¸Ëngth (£gm’t).", 
š™_bufãr
);

132 
cmd
.
	`AddV®ue
("video_info_dir",

133 "ThdœeùÜy stÜšghvideØšfÜm©iÚ:ed-£gm’ˆsize, PSNR, SSIM, OPVQ.", 
video_šfo_dœ
);

134 
cmd
.
	`AddV®ue
("user_info",

135 "Thf¡Üšghu£¸šfÜm©iÚ (video_idx, u£r_idx).", 
u£r_šfo_fe
);

136 
cmd
.
	`AddV®ue
("experiment_dir",

137 "ThdœeùÜy stÜšghex³rim’ˆouuts.", 
ex³rim’t_dœ
);

138 
cmd
.
	`AddV®ue
("feature_dir",

139 "ThdœeùÜy stÜšg iÅuˆã©u»s.", 
ã©u»_dœ
);

140 
cmd
.
	`AddV®ue
("tile_rows",

141 "Thnumb” oàrow še.", 
te_rows
);

142 
cmd
.
	`AddV®ue
("tile_cols",

143 "Thnumb” oàcŞumn še.", 
te_cŞs
);

144 
cmd
.
	`AddV®ue
("rho",

145 "Thth»shŞd oàv›wšg…robab™y.", 
rho
);

146 
cmd
.
	`AddV®ue
("pred_dir",

147 "ThdœeùÜy stÜšgh´ediùed¿ûs.", 
´ed_dœ
);

148 
cmd
.
	`AddV®ue
("gt_dir",

149 "ThdœeùÜy stÜšghgroundruth¿ûs.", 
gt_dœ
);

150 
cmd
.
	`AddV®ue
("cur_dir",

151 "ThdœeùÜy stÜšgh´ediùed¿ûs.", 
cur_dœ
);

152 
cmd
.
	`AddV®ue
("dr_dir",

153 "ThdœeùÜy stÜšgh´ediùed¿ûs.", 
dr_dœ
);

154 
cmd
.
	`AddV®ue
("mode",

155 "difã»ÁŸ‹ usšg CUR o¸´ediùiÚ", 
mode
);

156 
cmd
.
	`AddV®ue
("algo",

157 "Thb™¿‹‡ÎoÿtiÚ‡lgÜ™hms: uni, vod,†ive, mm", 
®go
);

158 
cmd
.
	`AddV®ue
("bw_area",

159 "Th¬— cÚsid”ed fÜhbªdwidth", 
bw_¬—
);

160 
cmd
.
	`AddV®ue
("bw_type",

161 "Thfšdiÿtšghbwy³ ®loÿtiÚ fÜƒach u£r", 
bw_ty³
);

162 
cmd
.
	`AddV®ue
("bw_idx",

163 "Thšdex oàbwy³ fe", 
bw_idx
);

164 
cmd
.
	`AddV®ue
("area_dir",

165 "ThdœeùÜy stÜšgh¬— infÜm©iÚ.", 
¬—_dœ
);

166 
cmd
.
	`AddV®ue
("size_dir",

167 "ThdœeùÜy stÜšghvideØsizšfÜm©iÚ.", 
size_dœ
);

168 
cmd
.
	`AddV®ue
("req_num",

169 "ThdœeùÜy stÜšghvideØsizšfÜm©iÚ.", 
»q_num
);

170 
cmd
.
	`P¬£
(
¬gc
, 
¬gv
);

173 
i
=0; i<6; i++){

174 
veùÜ
<> 
tmp_bw
;

175 
j
=0; j<3; j++){

176 
tmp_bw
.
	`push_back
(0);

178 
bw
.
	`push_back
(
tmp_bw
);

180 
bw
[0][0]=46.2;

181 
bw
[0][1]=26.7;

182 
bw
[0][2]=12.6;

183 
bw
[1][0]=11.7;

184 
bw
[1][1]=9.0;

185 
bw
[1][2]=9.1;

186 
bw
[2][0]=43.2;

187 
bw
[2][1]=37.1;

188 
bw
[2][2]=12.7;

189 
bw
[3][0]=37.9;

190 
bw
[3][1]=25.0;

191 
bw
[3][2]=15.9;

192 
bw
[4][0]=32.8;

193 
bw
[4][1]=19.5;

194 
bw
[4][2]=14.2;

195 
bw
[5][0]=39.0;

196 
bw
[5][1]=6.2;

197 
bw
[5][2]=4.6;

199 
¡d
::
¡ršg
 
tmp_u£r_bw
;

200 
if¡»am
 
	`u£r_bw_fe
(
bw_ty³
);

201 if(!
u£r_bw_fe
)

202 
cout
<<"nØu£r_bw_fe"<<
’dl
;

203 
ušt32_t
 
út
=0;

204 
u£r_bw_fe
>>
tmp_u£r_bw
){

205 
út
=cnt+1;

206 if(
út
>
bw_idx
*
u£rs
 && cnt<=(bw_idx+1)*users){

207 
u£r_bw
.
	`push_back
(
bw
[
bw_¬—
][
	`¡oi
(
tmp_u£r_bw
)]);

210 
u£r_bw_fe
.
	`şo£
();

214 
¡d
::
¡ršg
 
video_šfo_šdex
="";

215 
video_šfo_šdex
=
video_šfo_dœ
+"video_index";

216 
if¡»am
 
	`video_šfo_fe
(
video_šfo_šdex
);

217 if(!
video_šfo_fe
)

218 
cout
<<"nØvideØšfØfe"<<
’dl
;

219 
¡d
::
¡ršg
 
tmp_¡r
="";

220 
video_šfo_fe
 >> 
tmp_¡r
){

221 
video_Çmes
.
	`push_back
(
tmp_¡r
);

223 
video_šfo_fe
.
	`şo£
();

224 
¡d
::
¡ršg¡»am
 
tmp_te_cŞ
, 
tmp_te_row
;

225 
tmp_te_cŞ
<<
te_cŞs
;

226 
tmp_te_row
<<
te_rows
;

227 
te_cŞ
=
tmp_te_cŞ
.
	`¡r
();

228 
te_row
=
tmp_te_row
.
	`¡r
();

229 
¡ršg
 
¡r
;

231 
if¡»am
 
	`u£r_šfo_å
(
u£r_šfo_fe
);

232 if(!
u£r_šfo_å
)

233 
cout
<<"nØu£¸šfØfe: "<<
u£r_šfo_fe
<<
’dl
;

234 
¡ršg
 
video_idx
, 
u£r_idx
;

235 
út
=0;

236 
cout
<<"te_row: "<<
te_rows
<<"e_cŞ: "<<
te_cŞs
<<
’dl
;

237 
u£r_šfo_å
 >> 
video_idx
 >> 
u£r_idx
){

238 
veùÜ
<> 
tmp_u£r
;

239 
tmp_u£r
.
	`push_back
(
	`¡oi
(
video_idx
));

240 
tmp_u£r
.
	`push_back
(
	`¡oi
(
u£r_idx
));

241 
tmp_u£r
.
	`push_back
(-1);

243 
tmp_size_fe
[100];

244 
	`¥rštf
(
tmp_size_fe
,"%s%s_u£r%02d_%dx%d_%.1f_gt_%s",
size_dœ
.
	`c_¡r
(),
video_Çmes
[
tmp_u£r
[0]].c_¡r(),
	`¡oi
(
u£r_idx
),
te_cŞs
,
te_rows
,
u£r_bw
[
út
],
®go
.c_str());

245 
¡d
::
¡ršg
 
	`size_fe
(
tmp_size_fe
);

246 
if¡»am
 
	`size_å
(
size_fe
);

247 if(!
size_å
)

248 
cout
<<"nØsizfe"<<
size_fe
<<
’dl
;

249 
veùÜ
<> 
tmp_video_size
;

250 
	`g‘lše
(
size_å
,
¡r
)){

251 
i¡ršg¡»am
 
	`sss
(
¡r
);

252 
¡ršg
 
tok’
;

253 
te_size
=0;

255 
	`g‘lše
(
sss
,
tok’
,' ')){

256 
te_size
ñe_size+
	`¡od
(
tok’
);

259 
tmp_video_size
.
	`push_back
(
te_size
);

261 
u£r_£g_size
.
	`push_back
(
tmp_video_size
);

262 
size_å
.
	`şo£
();

263 
út
=cnt+1;

265 
u£r_šfo_å
.
	`şo£
();

266 
te_num
=()(
te_cŞs
*
te_rows
);

267 
ušt32_t
 
£g_num
=()(60.0/()
£g_Ëngth
);

268 
ušt32_t
 
k
=0; k<
u£rs
; k++){

269 
veùÜ
<veùÜ<>> 
tmp_£g
;

270 
ušt32_t
 
m
=0; m<
£g_num
; m++){

271 
veùÜ
<> 
tmp_te
;

272 
v
=0; v<
te_num
; v++){

273 
tmp_te
.
	`push_back
(0);

275 
tmp_£g
.
	`push_back
(
tmp_te
);

277 
´obs
.
	`push_back
(
tmp_£g
);

280 
ušt32_t
 
k
=0; k<
u£rs
; k++){

281 
veùÜ
<> 
tmp_v£g
;

282 
ušt32_t
 
m
=0; m<
£g_num
; m++){

283 
tmp_v£g
.
	`push_back
(0);

285 
video_£r›s
.
	`push_back
(
tmp_v£g
);

287 
ušt32_t
 
k
=0; k<
u£rs
; k++){

288 
veùÜ
<> 
tmp_br_£g
;

289 
veùÜ
<> 
tmp_di¡_£g
;

290 
ušt32_t
 
m
=0; m<
£g_num
; m++){

291 
tmp_br_£g
.
	`push_back
(0);

293 
brs
.
	`push_back
(
tmp_br_£g
);

300 
	`NS_LOG_INFO
("Create‚odes.");

301 
NodeCÚš”
 
nodes
;

304 
nodes
.
	`C»©e
 (
u£rs
+1);

307 
	`NS_LOG_INFO
("Create channels.");

309 
veùÜ
<
NodeCÚš”
> 
u£r_node
;

310 
ušt32_t
 
u£r
 = 0; u£¸< 
u£rs
; user++){

311 
NodeCÚš”
 
x
 = 
	`NodeCÚš”
 (
nodes
.
	`G‘
 (
u£r
),‚odes.G‘ (
u£rs
));

312 
u£r_node
.
	`push_back
(
x
);

322 
IÁ”ÃtSckH–³r
 
š‹º‘
;

323 
š‹º‘
.
	`In¡®l
(
nodes
);

325 
veùÜ
<
N‘DeviûCÚš”
> 
u£r_deviû
;

326 
¡ršg
 
¿‹
[15]= {"18.2Mbps","18.2Mbps","18.2Mbps","18.2Mbps","20Mbps","20Mbps","20Mbps","20Mbps","20Mbps","40Mbps","40Mbps","40Mbps","40Mbps","40Mbps","40Mbps"};

327 
veùÜ
<
¡ršg
> 
u£r_bwr
;

329 
ušt32_t
 
i
=0; i<
u£r_bw
.
	`size
(); i++){

331 
o¡ršg¡»am
 
ss
;

332 
ss
 << 
u£r_bw
[
i
];

333 
¡ršg
 
tmp
 = 
ss
.
	`¡r
();

334 
tmp
 =mp+"Mbps";

336 
u£r_bwr
.
	`push_back
(
tmp
);

337 
cout
<<"Bªd: "<<
tmp
<<
’dl
;

341 
ušt32_t
 
u£r
 = 0; u£¸< 
u£rs
; user++){

342 
PoštToPoštH–³r
 
p2p
;

343 
p2p
.
	`S‘DeviûA‰ribu‹
 ("D©aR©e", 
	`SŒšgV®ue
 (
u£r_bwr
[
u£r
]));

344 
p2p
.
	`S‘ChªÃlA‰ribu‹
 ("D–ay", 
	`SŒšgV®ue
 ("40ms"));

345 
N‘DeviûCÚš”
 
x
 = 
p2p
.
	`In¡®l
 (
u£r_node
[
u£r
]);

346 
u£r_deviû
.
	`push_back
(
x
);

398 
	`NS_LOG_INFO
 ("Assign IP Addresses.");

399 
Ipv4Add»ssH–³r
 
v4
;

400 
veùÜ
<
Ipv4IÁ”çûCÚš”
> 
u£r_v4
;

401 
ušt32_t
 
u£r
 = 0; u£¸< 
u£rs
; user++){

402 
¡ršg
 
tmp1
 = "10.1.";

403 
¡ršg¡»am
 
ss
;

404 
ss
 << 
u£r
;

405 
¡ršg
 
¡r
 = 
ss
.
	`¡r
();

406 
¡ršg
 
s
 = 
tmp1
+
¡r
+".0";

407 
v4
.
	`S‘Ba£
 (
s
.
	`c_¡r
(), "255.255.255.0");

408 
Ipv4IÁ”çûCÚš”
 
x
 = 
v4
.
	`Assign
 (
u£r_deviû
[
u£r
]);

409 
u£r_v4
.
	`push_back
(
x
);

428 
	`NS_LOG_INFO
("Create Applications.");

430 
Ipv4Glob®RoutšgH–³r
::
	`PİuÏ‹RoutšgTabËs
 ();

436 
¡d
::
veùÜ
<¡d::
¡ršg
> 
´ÙocŞs
;

437 
¡d
::
¡ršg¡»am
 
	`ss
(
´ÙocŞ
);

438 
¡d
::
¡ršg
 
´Ùo
;

439 
ušt32_t
 
´ÙoNum
 = 0;

440 
¡d
::
	`g‘lše
(
ss
, 
´Ùo
, ','è&& 
´ÙoNum
++ < 
u£rs
)

442 
´ÙocŞs
.
	`push_back
(
´Ùo
);

445 
ušt16_t
 
pÜt
 = 80;

446 
¡d
::
veùÜ
<
DashCl›ÁH–³r
> 
ş›Ás
;

447 
¡d
::
veùÜ
<
AµliÿtiÚCÚš”
> 
ş›ÁAµs
;

449 
ušt32_t
 
u£r
 = 0; u£¸< 
u£rs
; user++)

451 
DashCl›ÁH–³r
 
	`ş›Á
("ns3::TcpSocketFactory",

452 
	`IÃtSock‘Add»ss
(
u£r_v4
[
u£r
].
	`G‘Add»ss
(1), 
pÜt
), 
´ÙocŞs
[u£¸% 
´ÙoNum
]);

453 
ş›Á
.
	`S‘A‰ribu‹
("VideoId", 
	`Uš‹g”V®ue
(
u£r
 + 1));

454 
AµliÿtiÚCÚš”
 
ş›ÁAµ
 = 
ş›Á
.
	`In¡®l
(
nodes
.
	`G‘
(
u£r
));

455 
ş›ÁAµ
.
	`S¹
(
	`SecÚds
(0.25));

456 
ş›Ás
.
	`push_back
(
ş›Á
);

457 
ş›ÁAµs
.
	`push_back
(
ş›ÁAµ
);

509 
DashS”v”H–³r
 
	`£rv”
("ns3::TcpSocketFactory",

510 
	`IÃtSock‘Add»ss
(
Ipv4Add»ss
::
	`G‘Any
(), 
pÜt
));

511 
AµliÿtiÚCÚš”
 
£rv”Aµs
 = 
£rv”
.
	`In¡®l
(
nodes
.
	`G‘
(
u£rs
));

512 
£rv”Aµs
.
	`S¹
(
	`SecÚds
(0.0));

533 
	`NS_LOG_INFO
("Run Simulation.");

535 
SimuÏtÜ
::
	`Run
();

538 
SimuÏtÜ
::
	`De¡roy
();

539 
	`NS_LOG_INFO
("Done.");

542 
ušt32_t
 
k
;

543 
k
 = 0; k < 
u£rs
; k++)

545 
PŒ
<
DashCl›Á
> 
­p
 = 
DyÇmicCa¡
<DashCl›Á>(
ş›ÁAµs
[
k
].
	`G‘
(0));

546 
¡d
::
cout
 << 
´ÙocŞs
[
k
 % 
´ÙoNum
] << "-Node: " << k;

547 
­p
->
	`G‘Sts
();

552 
	}
}

	@examples/dash-add.cc

27 
	~<¡ršg
>

28 
	~<f¡»am
>

29 
	~<s¡»am
>

30 
	~"ns3/cÜe-moduË.h
"

31 
	~"ns3/pošt-to-pošt-moduË.h
"

32 
	~"ns3/š‹º‘-moduË.h
"

33 
	~"ns3/­¶iÿtiÚs-moduË.h
"

34 
	~"ns3/ÃtwÜk-moduË.h
"

35 
	~"ns3/dash-moduË.h
"

36 
	~<s¡»am
>

37 
	~"../mod–/·¿.h
"

38 
usšg
 
Çme¥aû
 
	gns3
;

39 
usšg
 
Çme¥aû
 
	g¡d
;

40 
NS_LOG_COMPONENT_DEFINE
("DashExample");

42 
	#SIZE
 100

	)

43 
	glše
[
SIZE
];

48 
	$maš
(
¬gc
, *
¬gv
[])

50 
boŞ
 
Œacšg
 = 
çl£
;

51 
ušt32_t
 
maxBy‹s
 = 100;

52 
ušt32_t
 
u£rs
 = 1;

53 
rg‘_dt
 = 35.0;

54 
¡İTime
 = 100.0;

55 
¡d
::
¡ršg
 
lškR©e
 = "500Kbps";

56 
¡d
::
¡ršg
 
d–ay
 = "0ms";

57 
¡d
::
¡ršg
 
´ÙocŞ
 = "ns3::DashClient";

58 
¡d
::
¡ršg
 
wšdow
 = "10s";

59 
video_šfo_dœ
="";

60 
´ob_dœ
="";

61 
´ob_ov”®l_dœ
="";

62 
u£r_šfo_fe
="";

63 
ex³rim’t_dœ
="";

64 
te_rows
=0;

65 
te_cŞs
=0;

66 
rho
=0.5;

67 
š™_bufãr
 = 4;

68 
£g_Ëngth
 = 1;

69 
¡d
::
¡ršg
 
gt_dœ
="";

70 
¡d
::
¡ršg
 
´ed_dœ
="";

72 
mode
="";

80 
CommªdLše
 
cmd
;

81 
cmd
.
	`AddV®ue
("Œacšg", "FÏgØ’abË/di§bË¿cšg", 
Œacšg
);

82 
cmd
.
	`AddV®ue
("maxBytes", "Total‚umber of bytes for‡pplicationo send",

83 
maxBy‹s
);

84 
cmd
.
	`AddV®ue
("u£rs", "Thnumb” oàcÚcu¼’ˆvideos", 
u£rs
);

85 
cmd
.
	`AddV®ue
("targetDt",

87 
rg‘_dt
);

88 
cmd
.
	`AddV®ue
("stopTime",

89 "Thtimwh’hş›Á wÈ¡İ„eque¡šg segm’ts", 
¡İTime
);

90 
cmd
.
	`AddV®ue
("linkRate",

92 
lškR©e
);

93 
cmd
.
	`AddV®ue
("delay",

95 
d–ay
);

96 
cmd
.
	`AddV®ue
("protocol",

98 
´ÙocŞ
);

99 
cmd
.
	`AddV®ue
("window",

100 "Thwšdow fÜ m—suršghav”agthroughpuˆ(Time).", 
wšdow
);

102 
cmd
.
	`AddV®ue
("in_file",

103 "špuˆfe", 
šput_£r›s
);

105 
cmd
.
	`AddV®ue
("seg_length",

106 "Th£gm’ˆËngth.", 
£g_Ëngth
);

108 
cmd
.
	`AddV®ue
("init_buffer",

109 "Thš™ŸÈbufã¸Ëngth (£gm’t).", 
š™_bufãr
);

110 
cmd
.
	`AddV®ue
("video_info_dir",

111 "ThdœeùÜy stÜšghvideØšfÜm©iÚ:ed-£gm’ˆsize, PSNR, SSIM, OPVQ.", 
video_šfo_dœ
);

112 
cmd
.
	`AddV®ue
("user_info",

113 "Thf¡Üšghu£¸šfÜm©iÚ (video_idx, u£r_idx).", 
u£r_šfo_fe
);

114 
cmd
.
	`AddV®ue
("experiment_dir",

115 "ThdœeùÜy stÜšghex³rim’ˆouuts.", 
ex³rim’t_dœ
);

116 
cmd
.
	`AddV®ue
("feature_dir",

117 "ThdœeùÜy stÜšg iÅuˆã©u»s.", 
ã©u»_dœ
);

118 
cmd
.
	`AddV®ue
("tile_rows",

119 "Thnumb” oàrow še.", 
te_rows
);

120 
cmd
.
	`AddV®ue
("tile_cols",

121 "Thnumb” oàcŞumn še.", 
te_cŞs
);

122 
cmd
.
	`AddV®ue
("rho",

123 "Thth»shŞd oàv›wšg…robab™y.", 
rho
);

124 
cmd
.
	`AddV®ue
("pred_dir",

125 "ThdœeùÜy stÜšgh´ediùed¿ûs.", 
´ed_dœ
);

126 
cmd
.
	`AddV®ue
("gt_dir",

127 "ThdœeùÜy stÜšghgroundruth¿ûs.", 
gt_dœ
);

129 
cmd
.
	`AddV®ue
("mode",

130 "difã»ÁŸ‹ usšg CUR o¸´ediùiÚ", 
mode
);

134 
cmd
.
	`P¬£
(
¬gc
, 
¬gv
);

138 
¡d
::
¡ršg
 
video_šfo_šdex
="";

139 
video_šfo_šdex
=
video_šfo_dœ
+"video_index";

140 
if¡»am
 
	`video_šfo_fe
(
video_šfo_šdex
);

141 if(!
video_šfo_fe
)

142 
cout
<<"nØvideØšfØfe"<<
’dl
;

143 
¡d
::
¡ršg
 
tmp_¡r
="";

144 
video_šfo_fe
 >> 
tmp_¡r
){

145 
video_Çmes
.
	`push_back
(
tmp_¡r
);

147 
video_šfo_fe
.
	`şo£
();

148 
¡d
::
¡ršg¡»am
 
tmp_te_cŞ
, 
tmp_te_row
;

149 
tmp_te_cŞ
<<
te_cŞs
;

150 
tmp_te_row
<<
te_rows
;

151 
te_cŞ
=
tmp_te_cŞ
.
	`¡r
();

152 
te_row
=
tmp_te_row
.
	`¡r
();

153 
¡ršg
 
¡r
;

156 
ušt32_t
 
k
=0; k<
video_Çmes
.
	`size
(); k++){

157 
veùÜ
<veùÜ<>> 
tmp_video_size
;

158 
if¡»am
 
	`video_size_fe
(
video_šfo_dœ
+
video_Çmes
[
k
]+"_"+
te_cŞ
+"x"+
te_row
+"_size");

159 if(!
video_size_fe
)

160 
cout
<<"nØvideØšfØfe: "<<
video_Çmes
[
k
]+"_"+
te_cŞ
+"x"+
te_row
+"_size"<<
’dl
;

161 
	`g‘lše
(
video_size_fe
,
¡r
)){

162 
i¡ršg¡»am
 
	`sss
(
¡r
);

163 
¡ršg
 
tok’
;

164 
veùÜ
<> 
tmp_te_size
;

165 
	`g‘lše
(
sss
,
tok’
,' ')){

166 
tmp_te_size
.
	`push_back
(
	`¡od
(
tok’
));

168 
tmp_video_size
.
	`push_back
(
tmp_te_size
);

170 
video_size
.
	`push_back
(
tmp_video_size
);

171 
video_size_fe
.
	`şo£
();

174 
if¡»am
 
	`u£r_šfo_å
(
u£r_šfo_fe
);

175 if(!
u£r_šfo_å
)

176 
cout
<<"nØu£¸šfØfe: "<<
u£r_šfo_fe
<<
’dl
;

177 
¡ršg
 
video_idx
, 
u£r_idx
;

178 
u£r_šfo_å
 >> 
video_idx
 >> 
u£r_idx
){

179 
veùÜ
<> 
tmp_u£r
;

180 
tmp_u£r
.
	`push_back
(
	`¡oi
(
video_idx
));

181 
tmp_u£r
.
	`push_back
(
	`¡oi
(
u£r_idx
));

182 
tmp_u£r
.
	`push_back
(-1);

183 
u£r_šfo
.
	`push_back
(
tmp_u£r
);

185 
tmp_´ed_fe
[50];

186 
	`¥rštf
(
tmp_´ed_fe
,"%s%s_u£r%02d_´ed",
´ed_dœ
.
	`c_¡r
(),
video_Çmes
[
tmp_u£r
[0]].c_¡r(),
	`¡oi
(
u£r_idx
));

187 
¡d
::
¡ršg
 
	`´ed_šfo_f
(
tmp_´ed_fe
);

188 
if¡»am
 
	`´ed_šfo_å
(
´ed_šfo_f
);

189 
veùÜ
<veùÜ<>> 
tmp_u£r_´ed
;

190 
út
=0;

191 
	`g‘lše
(
´ed_šfo_å
,
¡r
)){

196 
i¡ršg¡»am
 
	`sss
(
¡r
);

197 
¡ršg
 
tok’
;

198 
veùÜ
<> 
tmp_te_´ed
;

199 
	`g‘lše
(
sss
,
tok’
,' ')){

200 
tmp_te_´ed
.
	`push_back
(
	`¡of
(
tok’
));

202 
tmp_u£r_´ed
.
	`push_back
(
tmp_te_´ed
);

205 
´ed_šfo
.
	`push_back
(
tmp_u£r_´ed
);

206 
´ed_šfo_å
.
	`şo£
();

208 
tmp_gt_fe
[50];

209 
	`¥rštf
(
tmp_gt_fe
,"%s%s_u£r%02d_gt_n30",
gt_dœ
.
	`c_¡r
(),
video_Çmes
[
tmp_u£r
[0]].c_¡r(),
	`¡oi
(
u£r_idx
));

210 
¡d
::
¡ršg
 
	`tmp_gt_f
(
tmp_gt_fe
);

211 
if¡»am
 
	`gt_šfo_å
(
tmp_gt_f
);

212 
veùÜ
<veùÜ<>> 
tmp_u£r_gt
;

213 
út
=0;

214 
	`g‘lše
(
gt_šfo_å
,
¡r
)){

215 ià(
út
%30!=0){

216 
út
++;

219 
i¡ršg¡»am
 
	`sss
(
¡r
);

220 
¡ršg
 
tok’
;

221 
veùÜ
<> 
tmp_te_gt
;

222 
	`g‘lše
(
sss
,
tok’
,' ')){

223 
tmp_te_gt
.
	`push_back
(
	`¡of
(
tok’
));

225 
tmp_u£r_gt
.
	`push_back
(
tmp_te_gt
);

226 
út
++;

228 
gt_šfo
.
	`push_back
(
tmp_u£r_gt
);

229 
gt_šfo_å
.
	`şo£
();

232 
u£r_šfo_å
.
	`şo£
();

234 
te_num
=()(
te_cŞs
*
te_rows
);

235 
ušt32_t
 
£g_num
=()(60.0/()
£g_Ëngth
);

236 
ušt32_t
 
k
=0; k<
u£rs
; k++){

237 
veùÜ
<veùÜ<>> 
tmp_£g
;

238 
ušt32_t
 
m
=0; m<
£g_num
; m++){

239 
veùÜ
<> 
tmp_te
;

240 
v
=0; v<
te_num
; v++){

241 
tmp_te
.
	`push_back
(0);

243 
tmp_£g
.
	`push_back
(
tmp_te
);

245 
´obs
.
	`push_back
(
tmp_£g
);

248 
ušt32_t
 
k
=0; k<
u£rs
; k++){

249 
veùÜ
<> 
tmp_v£g
;

250 
ušt32_t
 
m
=0; m<
£g_num
; m++){

251 
tmp_v£g
.
	`push_back
(0);

253 
video_£r›s
.
	`push_back
(
tmp_v£g
);

255 
ušt32_t
 
k
=0; k<
u£rs
; k++){

256 
veùÜ
<> 
tmp_br_£g
;

257 
veùÜ
<> 
tmp_di¡_£g
;

258 
ušt32_t
 
m
=0; m<
£g_num
; m++){

259 
tmp_br_£g
.
	`push_back
(0);

261 
brs
.
	`push_back
(
tmp_br_£g
);

269 
	`NS_LOG_INFO
("Create‚odes.");

270 
NodeCÚš”
 
nodes
;

273 
nodes
.
	`C»©e
 (5);

276 
	`NS_LOG_INFO
("Create channels.");

278 
NodeCÚš”
 
n0n2
 = 
	`NodeCÚš”
 (
nodes
.
	`G‘
 (0),‚odes.Get (2));

279 
NodeCÚš”
 
n1n2
 = 
	`NodeCÚš”
 (
nodes
.
	`G‘
 (1),‚odes.Get (2));

280 
NodeCÚš”
 
n3n2
 = 
	`NodeCÚš”
 (
nodes
.
	`G‘
 (3),‚odes.Get (2));

281 
NodeCÚš”
 
n4n2
 = 
	`NodeCÚš”
 (
nodes
.
	`G‘
 (2),‚odes.Get (4));

283 
IÁ”ÃtSckH–³r
 
š‹º‘
;

284 
š‹º‘
.
	`In¡®l
(
nodes
);

287 
PoštToPoštH–³r
 
p2p
;

288 
p2p
.
	`S‘DeviûA‰ribu‹
 ("D©aR©e", 
	`SŒšgV®ue
 ("18Mbps"));

289 
p2p
.
	`S‘ChªÃlA‰ribu‹
 ("D–ay", 
	`SŒšgV®ue
 ("2ms"));

290 
N‘DeviûCÚš”
 
d0d2
 = 
p2p
.
	`In¡®l
 (
n0n2
);

292 
p2p
.
	`S‘DeviûA‰ribu‹
 ("D©aR©e", 
	`SŒšgV®ue
 ("20Mbps"));

293 
p2p
.
	`S‘ChªÃlA‰ribu‹
 ("D–ay", 
	`SŒšgV®ue
 ("2ms"));

294 
N‘DeviûCÚš”
 
d1d2
 = 
p2p
.
	`In¡®l
 (
n1n2
);

296 
p2p
.
	`S‘DeviûA‰ribu‹
 ("D©aR©e", 
	`SŒšgV®ue
 ("40Mbps"));

297 
p2p
.
	`S‘ChªÃlA‰ribu‹
 ("D–ay", 
	`SŒšgV®ue
 ("2ms"));

298 
N‘DeviûCÚš”
 
d3d2
 = 
p2p
.
	`In¡®l
 (
n3n2
);

300 
p2p
.
	`S‘DeviûA‰ribu‹
 ("D©aR©e", 
	`SŒšgV®ue
 ("150Mbps"));

301 
p2p
.
	`S‘ChªÃlA‰ribu‹
 ("D–ay", 
	`SŒšgV®ue
 ("2ms"));

302 
N‘DeviûCÚš”
 
d4d2
 = 
p2p
.
	`In¡®l
 (
n4n2
);

333 
	`NS_LOG_INFO
 ("Assign IP Addresses.");

334 
Ipv4Add»ssH–³r
 
v4
;

335 
v4
.
	`S‘Ba£
 ("10.1.1.0", "255.255.255.0");

336 
Ipv4IÁ”çûCÚš”
 
i0i2
 = 
v4
.
	`Assign
 (
d0d2
);

338 
v4
.
	`S‘Ba£
 ("10.1.2.0", "255.255.255.0");

339 
Ipv4IÁ”çûCÚš”
 
i1i2
 = 
v4
.
	`Assign
 (
d1d2
);

341 
v4
.
	`S‘Ba£
 ("10.1.3.0", "255.255.255.0");

342 
Ipv4IÁ”çûCÚš”
 
i3i2
 = 
v4
.
	`Assign
 (
d3d2
);

344 
v4
.
	`S‘Ba£
 ("10.1.4.0", "255.255.255.0");

345 
Ipv4IÁ”çûCÚš”
 
i4i2
 = 
v4
.
	`Assign
 (
d4d2
);

347 
	`NS_LOG_INFO
("Create Applications.");

349 
Ipv4Glob®RoutšgH–³r
::
	`PİuÏ‹RoutšgTabËs
 ();

355 
¡d
::
veùÜ
<¡d::
¡ršg
> 
´ÙocŞs
;

356 
¡d
::
¡ršg¡»am
 
	`ss
(
´ÙocŞ
);

357 
¡d
::
¡ršg
 
´Ùo
;

358 
ušt32_t
 
´ÙoNum
 = 0;

359 
¡d
::
	`g‘lše
(
ss
, 
´Ùo
, ','è&& 
´ÙoNum
++ < 
u£rs
)

361 
´ÙocŞs
.
	`push_back
(
´Ùo
);

364 
ušt16_t
 
pÜt
 = 80;

365 
¡d
::
veùÜ
<
DashCl›ÁH–³r
> 
ş›Ás
;

366 
¡d
::
veùÜ
<
AµliÿtiÚCÚš”
> 
ş›ÁAµs
;

369 
ušt32_t
 
u£r
 = 0; u£¸< 
u£rs
; user++)

372 if(
u£r
==0){

373 
DashCl›ÁH–³r
 
	`ş›Á
("ns3::TcpSocketFactory",

374 
	`IÃtSock‘Add»ss
(
i0i2
.
	`G‘Add»ss
(1), 
pÜt
), 
´ÙocŞs
[
u£r
 % 
´ÙoNum
]);

375 
ş›Á
.
	`S‘A‰ribu‹
("VideoId", 
	`Uš‹g”V®ue
(
u£r
 + 1));

376 
AµliÿtiÚCÚš”
 
ş›ÁAµ
 = 
ş›Á
.
	`In¡®l
(
nodes
.
	`G‘
(0));

377 
ş›ÁAµ
.
	`S¹
(
	`SecÚds
(0.25));

378 
ş›Ás
.
	`push_back
(
ş›Á
);

379 
ş›ÁAµs
.
	`push_back
(
ş›ÁAµ
);

382 if(
u£r
==1){

383 
DashCl›ÁH–³r
 
	`ş›Á
("ns3::TcpSocketFactory",

384 
	`IÃtSock‘Add»ss
(
i1i2
.
	`G‘Add»ss
(1), 
pÜt
), 
´ÙocŞs
[
u£r
 % 
´ÙoNum
]);

385 
ş›Á
.
	`S‘A‰ribu‹
("VideoId", 
	`Uš‹g”V®ue
(
u£r
 + 1));

386 
AµliÿtiÚCÚš”
 
ş›ÁAµ
 = 
ş›Á
.
	`In¡®l
(
nodes
.
	`G‘
(1));

387 
ş›ÁAµ
.
	`S¹
(
	`SecÚds
(0.25));

388 
ş›Ás
.
	`push_back
(
ş›Á
);

389 
ş›ÁAµs
.
	`push_back
(
ş›ÁAµ
);

392 if(
u£r
==2){

393 
DashCl›ÁH–³r
 
	`ş›Á
("ns3::TcpSocketFactory",

394 
	`IÃtSock‘Add»ss
(
i3i2
.
	`G‘Add»ss
(1), 
pÜt
), 
´ÙocŞs
[
u£r
 % 
´ÙoNum
]);

395 
ş›Á
.
	`S‘A‰ribu‹
("VideoId", 
	`Uš‹g”V®ue
(
u£r
 + 1));

396 
AµliÿtiÚCÚš”
 
ş›ÁAµ
 = 
ş›Á
.
	`In¡®l
(
nodes
.
	`G‘
(3));

397 
ş›ÁAµ
.
	`S¹
(
	`SecÚds
(0.25));

398 
ş›Ás
.
	`push_back
(
ş›Á
);

399 
ş›ÁAµs
.
	`push_back
(
ş›ÁAµ
);

414 
DashS”v”H–³r
 
	`£rv”
("ns3::TcpSocketFactory",

415 
	`IÃtSock‘Add»ss
(
Ipv4Add»ss
::
	`G‘Any
(), 
pÜt
));

416 
AµliÿtiÚCÚš”
 
£rv”Aµs
 = 
£rv”
.
	`In¡®l
(
nodes
.
	`G‘
(2));

417 
£rv”Aµs
.
	`S¹
(
	`SecÚds
(0.0));

445 
	`NS_LOG_INFO
("Run Simulation.");

447 
SimuÏtÜ
::
	`Run
();

448 
SimuÏtÜ
::
	`De¡roy
();

449 
	`NS_LOG_INFO
("Done.");

452 
ušt32_t
 
k
;

453 
k
 = 0; k < 
u£rs
; k++)

455 
PŒ
<
DashCl›Á
> 
­p
 = 
DyÇmicCa¡
<DashCl›Á>(
ş›ÁAµs
[
k
].
	`G‘
(0));

456 
¡d
::
cout
 << 
´ÙocŞs
[
k
 % 
´ÙoNum
] << "-Node: " << k;

457 
­p
->
	`G‘Sts
();

462 
	}
}

	@examples/dash-example.cc

27 
	~<¡ršg
>

28 
	~<f¡»am
>

29 
	~<s¡»am
>

30 
	~"ns3/cÜe-moduË.h
"

31 
	~"ns3/pošt-to-pošt-moduË.h
"

32 
	~"ns3/š‹º‘-moduË.h
"

33 
	~"ns3/­¶iÿtiÚs-moduË.h
"

34 
	~"ns3/ÃtwÜk-moduË.h
"

35 
	~"ns3/dash-moduË.h
"

36 
	~<s¡»am
>

37 
	~"../mod–/·¿.h
"

38 
usšg
 
Çme¥aû
 
	gns3
;

39 
usšg
 
Çme¥aû
 
	g¡d
;

40 
NS_LOG_COMPONENT_DEFINE
("DashExample");

42 
	#SIZE
 100

	)

43 
	glše
[
SIZE
];

48 
	$maš
(
¬gc
, *
¬gv
[])

50 
boŞ
 
Œacšg
 = 
çl£
;

51 
ušt32_t
 
maxBy‹s
 = 100;

52 
ušt32_t
 
u£rs
 = 1;

53 
rg‘_dt
 = 35.0;

54 
¡İTime
 = 100.0;

55 
¡d
::
¡ršg
 
lškR©e
 = "500Kbps";

56 
¡d
::
¡ršg
 
d–ay
 = "0ms";

57 
¡d
::
¡ršg
 
´ÙocŞ
 = "ns3::DashClient";

58 
¡d
::
¡ršg
 
wšdow
 = "10s";

59 
video_šfo_dœ
="";

60 
´ob_dœ
="";

61 
´ob_ov”®l_dœ
="";

62 
u£r_šfo_fe
="";

63 
ex³rim’t_dœ
="";

64 
te_rows
=0;

65 
te_cŞs
=0;

66 
rho
=0.5;

67 
š™_bufãr
 = 4;

68 
£g_Ëngth
 = 1;

69 
¡d
::
¡ršg
 
gt_dœ
="";

70 
¡d
::
¡ršg
 
´ed_dœ
="";

72 
mode
="";

81 
CommªdLše
 
cmd
;

82 
cmd
.
	`AddV®ue
("Œacšg", "FÏgØ’abË/di§bË¿cšg", 
Œacšg
);

83 
cmd
.
	`AddV®ue
("maxBytes", "Total‚umber of bytes for‡pplicationo send",

84 
maxBy‹s
);

85 
cmd
.
	`AddV®ue
("u£rs", "Thnumb” oàcÚcu¼’ˆvideos", 
u£rs
);

86 
cmd
.
	`AddV®ue
("targetDt",

88 
rg‘_dt
);

89 
cmd
.
	`AddV®ue
("stopTime",

90 "Thtimwh’hş›Á wÈ¡İ„eque¡šg segm’ts", 
¡İTime
);

91 
cmd
.
	`AddV®ue
("linkRate",

93 
lškR©e
);

94 
cmd
.
	`AddV®ue
("delay",

96 
d–ay
);

97 
cmd
.
	`AddV®ue
("protocol",

99 
´ÙocŞ
);

100 
cmd
.
	`AddV®ue
("window",

101 "Thwšdow fÜ m—suršghav”agthroughpuˆ(Time).", 
wšdow
);

103 
cmd
.
	`AddV®ue
("in_file",

104 "špuˆfe", 
šput_£r›s
);

106 
cmd
.
	`AddV®ue
("seg_length",

107 "Th£gm’ˆËngth.", 
£g_Ëngth
);

109 
cmd
.
	`AddV®ue
("init_buffer",

110 "Thš™ŸÈbufã¸Ëngth (£gm’t).", 
š™_bufãr
);

111 
cmd
.
	`AddV®ue
("video_info_dir",

112 "ThdœeùÜy stÜšghvideØšfÜm©iÚ:ed-£gm’ˆsize, PSNR, SSIM, OPVQ.", 
video_šfo_dœ
);

113 
cmd
.
	`AddV®ue
("user_info",

114 "Thf¡Üšghu£¸šfÜm©iÚ (video_idx, u£r_idx).", 
u£r_šfo_fe
);

115 
cmd
.
	`AddV®ue
("experiment_dir",

116 "ThdœeùÜy stÜšghex³rim’ˆouuts.", 
ex³rim’t_dœ
);

117 
cmd
.
	`AddV®ue
("feature_dir",

118 "ThdœeùÜy stÜšg iÅuˆã©u»s.", 
ã©u»_dœ
);

119 
cmd
.
	`AddV®ue
("tile_rows",

120 "Thnumb” oàrow še.", 
te_rows
);

121 
cmd
.
	`AddV®ue
("tile_cols",

122 "Thnumb” oàcŞumn še.", 
te_cŞs
);

123 
cmd
.
	`AddV®ue
("rho",

124 "Thth»shŞd oàv›wšg…robab™y.", 
rho
);

125 
cmd
.
	`AddV®ue
("pred_dir",

126 "ThdœeùÜy stÜšgh´ediùed¿ûs.", 
´ed_dœ
);

127 
cmd
.
	`AddV®ue
("gt_dir",

128 "ThdœeùÜy stÜšghgroundruth¿ûs.", 
gt_dœ
);

130 
cmd
.
	`AddV®ue
("cur_pre",

131 "difã»ÁŸ‹ usšg CUR o¸´ediùiÚ", 
mode
);

135 
cmd
.
	`P¬£
(
¬gc
, 
¬gv
);

172 
¡d
::
¡ršg
 
video_šfo_šdex
="";

173 
video_šfo_šdex
=
video_šfo_dœ
+"video_index";

174 
if¡»am
 
	`video_šfo_fe
(
video_šfo_šdex
);

175 if(!
video_šfo_fe
)

176 
cout
<<"nØvideØšfØfe"<<
’dl
;

177 
¡d
::
¡ršg
 
tmp_¡r
="";

178 
video_šfo_fe
 >> 
tmp_¡r
){

179 
video_Çmes
.
	`push_back
(
tmp_¡r
);

181 
video_šfo_fe
.
	`şo£
();

182 
¡d
::
¡ršg¡»am
 
tmp_te_cŞ
, 
tmp_te_row
;

183 
tmp_te_cŞ
<<
te_cŞs
;

184 
tmp_te_row
<<
te_rows
;

185 
te_cŞ
=
tmp_te_cŞ
.
	`¡r
();

186 
te_row
=
tmp_te_row
.
	`¡r
();

187 
¡ršg
 
¡r
;

190 
ušt32_t
 
k
=0; k<
video_Çmes
.
	`size
(); k++){

191 
veùÜ
<veùÜ<>> 
tmp_video_size
;

192 
if¡»am
 
	`video_size_fe
(
video_šfo_dœ
+
video_Çmes
[
k
]+"_"+
te_cŞ
+"x"+
te_row
+"_size");

193 if(!
video_size_fe
)

194 
cout
<<"nØvideØšfØfe: "<<
video_Çmes
[
k
]+"_"+
te_cŞ
+"x"+
te_row
+"_size"<<
’dl
;

195 
	`g‘lše
(
video_size_fe
,
¡r
)){

196 
i¡ršg¡»am
 
	`sss
(
¡r
);

197 
¡ršg
 
tok’
;

198 
veùÜ
<> 
tmp_te_size
;

199 
	`g‘lše
(
sss
,
tok’
,' ')){

200 
tmp_te_size
.
	`push_back
(
	`¡od
(
tok’
));

202 
tmp_video_size
.
	`push_back
(
tmp_te_size
);

204 
video_size
.
	`push_back
(
tmp_video_size
);

205 
video_size_fe
.
	`şo£
();

208 
if¡»am
 
	`u£r_šfo_å
(
u£r_šfo_fe
);

209 if(!
u£r_šfo_å
)

210 
cout
<<"nØu£¸šfØfe: "<<
u£r_šfo_fe
<<
’dl
;

211 
¡ršg
 
video_idx
, 
u£r_idx
;

212 
u£r_šfo_å
 >> 
video_idx
 >> 
u£r_idx
){

213 
veùÜ
<> 
tmp_u£r
;

214 
tmp_u£r
.
	`push_back
(
	`¡oi
(
video_idx
));

215 
tmp_u£r
.
	`push_back
(
	`¡oi
(
u£r_idx
));

216 
tmp_u£r
.
	`push_back
(-1);

217 
u£r_šfo
.
	`push_back
(
tmp_u£r
);

219 
tmp_´ed_fe
[50];

220 
	`¥rštf
(
tmp_´ed_fe
,"%s%s_u£r%02d_´ed",
´ed_dœ
.
	`c_¡r
(),
video_Çmes
[
tmp_u£r
[0]].c_¡r(),
	`¡oi
(
u£r_idx
));

221 
¡d
::
¡ršg
 
	`´ed_šfo_f
(
tmp_´ed_fe
);

222 
if¡»am
 
	`´ed_šfo_å
(
´ed_šfo_f
);

223 
veùÜ
<veùÜ<>> 
tmp_u£r_´ed
;

224 
út
=0;

225 
	`g‘lše
(
´ed_šfo_å
,
¡r
)){

230 
i¡ršg¡»am
 
	`sss
(
¡r
);

231 
¡ršg
 
tok’
;

232 
veùÜ
<> 
tmp_te_´ed
;

233 
	`g‘lše
(
sss
,
tok’
,' ')){

234 
tmp_te_´ed
.
	`push_back
(
	`¡of
(
tok’
));

236 
tmp_u£r_´ed
.
	`push_back
(
tmp_te_´ed
);

239 
´ed_šfo
.
	`push_back
(
tmp_u£r_´ed
);

240 
´ed_šfo_å
.
	`şo£
();

242 
tmp_gt_fe
[50];

243 
	`¥rštf
(
tmp_gt_fe
,"%s%s_u£r%02d_gt_n30",
gt_dœ
.
	`c_¡r
(),
video_Çmes
[
tmp_u£r
[0]].c_¡r(),
	`¡oi
(
u£r_idx
));

244 
¡d
::
¡ršg
 
	`tmp_gt_f
(
tmp_gt_fe
);

245 
if¡»am
 
	`gt_šfo_å
(
tmp_gt_f
);

246 
veùÜ
<veùÜ<>> 
tmp_u£r_gt
;

247 
út
=0;

248 
	`g‘lše
(
gt_šfo_å
,
¡r
)){

249 ià(
út
%30!=0){

250 
út
++;

253 
i¡ršg¡»am
 
	`sss
(
¡r
);

254 
¡ršg
 
tok’
;

255 
veùÜ
<> 
tmp_te_gt
;

256 
	`g‘lše
(
sss
,
tok’
,' ')){

257 
tmp_te_gt
.
	`push_back
(
	`¡of
(
tok’
));

259 
tmp_u£r_gt
.
	`push_back
(
tmp_te_gt
);

260 
út
++;

262 
gt_šfo
.
	`push_back
(
tmp_u£r_gt
);

263 
gt_šfo_å
.
	`şo£
();

266 
u£r_šfo_å
.
	`şo£
();

268 
te_num
=()(
te_cŞs
*
te_rows
);

269 
ušt32_t
 
£g_num
=()(60.0/()
£g_Ëngth
);

270 
ušt32_t
 
k
=0; k<
u£rs
; k++){

271 
veùÜ
<veùÜ<>> 
tmp_£g
;

272 
ušt32_t
 
m
=0; m<
£g_num
; m++){

273 
veùÜ
<> 
tmp_te
;

274 
v
=0; v<
te_num
; v++){

275 
tmp_te
.
	`push_back
(0);

277 
tmp_£g
.
	`push_back
(
tmp_te
);

279 
´obs
.
	`push_back
(
tmp_£g
);

282 
ušt32_t
 
k
=0; k<
u£rs
; k++){

283 
veùÜ
<> 
tmp_v£g
;

284 
ušt32_t
 
m
=0; m<
£g_num
; m++){

285 
tmp_v£g
.
	`push_back
(0);

287 
video_£r›s
.
	`push_back
(
tmp_v£g
);

289 
ušt32_t
 
k
=0; k<
u£rs
; k++){

290 
veùÜ
<> 
tmp_br_£g
;

291 
veùÜ
<> 
tmp_di¡_£g
;

292 
ušt32_t
 
m
=0; m<
£g_num
; m++){

293 
tmp_br_£g
.
	`push_back
(0);

295 
brs
.
	`push_back
(
tmp_br_£g
);

380 
	`NS_LOG_INFO
("Create‚odes.");

381 
NodeCÚš”
 
nodes
;

382 
nodes
.
	`C»©e
(2);

384 
	`NS_LOG_INFO
("Create channels.");

389 
PoštToPoštH–³r
 
poštToPošt
;

390 
poštToPošt
.
	`S‘DeviûA‰ribu‹
("D©aR©e", 
	`SŒšgV®ue
(
lškR©e
));

391 
poštToPošt
.
	`S‘ChªÃlA‰ribu‹
("D–ay", 
	`SŒšgV®ue
(
d–ay
));

392 
N‘DeviûCÚš”
 
deviûs
;

393 
deviûs
 = 
poštToPošt
.
	`In¡®l
(
nodes
);

398 
IÁ”ÃtSckH–³r
 
š‹º‘
;

399 
š‹º‘
.
	`In¡®l
(
nodes
);

404 
	`NS_LOG_INFO
("Assign IP Addresses.");

405 
Ipv4Add»ssH–³r
 
v4
;

406 
Ipv4IÁ”çûCÚš”
 
i
 = 
v4
.
	`Assign
(
deviûs
);

408 
	`NS_LOG_INFO
("Create Applications.");

410 
¡d
::
veùÜ
<¡d::
¡ršg
> 
´ÙocŞs
;

411 
¡d
::
¡ršg¡»am
 
	`ss
(
´ÙocŞ
);

412 
¡d
::
¡ršg
 
´Ùo
;

413 
ušt32_t
 
´ÙoNum
 = 0;

414 
¡d
::
	`g‘lše
(
ss
, 
´Ùo
, ','è&& 
´ÙoNum
++ < 
u£rs
)

416 
´ÙocŞs
.
	`push_back
(
´Ùo
);

419 
ušt16_t
 
pÜt
 = 80;

420 
¡d
::
veùÜ
<
DashCl›ÁH–³r
> 
ş›Ás
;

421 
¡d
::
veùÜ
<
AµliÿtiÚCÚš”
> 
ş›ÁAµs
;

424 
ušt32_t
 
u£r
 = 0; u£¸< 
u£rs
; user++)

426 
DashCl›ÁH–³r
 
	`ş›Á
("ns3::TcpSocketFactory",

427 
	`IÃtSock‘Add»ss
(
i
.
	`G‘Add»ss
(1), 
pÜt
), 
´ÙocŞs
[
u£r
 % 
´ÙoNum
]);

429 
ş›Á
.
	`S‘A‰ribu‹
("VideoId", 
	`Uš‹g”V®ue
(
u£r
 + 1));

432 
AµliÿtiÚCÚš”
 
ş›ÁAµ
 = 
ş›Á
.
	`In¡®l
(
nodes
.
	`G‘
(0));

433 
ş›ÁAµ
.
	`S¹
(
	`SecÚds
(0.25));

436 
ş›Ás
.
	`push_back
(
ş›Á
);

437 
ş›ÁAµs
.
	`push_back
(
ş›ÁAµ
);

441 
DashS”v”H–³r
 
	`£rv”
("ns3::TcpSocketFactory",

442 
	`IÃtSock‘Add»ss
(
Ipv4Add»ss
::
	`G‘Any
(), 
pÜt
));

443 
AµliÿtiÚCÚš”
 
£rv”Aµs
 = 
£rv”
.
	`In¡®l
(
nodes
.
	`G‘
(1));

444 
£rv”Aµs
.
	`S¹
(
	`SecÚds
(0.0));

450 ià(
Œacšg
)

452 
AsciiT¿ûH–³r
 
ascii
;

453 
poštToPošt
.
	`EÇbËAsciiAÎ
(
ascii
.
	`C»©eFeSŒ—m
("dash-send.tr"));

454 
poštToPošt
.
	`EÇbËPÿpAÎ
("dash-£nd", 
çl£
);

459 
	`NS_LOG_INFO
("Run Simulation.");

461 
SimuÏtÜ
::
	`Run
();

462 
SimuÏtÜ
::
	`De¡roy
();

463 
	`NS_LOG_INFO
("Done.");

466 
ušt32_t
 
k
;

467 
k
 = 0; k < 
u£rs
; k++)

469 
PŒ
<
DashCl›Á
> 
­p
 = 
DyÇmicCa¡
<DashCl›Á>(
ş›ÁAµs
[
k
].
	`G‘
(0));

470 
¡d
::
cout
 << 
´ÙocŞs
[
k
 % 
´ÙoNum
] << "-Node: " << k;

471 
­p
->
	`G‘Sts
();

476 
	}
}

	@examples/dash-fix.cc

27 
	~<¡ršg
>

28 
	~<f¡»am
>

29 
	~<s¡»am
>

30 
	~"ns3/cÜe-moduË.h
"

31 
	~"ns3/pošt-to-pošt-moduË.h
"

32 
	~"ns3/š‹º‘-moduË.h
"

33 
	~"ns3/­¶iÿtiÚs-moduË.h
"

34 
	~"ns3/ÃtwÜk-moduË.h
"

35 
	~"ns3/dash-moduË.h
"

36 
	~<s¡»am
>

37 
	~"../mod–/·¿.h
"

38 
usšg
 
Çme¥aû
 
	gns3
;

39 
usšg
 
Çme¥aû
 
	g¡d
;

40 
NS_LOG_COMPONENT_DEFINE
("DashExample");

42 
	#SIZE
 100

	)

43 
	glše
[
SIZE
];

48 
	$BªdwidthT¿û
(){

50 
CÚfig
::
	`S‘
("/NodeLi¡/0/DeviûLi¡/0/$ns3::PoštToPoštN‘Deviû/D©aR©e", 
	`SŒšgV®ue
("5Mbps") );

57 
	}
}

60 
	$maš
(
¬gc
, *
¬gv
[])

62 
boŞ
 
Œacšg
 = 
çl£
;

63 
ušt32_t
 
maxBy‹s
 = 100;

64 
ušt32_t
 
u£rs
 = 1;

65 
rg‘_dt
 = 35.0;

66 
¡İTime
 = 100.0;

67 
¡d
::
¡ršg
 
lškR©e
 = "500Kbps";

68 
¡d
::
¡ršg
 
d–ay
 = "0ms";

69 
¡d
::
¡ršg
 
´ÙocŞ
 = "ns3::DashClient";

70 
¡d
::
¡ršg
 
wšdow
 = "10s";

71 
video_šfo_dœ
="";

72 
´ob_dœ
="";

73 
´ob_ov”®l_dœ
="";

74 
u£r_šfo_fe
="";

75 
ex³rim’t_dœ
="";

76 
te_rows
=0;

77 
te_cŞs
=0;

78 
rho
=0.5;

79 
š™_bufãr
 = 4;

80 
£g_Ëngth
 = 1;

81 
»q_num
 = 2;

82 
¡d
::
¡ršg
 
gt_dœ
="";

83 
¡d
::
¡ršg
 
´ed_dœ
="";

84 
¡d
::
¡ršg
 
size_dœ
="";

86 
mode
="";

87 
¡d
::
¡ršg
 
®go
="";

88 
veùÜ
<veùÜ<>> 
bw
;

89 
bw_¬—
=2;

90 
¡d
::
¡ršg
 
bw_ty³
;

91 
ušt32_t
 
bw_idx
=0;

92 
veùÜ
<> 
u£r_bw
;

94 
¡d
::
¡ršg
 
cur_dœ
="";

95 
¡d
::
¡ršg
 
dr_dœ
="";

102 
CommªdLše
 
cmd
;

103 
cmd
.
	`AddV®ue
("Œacšg", "FÏgØ’abË/di§bË¿cšg", 
Œacšg
);

104 
cmd
.
	`AddV®ue
("maxBytes", "Total‚umber of bytes for‡pplicationo send",

105 
maxBy‹s
);

106 
cmd
.
	`AddV®ue
("u£rs", "Thnumb” oàcÚcu¼’ˆvideos", 
u£rs
);

107 
cmd
.
	`AddV®ue
("targetDt",

109 
rg‘_dt
);

110 
cmd
.
	`AddV®ue
("stopTime",

111 "Thtimwh’hş›Á wÈ¡İ„eque¡šg segm’ts", 
¡İTime
);

112 
cmd
.
	`AddV®ue
("linkRate",

114 
lškR©e
);

115 
cmd
.
	`AddV®ue
("delay",

117 
d–ay
);

118 
cmd
.
	`AddV®ue
("protocol",

120 
´ÙocŞ
);

121 
cmd
.
	`AddV®ue
("window",

122 "Thwšdow fÜ m—suršghav”agthroughpuˆ(Time).", 
wšdow
);

124 
cmd
.
	`AddV®ue
("in_file",

125 "špuˆfe", 
šput_£r›s
);

127 
cmd
.
	`AddV®ue
("seg_length",

128 "Th£gm’ˆËngth.", 
£g_Ëngth
);

130 
cmd
.
	`AddV®ue
("init_buffer",

131 "Thš™ŸÈbufã¸Ëngth (£gm’t).", 
š™_bufãr
);

132 
cmd
.
	`AddV®ue
("video_info_dir",

133 "ThdœeùÜy stÜšghvideØšfÜm©iÚ:ed-£gm’ˆsize, PSNR, SSIM, OPVQ.", 
video_šfo_dœ
);

134 
cmd
.
	`AddV®ue
("user_info",

135 "Thf¡Üšghu£¸šfÜm©iÚ (video_idx, u£r_idx).", 
u£r_šfo_fe
);

136 
cmd
.
	`AddV®ue
("experiment_dir",

137 "ThdœeùÜy stÜšghex³rim’ˆouuts.", 
ex³rim’t_dœ
);

138 
cmd
.
	`AddV®ue
("feature_dir",

139 "ThdœeùÜy stÜšg iÅuˆã©u»s.", 
ã©u»_dœ
);

140 
cmd
.
	`AddV®ue
("tile_rows",

141 "Thnumb” oàrow še.", 
te_rows
);

142 
cmd
.
	`AddV®ue
("tile_cols",

143 "Thnumb” oàcŞumn še.", 
te_cŞs
);

144 
cmd
.
	`AddV®ue
("rho",

145 "Thth»shŞd oàv›wšg…robab™y.", 
rho
);

146 
cmd
.
	`AddV®ue
("pred_dir",

147 "ThdœeùÜy stÜšgh´ediùed¿ûs.", 
´ed_dœ
);

148 
cmd
.
	`AddV®ue
("gt_dir",

149 "ThdœeùÜy stÜšghgroundruth¿ûs.", 
gt_dœ
);

150 
cmd
.
	`AddV®ue
("cur_dir",

151 "ThdœeùÜy stÜšgh´ediùed¿ûs.", 
cur_dœ
);

152 
cmd
.
	`AddV®ue
("dr_dir",

153 "ThdœeùÜy stÜšgh´ediùed¿ûs.", 
dr_dœ
);

154 
cmd
.
	`AddV®ue
("mode",

155 "difã»ÁŸ‹ usšg CUR o¸´ediùiÚ", 
mode
);

156 
cmd
.
	`AddV®ue
("algo",

157 "Thb™¿‹‡ÎoÿtiÚ‡lgÜ™hms: uni, vod,†ive, mm", 
®go
);

158 
cmd
.
	`AddV®ue
("bw_area",

159 "Th¬— cÚsid”ed fÜhbªdwidth", 
bw_¬—
);

160 
cmd
.
	`AddV®ue
("bw_type",

161 "Thfšdiÿtšghbwy³ ®loÿtiÚ fÜƒach u£r", 
bw_ty³
);

162 
cmd
.
	`AddV®ue
("bw_idx",

163 "Thšdex oàbwy³ fe", 
bw_idx
);

164 
cmd
.
	`AddV®ue
("area_dir",

165 "ThdœeùÜy stÜšgh¬— infÜm©iÚ.", 
¬—_dœ
);

166 
cmd
.
	`AddV®ue
("size_dir",

167 "ThdœeùÜy stÜšghvideØsizšfÜm©iÚ.", 
size_dœ
);

168 
cmd
.
	`AddV®ue
("req_num",

169 "ThdœeùÜy stÜšghvideØsizšfÜm©iÚ.", 
»q_num
);

170 
cmd
.
	`P¬£
(
¬gc
, 
¬gv
);

173 
i
=0; i<6; i++){

174 
veùÜ
<> 
tmp_bw
;

175 
j
=0; j<3; j++){

176 
tmp_bw
.
	`push_back
(0);

178 
bw
.
	`push_back
(
tmp_bw
);

180 
bw
[0][0]=46.2;

181 
bw
[0][1]=26.7;

182 
bw
[0][2]=12.6;

183 
bw
[1][0]=11.7;

184 
bw
[1][1]=9.0;

185 
bw
[1][2]=9.1;

186 
bw
[2][0]=43.2;

187 
bw
[2][1]=37.1;

188 
bw
[2][2]=12.7;

189 
bw
[3][0]=37.9;

190 
bw
[3][1]=25.0;

191 
bw
[3][2]=15.9;

192 
bw
[4][0]=32.8;

193 
bw
[4][1]=19.5;

194 
bw
[4][2]=14.2;

195 
bw
[5][0]=39.0;

196 
bw
[5][1]=6.2;

197 
bw
[5][2]=4.6;

199 
¡d
::
¡ršg
 
tmp_u£r_bw
;

200 
if¡»am
 
	`u£r_bw_fe
(
bw_ty³
);

201 if(!
u£r_bw_fe
)

202 
cout
<<"nØu£r_bw_fe"<<
’dl
;

203 
ušt32_t
 
út
=0;

204 
u£r_bw_fe
>>
tmp_u£r_bw
){

205 
út
=cnt+1;

206 if(
út
>
bw_idx
*
u£rs
 && cnt<=(bw_idx+1)*users){

207 
u£r_bw
.
	`push_back
(
bw
[
bw_¬—
][
	`¡oi
(
tmp_u£r_bw
)]);

210 
u£r_bw_fe
.
	`şo£
();

214 
¡d
::
¡ršg
 
video_šfo_šdex
="";

215 
video_šfo_šdex
=
video_šfo_dœ
+"video_index";

216 
if¡»am
 
	`video_šfo_fe
(
video_šfo_šdex
);

217 if(!
video_šfo_fe
)

218 
cout
<<"nØvideØšfØfe"<<
’dl
;

219 
¡d
::
¡ršg
 
tmp_¡r
="";

220 
video_šfo_fe
 >> 
tmp_¡r
){

221 
video_Çmes
.
	`push_back
(
tmp_¡r
);

223 
video_šfo_fe
.
	`şo£
();

224 
¡d
::
¡ršg¡»am
 
tmp_te_cŞ
, 
tmp_te_row
;

225 
tmp_te_cŞ
<<
te_cŞs
;

226 
tmp_te_row
<<
te_rows
;

227 
te_cŞ
=
tmp_te_cŞ
.
	`¡r
();

228 
te_row
=
tmp_te_row
.
	`¡r
();

229 
¡ršg
 
¡r
;

231 
if¡»am
 
	`u£r_šfo_å
(
u£r_šfo_fe
);

232 if(!
u£r_šfo_å
)

233 
cout
<<"nØu£¸šfØfe: "<<
u£r_šfo_fe
<<
’dl
;

234 
¡ršg
 
video_idx
, 
u£r_idx
;

235 
út
=0;

236 
cout
<<"te_row: "<<
te_rows
<<"e_cŞ: "<<
te_cŞs
<<
’dl
;

237 
u£r_šfo_å
 >> 
video_idx
 >> 
u£r_idx
){

238 
veùÜ
<> 
tmp_u£r
;

239 
tmp_u£r
.
	`push_back
(
	`¡oi
(
video_idx
));

240 
tmp_u£r
.
	`push_back
(
	`¡oi
(
u£r_idx
));

241 
tmp_u£r
.
	`push_back
(-1);

243 
tmp_size_fe
[100];

244 
	`¥rštf
(
tmp_size_fe
,"%s%s_u£r%02d_%dx%d_%.1f_gt_%s",
size_dœ
.
	`c_¡r
(),
video_Çmes
[
tmp_u£r
[0]].c_¡r(),
	`¡oi
(
u£r_idx
),
te_cŞs
,
te_rows
,
u£r_bw
[
út
],
®go
.c_str());

245 
¡d
::
¡ršg
 
	`size_fe
(
tmp_size_fe
);

246 
if¡»am
 
	`size_å
(
size_fe
);

247 if(!
size_å
)

248 
cout
<<"nØsizfe"<<
size_fe
<<
’dl
;

249 
veùÜ
<> 
tmp_video_size
;

250 
	`g‘lše
(
size_å
,
¡r
)){

251 
i¡ršg¡»am
 
	`sss
(
¡r
);

252 
¡ršg
 
tok’
;

253 
te_size
=0;

255 
	`g‘lše
(
sss
,
tok’
,' ')){

256 
te_size
ñe_size+
	`¡od
(
tok’
);

259 
tmp_video_size
.
	`push_back
(
te_size
);

261 
u£r_£g_size
.
	`push_back
(
tmp_video_size
);

262 
size_å
.
	`şo£
();

263 
út
=cnt+1;

265 
u£r_šfo_å
.
	`şo£
();

266 
te_num
=()(
te_cŞs
*
te_rows
);

267 
ušt32_t
 
£g_num
=()(60.0/()
£g_Ëngth
);

268 
ušt32_t
 
k
=0; k<
u£rs
; k++){

269 
veùÜ
<veùÜ<>> 
tmp_£g
;

270 
ušt32_t
 
m
=0; m<
£g_num
; m++){

271 
veùÜ
<> 
tmp_te
;

272 
v
=0; v<
te_num
; v++){

273 
tmp_te
.
	`push_back
(0);

275 
tmp_£g
.
	`push_back
(
tmp_te
);

277 
´obs
.
	`push_back
(
tmp_£g
);

280 
ušt32_t
 
k
=0; k<
u£rs
; k++){

281 
veùÜ
<> 
tmp_v£g
;

282 
ušt32_t
 
m
=0; m<
£g_num
; m++){

283 
tmp_v£g
.
	`push_back
(0);

285 
video_£r›s
.
	`push_back
(
tmp_v£g
);

287 
ušt32_t
 
k
=0; k<
u£rs
; k++){

288 
veùÜ
<> 
tmp_br_£g
;

289 
veùÜ
<> 
tmp_di¡_£g
;

290 
ušt32_t
 
m
=0; m<
£g_num
; m++){

291 
tmp_br_£g
.
	`push_back
(0);

293 
brs
.
	`push_back
(
tmp_br_£g
);

300 
	`NS_LOG_INFO
("Create‚odes.");

301 
NodeCÚš”
 
nodes
;

304 
nodes
.
	`C»©e
 (
u£rs
+1);

307 
	`NS_LOG_INFO
("Create channels.");

309 
veùÜ
<
NodeCÚš”
> 
u£r_node
;

310 
ušt32_t
 
u£r
 = 0; u£¸< 
u£rs
; user++){

311 
NodeCÚš”
 
x
 = 
	`NodeCÚš”
 (
nodes
.
	`G‘
 (
u£r
),‚odes.G‘ (
u£rs
));

312 
u£r_node
.
	`push_back
(
x
);

322 
IÁ”ÃtSckH–³r
 
š‹º‘
;

323 
š‹º‘
.
	`In¡®l
(
nodes
);

325 
veùÜ
<
N‘DeviûCÚš”
> 
u£r_deviû
;

326 
¡ršg
 
¿‹
[15]= {"18.2Mbps","18.2Mbps","18.2Mbps","18.2Mbps","20Mbps","20Mbps","20Mbps","20Mbps","20Mbps","40Mbps","40Mbps","40Mbps","40Mbps","40Mbps","40Mbps"};

327 
veùÜ
<
¡ršg
> 
u£r_bwr
;

329 
ušt32_t
 
i
=0; i<
u£r_bw
.
	`size
(); i++){

331 
o¡ršg¡»am
 
ss
;

332 
ss
 << 
u£r_bw
[
i
];

333 
¡ršg
 
tmp
 = 
ss
.
	`¡r
();

334 
tmp
 =mp+"Mbps";

336 
u£r_bwr
.
	`push_back
(
tmp
);

337 
cout
<<"Bªd: "<<
tmp
<<
’dl
;

341 
ušt32_t
 
u£r
 = 0; u£¸< 
u£rs
; user++){

342 
PoštToPoštH–³r
 
p2p
;

343 
p2p
.
	`S‘DeviûA‰ribu‹
 ("D©aR©e", 
	`SŒšgV®ue
 (
u£r_bwr
[
u£r
]));

344 
p2p
.
	`S‘ChªÃlA‰ribu‹
 ("D–ay", 
	`SŒšgV®ue
 ("3ms"));

345 
N‘DeviûCÚš”
 
x
 = 
p2p
.
	`In¡®l
 (
u£r_node
[
u£r
]);

346 
u£r_deviû
.
	`push_back
(
x
);

398 
	`NS_LOG_INFO
 ("Assign IP Addresses.");

399 
Ipv4Add»ssH–³r
 
v4
;

400 
veùÜ
<
Ipv4IÁ”çûCÚš”
> 
u£r_v4
;

401 
ušt32_t
 
u£r
 = 0; u£¸< 
u£rs
; user++){

402 
¡ršg
 
tmp1
 = "10.1.";

403 
¡ršg¡»am
 
ss
;

404 
ss
 << 
u£r
;

405 
¡ršg
 
¡r
 = 
ss
.
	`¡r
();

406 
¡ršg
 
s
 = 
tmp1
+
¡r
+".0";

407 
v4
.
	`S‘Ba£
 (
s
.
	`c_¡r
(), "255.255.255.0");

408 
Ipv4IÁ”çûCÚš”
 
x
 = 
v4
.
	`Assign
 (
u£r_deviû
[
u£r
]);

409 
u£r_v4
.
	`push_back
(
x
);

428 
	`NS_LOG_INFO
("Create Applications.");

430 
Ipv4Glob®RoutšgH–³r
::
	`PİuÏ‹RoutšgTabËs
 ();

436 
¡d
::
veùÜ
<¡d::
¡ršg
> 
´ÙocŞs
;

437 
¡d
::
¡ršg¡»am
 
	`ss
(
´ÙocŞ
);

438 
¡d
::
¡ršg
 
´Ùo
;

439 
ušt32_t
 
´ÙoNum
 = 0;

440 
¡d
::
	`g‘lše
(
ss
, 
´Ùo
, ','è&& 
´ÙoNum
++ < 
u£rs
)

442 
´ÙocŞs
.
	`push_back
(
´Ùo
);

445 
ušt16_t
 
pÜt
 = 80;

446 
¡d
::
veùÜ
<
DashCl›ÁH–³r
> 
ş›Ás
;

447 
¡d
::
veùÜ
<
AµliÿtiÚCÚš”
> 
ş›ÁAµs
;

449 
ušt32_t
 
u£r
 = 0; u£¸< 
u£rs
; user++)

451 
DashCl›ÁH–³r
 
	`ş›Á
("ns3::TcpSocketFactory",

452 
	`IÃtSock‘Add»ss
(
u£r_v4
[
u£r
].
	`G‘Add»ss
(1), 
pÜt
), 
´ÙocŞs
[u£¸% 
´ÙoNum
]);

453 
ş›Á
.
	`S‘A‰ribu‹
("VideoId", 
	`Uš‹g”V®ue
(
u£r
 + 1));

454 
AµliÿtiÚCÚš”
 
ş›ÁAµ
 = 
ş›Á
.
	`In¡®l
(
nodes
.
	`G‘
(
u£r
));

455 
ş›ÁAµ
.
	`S¹
(
	`SecÚds
(0.25));

456 
ş›Ás
.
	`push_back
(
ş›Á
);

457 
ş›ÁAµs
.
	`push_back
(
ş›ÁAµ
);

509 
DashS”v”H–³r
 
	`£rv”
("ns3::TcpSocketFactory",

510 
	`IÃtSock‘Add»ss
(
Ipv4Add»ss
::
	`G‘Any
(), 
pÜt
));

511 
AµliÿtiÚCÚš”
 
£rv”Aµs
 = 
£rv”
.
	`In¡®l
(
nodes
.
	`G‘
(
u£rs
));

512 
£rv”Aµs
.
	`S¹
(
	`SecÚds
(0.0));

533 
	`NS_LOG_INFO
("Run Simulation.");

535 
SimuÏtÜ
::
	`Run
();

538 
SimuÏtÜ
::
	`De¡roy
();

539 
	`NS_LOG_INFO
("Done.");

542 
ušt32_t
 
k
;

543 
k
 = 0; k < 
u£rs
; k++)

545 
PŒ
<
DashCl›Á
> 
­p
 = 
DyÇmicCa¡
<DashCl›Á>(
ş›ÁAµs
[
k
].
	`G‘
(0));

546 
¡d
::
cout
 << 
´ÙocŞs
[
k
 % 
´ÙoNum
] << "-Node: " << k;

547 
­p
->
	`G‘Sts
();

552 
	}
}

	@examples/dash-multi.cc

27 
	~<¡ršg
>

28 
	~<f¡»am
>

29 
	~<s¡»am
>

30 
	~"ns3/cÜe-moduË.h
"

31 
	~"ns3/pošt-to-pošt-moduË.h
"

32 
	~"ns3/š‹º‘-moduË.h
"

33 
	~"ns3/­¶iÿtiÚs-moduË.h
"

34 
	~"ns3/ÃtwÜk-moduË.h
"

35 
	~"ns3/dash-moduË.h
"

36 
	~<s¡»am
>

37 
	~"../mod–/·¿.h
"

38 
usšg
 
Çme¥aû
 
	gns3
;

39 
usšg
 
Çme¥aû
 
	g¡d
;

40 
NS_LOG_COMPONENT_DEFINE
("DashExample");

42 
	#SIZE
 100

	)

43 
	glše
[
SIZE
];

48 
	$BªdwidthT¿û
(){

50 
CÚfig
::
	`S‘
("/NodeLi¡/0/DeviûLi¡/0/$ns3::PoštToPoštN‘Deviû/D©aR©e", 
	`SŒšgV®ue
("5Mbps") );

57 
	}
}

60 
	$maš
(
¬gc
, *
¬gv
[])

62 
boŞ
 
Œacšg
 = 
çl£
;

63 
ušt32_t
 
maxBy‹s
 = 100;

64 
ušt32_t
 
u£rs
 = 1;

65 
rg‘_dt
 = 35.0;

66 
¡İTime
 = 100.0;

67 
¡d
::
¡ršg
 
lškR©e
 = "500Kbps";

68 
¡d
::
¡ršg
 
d–ay
 = "0ms";

69 
¡d
::
¡ršg
 
´ÙocŞ
 = "ns3::DashClient";

70 
¡d
::
¡ršg
 
wšdow
 = "10s";

71 
video_šfo_dœ
="";

72 
´ob_dœ
="";

73 
´ob_ov”®l_dœ
="";

74 
u£r_šfo_fe
="";

75 
ex³rim’t_dœ
="";

76 
te_rows
=0;

77 
te_cŞs
=0;

78 
rho
=0.5;

79 
š™_bufãr
 = 4;

80 
£g_Ëngth
 = 1;

81 
»q_num
 = 2;

82 
¡d
::
¡ršg
 
gt_dœ
="";

83 
¡d
::
¡ršg
 
´ed_dœ
="";

84 
¡d
::
¡ršg
 
size_dœ
="";

86 
mode
="";

87 
¡d
::
¡ršg
 
®go
="";

88 
veùÜ
<veùÜ<>> 
bw
;

89 
bw_¬—
=2;

90 
¡d
::
¡ršg
 
bw_ty³
;

91 
ušt32_t
 
bw_idx
=0;

92 
veùÜ
<> 
u£r_bw
;

94 
¡d
::
¡ršg
 
cur_dœ
="";

95 
¡d
::
¡ršg
 
dr_dœ
="";

102 
CommªdLše
 
cmd
;

103 
cmd
.
	`AddV®ue
("Œacšg", "FÏgØ’abË/di§bË¿cšg", 
Œacšg
);

104 
cmd
.
	`AddV®ue
("maxBytes", "Total‚umber of bytes for‡pplicationo send",

105 
maxBy‹s
);

106 
cmd
.
	`AddV®ue
("u£rs", "Thnumb” oàcÚcu¼’ˆvideos", 
u£rs
);

107 
cmd
.
	`AddV®ue
("targetDt",

109 
rg‘_dt
);

110 
cmd
.
	`AddV®ue
("stopTime",

111 "Thtimwh’hş›Á wÈ¡İ„eque¡šg segm’ts", 
¡İTime
);

112 
cmd
.
	`AddV®ue
("linkRate",

114 
lškR©e
);

115 
cmd
.
	`AddV®ue
("delay",

117 
d–ay
);

118 
cmd
.
	`AddV®ue
("protocol",

120 
´ÙocŞ
);

121 
cmd
.
	`AddV®ue
("window",

122 "Thwšdow fÜ m—suršghav”agthroughpuˆ(Time).", 
wšdow
);

124 
cmd
.
	`AddV®ue
("in_file",

125 "špuˆfe", 
šput_£r›s
);

127 
cmd
.
	`AddV®ue
("seg_length",

128 "Th£gm’ˆËngth.", 
£g_Ëngth
);

130 
cmd
.
	`AddV®ue
("init_buffer",

131 "Thš™ŸÈbufã¸Ëngth (£gm’t).", 
š™_bufãr
);

132 
cmd
.
	`AddV®ue
("video_info_dir",

133 "ThdœeùÜy stÜšghvideØšfÜm©iÚ:ed-£gm’ˆsize, PSNR, SSIM, OPVQ.", 
video_šfo_dœ
);

134 
cmd
.
	`AddV®ue
("user_info",

135 "Thf¡Üšghu£¸šfÜm©iÚ (video_idx, u£r_idx).", 
u£r_šfo_fe
);

136 
cmd
.
	`AddV®ue
("experiment_dir",

137 "ThdœeùÜy stÜšghex³rim’ˆouuts.", 
ex³rim’t_dœ
);

138 
cmd
.
	`AddV®ue
("feature_dir",

139 "ThdœeùÜy stÜšg iÅuˆã©u»s.", 
ã©u»_dœ
);

140 
cmd
.
	`AddV®ue
("tile_rows",

141 "Thnumb” oàrow še.", 
te_rows
);

142 
cmd
.
	`AddV®ue
("tile_cols",

143 "Thnumb” oàcŞumn še.", 
te_cŞs
);

144 
cmd
.
	`AddV®ue
("rho",

145 "Thth»shŞd oàv›wšg…robab™y.", 
rho
);

146 
cmd
.
	`AddV®ue
("pred_dir",

147 "ThdœeùÜy stÜšgh´ediùed¿ûs.", 
´ed_dœ
);

148 
cmd
.
	`AddV®ue
("gt_dir",

149 "ThdœeùÜy stÜšghgroundruth¿ûs.", 
gt_dœ
);

150 
cmd
.
	`AddV®ue
("cur_dir",

151 "ThdœeùÜy stÜšgh´ediùed¿ûs.", 
cur_dœ
);

152 
cmd
.
	`AddV®ue
("dr_dir",

153 "ThdœeùÜy stÜšgh´ediùed¿ûs.", 
dr_dœ
);

154 
cmd
.
	`AddV®ue
("mode",

155 "difã»ÁŸ‹ usšg CUR o¸´ediùiÚ", 
mode
);

156 
cmd
.
	`AddV®ue
("algo",

157 "Thb™¿‹‡ÎoÿtiÚ‡lgÜ™hms: uni, vod,†ive, mm", 
®go
);

158 
cmd
.
	`AddV®ue
("bw_area",

159 "Th¬— cÚsid”ed fÜhbªdwidth", 
bw_¬—
);

160 
cmd
.
	`AddV®ue
("bw_type",

161 "Thfšdiÿtšghbwy³ ®loÿtiÚ fÜƒach u£r", 
bw_ty³
);

162 
cmd
.
	`AddV®ue
("bw_idx",

163 "Thšdex oàbwy³ fe", 
bw_idx
);

164 
cmd
.
	`AddV®ue
("area_dir",

165 "ThdœeùÜy stÜšgh¬— infÜm©iÚ.", 
¬—_dœ
);

166 
cmd
.
	`AddV®ue
("size_dir",

167 "ThdœeùÜy stÜšghvideØsizšfÜm©iÚ.", 
size_dœ
);

168 
cmd
.
	`AddV®ue
("req_num",

169 "ThdœeùÜy stÜšghvideØsizšfÜm©iÚ.", 
»q_num
);

170 
cmd
.
	`P¬£
(
¬gc
, 
¬gv
);

173 
i
=0; i<6; i++){

174 
veùÜ
<> 
tmp_bw
;

175 
j
=0; j<3; j++){

176 
tmp_bw
.
	`push_back
(0);

178 
bw
.
	`push_back
(
tmp_bw
);

180 
bw
[0][0]=46.2;

181 
bw
[0][1]=26.7;

182 
bw
[0][2]=12.6;

183 
bw
[1][0]=11.7;

184 
bw
[1][1]=9.0;

185 
bw
[1][2]=9.1;

186 
bw
[2][0]=43.2;

187 
bw
[2][1]=37.1;

188 
bw
[2][2]=12.7;

189 
bw
[3][0]=37.9;

190 
bw
[3][1]=25.0;

191 
bw
[3][2]=15.9;

192 
bw
[4][0]=32.8;

193 
bw
[4][1]=19.5;

194 
bw
[4][2]=14.2;

195 
bw
[5][0]=39.0;

196 
bw
[5][1]=6.2;

197 
bw
[5][2]=4.6;

199 
¡d
::
¡ršg
 
tmp_u£r_bw
;

200 
if¡»am
 
	`u£r_bw_fe
(
bw_ty³
);

201 if(!
u£r_bw_fe
)

202 
cout
<<"nØu£r_bw_fe"<<
’dl
;

203 
ušt32_t
 
út
=0;

204 
u£r_bw_fe
>>
tmp_u£r_bw
){

205 
út
=cnt+1;

206 if(
út
>
bw_idx
*
u£rs
 && cnt<=(bw_idx+1)*users){

207 
u£r_bw
.
	`push_back
(
bw
[
bw_¬—
][
	`¡oi
(
tmp_u£r_bw
)]);

210 
u£r_bw_fe
.
	`şo£
();

214 
¡d
::
¡ršg
 
video_šfo_šdex
="";

215 
video_šfo_šdex
=
video_šfo_dœ
+"video_index";

216 
if¡»am
 
	`video_šfo_fe
(
video_šfo_šdex
);

217 if(!
video_šfo_fe
)

218 
cout
<<"nØvideØšfØfe"<<
’dl
;

219 
¡d
::
¡ršg
 
tmp_¡r
="";

220 
video_šfo_fe
 >> 
tmp_¡r
){

221 
video_Çmes
.
	`push_back
(
tmp_¡r
);

223 
video_šfo_fe
.
	`şo£
();

224 
¡d
::
¡ršg¡»am
 
tmp_te_cŞ
, 
tmp_te_row
;

225 
tmp_te_cŞ
<<
te_cŞs
;

226 
tmp_te_row
<<
te_rows
;

227 
te_cŞ
=
tmp_te_cŞ
.
	`¡r
();

228 
te_row
=
tmp_te_row
.
	`¡r
();

229 
¡ršg
 
¡r
;

231 
if¡»am
 
	`u£r_šfo_å
(
u£r_šfo_fe
);

232 if(!
u£r_šfo_å
)

233 
cout
<<"nØu£¸šfØfe: "<<
u£r_šfo_fe
<<
’dl
;

234 
¡ršg
 
video_idx
, 
u£r_idx
;

235 
út
=0;

236 
cout
<<"te_row: "<<
te_rows
<<"e_cŞ: "<<
te_cŞs
<<
’dl
;

237 
u£r_šfo_å
 >> 
video_idx
 >> 
u£r_idx
){

238 
veùÜ
<> 
tmp_u£r
;

239 
tmp_u£r
.
	`push_back
(
	`¡oi
(
video_idx
));

240 
tmp_u£r
.
	`push_back
(
	`¡oi
(
u£r_idx
));

241 
tmp_u£r
.
	`push_back
(-1);

243 
tmp_size_fe
[100];

245 
	`¥rštf
(
tmp_size_fe
,"%s%s_u£r%02d_0_1_cur_size",
size_dœ
.
	`c_¡r
(),
video_Çmes
[
tmp_u£r
[0]].c_¡r(),
	`¡oi
(
u£r_idx
));

246 
¡d
::
¡ršg
 
	`size_fe
(
tmp_size_fe
);

247 
if¡»am
 
	`size_å
(
size_fe
);

248 if(!
size_å
)

249 
cout
<<"nØsizfe"<<
size_fe
<<
’dl
;

250 
veùÜ
<> 
tmp_video_size
;

251 
	`g‘lše
(
size_å
,
¡r
)){

252 
i¡ršg¡»am
 
	`sss
(
¡r
);

253 
¡ršg
 
tok’
;

254 
te_size
=0;

256 
	`g‘lše
(
sss
,
tok’
,' ')){

257 
te_size
ñe_size+
	`¡od
(
tok’
);

260 
tmp_video_size
.
	`push_back
(
te_size
);

262 
u£r_£g_size
.
	`push_back
(
tmp_video_size
);

263 
size_å
.
	`şo£
();

264 
út
=cnt+1;

266 
u£r_šfo_å
.
	`şo£
();

267 
te_num
=()(
te_cŞs
*
te_rows
);

268 
ušt32_t
 
£g_num
=()(60.0/()
£g_Ëngth
);

269 
ušt32_t
 
k
=0; k<
u£rs
; k++){

270 
veùÜ
<veùÜ<>> 
tmp_£g
;

271 
ušt32_t
 
m
=0; m<
£g_num
; m++){

272 
veùÜ
<> 
tmp_te
;

273 
v
=0; v<
te_num
; v++){

274 
tmp_te
.
	`push_back
(0);

276 
tmp_£g
.
	`push_back
(
tmp_te
);

278 
´obs
.
	`push_back
(
tmp_£g
);

281 
ušt32_t
 
k
=0; k<
u£rs
; k++){

282 
veùÜ
<> 
tmp_v£g
;

283 
ušt32_t
 
m
=0; m<
£g_num
; m++){

284 
tmp_v£g
.
	`push_back
(0);

286 
video_£r›s
.
	`push_back
(
tmp_v£g
);

288 
ušt32_t
 
k
=0; k<
u£rs
; k++){

289 
veùÜ
<> 
tmp_br_£g
;

290 
veùÜ
<> 
tmp_di¡_£g
;

291 
ušt32_t
 
m
=0; m<
£g_num
; m++){

292 
tmp_br_£g
.
	`push_back
(0);

294 
brs
.
	`push_back
(
tmp_br_£g
);

301 
	`NS_LOG_INFO
("Create‚odes.");

302 
NodeCÚš”
 
nodes
;

305 
nodes
.
	`C»©e
 (
u£rs
+1);

308 
	`NS_LOG_INFO
("Create channels.");

310 
veùÜ
<
NodeCÚš”
> 
u£r_node
;

311 
ušt32_t
 
u£r
 = 0; u£¸< 
u£rs
; user++){

312 
NodeCÚš”
 
x
 = 
	`NodeCÚš”
 (
nodes
.
	`G‘
 (
u£r
),‚odes.G‘ (
u£rs
));

313 
u£r_node
.
	`push_back
(
x
);

323 
IÁ”ÃtSckH–³r
 
š‹º‘
;

324 
š‹º‘
.
	`In¡®l
(
nodes
);

326 
veùÜ
<
N‘DeviûCÚš”
> 
u£r_deviû
;

327 
¡ršg
 
¿‹
[15]= {"18.2Mbps","18.2Mbps","18.2Mbps","18.2Mbps","20Mbps","20Mbps","20Mbps","20Mbps","20Mbps","40Mbps","40Mbps","40Mbps","40Mbps","40Mbps","40Mbps"};

328 
veùÜ
<
¡ršg
> 
u£r_bwr
;

330 
ušt32_t
 
i
=0; i<
u£r_bw
.
	`size
(); i++){

332 
o¡ršg¡»am
 
ss
;

333 
ss
 << 
u£r_bw
[
i
];

334 
¡ršg
 
tmp
 = 
ss
.
	`¡r
();

335 
tmp
 =mp+"Mbps";

337 
u£r_bwr
.
	`push_back
(
tmp
);

338 
cout
<<"Bªd: "<<
tmp
<<
’dl
;

342 
ušt32_t
 
u£r
 = 0; u£¸< 
u£rs
; user++){

343 
PoštToPoštH–³r
 
p2p
;

344 
p2p
.
	`S‘DeviûA‰ribu‹
 ("D©aR©e", 
	`SŒšgV®ue
 (
u£r_bwr
[
u£r
]));

345 
p2p
.
	`S‘ChªÃlA‰ribu‹
 ("D–ay", 
	`SŒšgV®ue
 ("10ms"));

346 
N‘DeviûCÚš”
 
x
 = 
p2p
.
	`In¡®l
 (
u£r_node
[
u£r
]);

347 
u£r_deviû
.
	`push_back
(
x
);

399 
	`NS_LOG_INFO
 ("Assign IP Addresses.");

400 
Ipv4Add»ssH–³r
 
v4
;

401 
veùÜ
<
Ipv4IÁ”çûCÚš”
> 
u£r_v4
;

402 
ušt32_t
 
u£r
 = 0; u£¸< 
u£rs
; user++){

403 
¡ršg
 
tmp1
 = "10.1.";

404 
¡ršg¡»am
 
ss
;

405 
ss
 << 
u£r
;

406 
¡ršg
 
¡r
 = 
ss
.
	`¡r
();

407 
¡ršg
 
s
 = 
tmp1
+
¡r
+".0";

408 
v4
.
	`S‘Ba£
 (
s
.
	`c_¡r
(), "255.255.255.0");

409 
Ipv4IÁ”çûCÚš”
 
x
 = 
v4
.
	`Assign
 (
u£r_deviû
[
u£r
]);

410 
u£r_v4
.
	`push_back
(
x
);

429 
	`NS_LOG_INFO
("Create Applications.");

431 
Ipv4Glob®RoutšgH–³r
::
	`PİuÏ‹RoutšgTabËs
 ();

437 
¡d
::
veùÜ
<¡d::
¡ršg
> 
´ÙocŞs
;

438 
¡d
::
¡ršg¡»am
 
	`ss
(
´ÙocŞ
);

439 
¡d
::
¡ršg
 
´Ùo
;

440 
ušt32_t
 
´ÙoNum
 = 0;

441 
¡d
::
	`g‘lše
(
ss
, 
´Ùo
, ','è&& 
´ÙoNum
++ < 
u£rs
)

443 
´ÙocŞs
.
	`push_back
(
´Ùo
);

446 
ušt16_t
 
pÜt
 = 80;

447 
¡d
::
veùÜ
<
DashCl›ÁH–³r
> 
ş›Ás
;

448 
¡d
::
veùÜ
<
AµliÿtiÚCÚš”
> 
ş›ÁAµs
;

450 
ušt32_t
 
u£r
 = 0; u£¸< 
u£rs
; user++)

452 
DashCl›ÁH–³r
 
	`ş›Á
("ns3::TcpSocketFactory",

453 
	`IÃtSock‘Add»ss
(
u£r_v4
[
u£r
].
	`G‘Add»ss
(1), 
pÜt
), 
´ÙocŞs
[u£¸% 
´ÙoNum
]);

454 
ş›Á
.
	`S‘A‰ribu‹
("VideoId", 
	`Uš‹g”V®ue
(
u£r
 + 1));

455 
AµliÿtiÚCÚš”
 
ş›ÁAµ
 = 
ş›Á
.
	`In¡®l
(
nodes
.
	`G‘
(
u£r
));

456 
ş›ÁAµ
.
	`S¹
(
	`SecÚds
(0.25));

457 
ş›Ás
.
	`push_back
(
ş›Á
);

458 
ş›ÁAµs
.
	`push_back
(
ş›ÁAµ
);

463 
DashS”v”H–³r
 
	`£rv”
("ns3::TcpSocketFactory",

464 
	`IÃtSock‘Add»ss
(
Ipv4Add»ss
::
	`G‘Any
(), 
pÜt
));

465 
AµliÿtiÚCÚš”
 
£rv”Aµs
 = 
£rv”
.
	`In¡®l
(
nodes
.
	`G‘
(
u£rs
));

466 
£rv”Aµs
.
	`S¹
(
	`SecÚds
(0.0));

487 
	`NS_LOG_INFO
("Run Simulation.");

489 
SimuÏtÜ
::
	`Run
();

492 
SimuÏtÜ
::
	`De¡roy
();

493 
	`NS_LOG_INFO
("Done.");

496 
ušt32_t
 
k
;

497 
k
 = 0; k < 
u£rs
; k++)

499 
PŒ
<
DashCl›Á
> 
­p
 = 
DyÇmicCa¡
<DashCl›Á>(
ş›ÁAµs
[
k
].
	`G‘
(0));

500 
¡d
::
cout
 << 
´ÙocŞs
[
k
 % 
´ÙoNum
] << "-Node: " << k;

501 
­p
->
	`G‘Sts
();

506 
	}
}

	@examples/dash-multi_back.cc

27 
	~<¡ršg
>

28 
	~<f¡»am
>

29 
	~<s¡»am
>

30 
	~"ns3/cÜe-moduË.h
"

31 
	~"ns3/pošt-to-pošt-moduË.h
"

32 
	~"ns3/š‹º‘-moduË.h
"

33 
	~"ns3/­¶iÿtiÚs-moduË.h
"

34 
	~"ns3/ÃtwÜk-moduË.h
"

35 
	~"ns3/dash-moduË.h
"

36 
	~<s¡»am
>

37 
	~"../mod–/·¿.h
"

38 
usšg
 
Çme¥aû
 
	gns3
;

39 
usšg
 
Çme¥aû
 
	g¡d
;

40 
NS_LOG_COMPONENT_DEFINE
("DashExample");

42 
	#SIZE
 100

	)

43 
	glše
[
SIZE
];

48 
	$maš
(
¬gc
, *
¬gv
[])

50 
boŞ
 
Œacšg
 = 
çl£
;

51 
ušt32_t
 
maxBy‹s
 = 100;

52 
ušt32_t
 
u£rs
 = 1;

53 
rg‘_dt
 = 35.0;

54 
¡İTime
 = 100.0;

55 
¡d
::
¡ršg
 
lškR©e
 = "500Kbps";

56 
¡d
::
¡ršg
 
d–ay
 = "0ms";

57 
¡d
::
¡ršg
 
´ÙocŞ
 = "ns3::DashClient";

58 
¡d
::
¡ršg
 
wšdow
 = "10s";

59 
video_šfo_dœ
="";

60 
´ob_dœ
="";

61 
´ob_ov”®l_dœ
="";

62 
u£r_šfo_fe
="";

63 
ex³rim’t_dœ
="";

64 
te_rows
=0;

65 
te_cŞs
=0;

66 
rho
=0.5;

67 
š™_bufãr
 = 4;

68 
£g_Ëngth
 = 1;

69 
¡d
::
¡ršg
 
gt_dœ
="";

70 
¡d
::
¡ršg
 
´ed_dœ
="";

72 
cur_´e
="";

80 
CommªdLše
 
cmd
;

81 
cmd
.
	`AddV®ue
("Œacšg", "FÏgØ’abË/di§bË¿cšg", 
Œacšg
);

82 
cmd
.
	`AddV®ue
("maxBytes", "Total‚umber of bytes for‡pplicationo send",

83 
maxBy‹s
);

84 
cmd
.
	`AddV®ue
("u£rs", "Thnumb” oàcÚcu¼’ˆvideos", 
u£rs
);

85 
cmd
.
	`AddV®ue
("targetDt",

87 
rg‘_dt
);

88 
cmd
.
	`AddV®ue
("stopTime",

89 "Thtimwh’hş›Á wÈ¡İ„eque¡šg segm’ts", 
¡İTime
);

90 
cmd
.
	`AddV®ue
("linkRate",

92 
lškR©e
);

93 
cmd
.
	`AddV®ue
("delay",

95 
d–ay
);

96 
cmd
.
	`AddV®ue
("protocol",

98 
´ÙocŞ
);

99 
cmd
.
	`AddV®ue
("window",

100 "Thwšdow fÜ m—suršghav”agthroughpuˆ(Time).", 
wšdow
);

102 
cmd
.
	`AddV®ue
("in_file",

103 "špuˆfe", 
šput_£r›s
);

105 
cmd
.
	`AddV®ue
("seg_length",

106 "Th£gm’ˆËngth.", 
£g_Ëngth
);

108 
cmd
.
	`AddV®ue
("init_buffer",

109 "Thš™ŸÈbufã¸Ëngth (£gm’t).", 
š™_bufãr
);

110 
cmd
.
	`AddV®ue
("video_info_dir",

111 "ThdœeùÜy stÜšghvideØšfÜm©iÚ:ed-£gm’ˆsize, PSNR, SSIM, OPVQ.", 
video_šfo_dœ
);

112 
cmd
.
	`AddV®ue
("user_info",

113 "Thf¡Üšghu£¸šfÜm©iÚ (video_idx, u£r_idx).", 
u£r_šfo_fe
);

114 
cmd
.
	`AddV®ue
("experiment_dir",

115 "ThdœeùÜy stÜšghex³rim’ˆouuts.", 
ex³rim’t_dœ
);

116 
cmd
.
	`AddV®ue
("feature_dir",

117 "ThdœeùÜy stÜšg iÅuˆã©u»s.", 
ã©u»_dœ
);

118 
cmd
.
	`AddV®ue
("tile_rows",

119 "Thnumb” oàrow še.", 
te_rows
);

120 
cmd
.
	`AddV®ue
("tile_cols",

121 "Thnumb” oàcŞumn še.", 
te_cŞs
);

122 
cmd
.
	`AddV®ue
("rho",

123 "Thth»shŞd oàv›wšg…robab™y.", 
rho
);

124 
cmd
.
	`AddV®ue
("pred_dir",

125 "ThdœeùÜy stÜšgh´ediùed¿ûs.", 
´ed_dœ
);

126 
cmd
.
	`AddV®ue
("gt_dir",

127 "ThdœeùÜy stÜšghgroundruth¿ûs.", 
gt_dœ
);

129 
cmd
.
	`AddV®ue
("cur_pre",

130 "difã»ÁŸ‹ usšg CUR o¸´ediùiÚ", 
cur_´e
);

134 
cmd
.
	`P¬£
(
¬gc
, 
¬gv
);

139 
¡d
::
¡ršg
 
video_šfo_šdex
="";

140 
video_šfo_šdex
=
video_šfo_dœ
+"video_index";

141 
if¡»am
 
	`video_šfo_fe
(
video_šfo_šdex
);

142 if(!
video_šfo_fe
)

143 
cout
<<"nØvideØšfØfe"<<
’dl
;

144 
¡d
::
¡ršg
 
tmp_¡r
="";

145 
video_šfo_fe
 >> 
tmp_¡r
){

146 
video_Çmes
.
	`push_back
(
tmp_¡r
);

148 
video_šfo_fe
.
	`şo£
();

149 
¡d
::
¡ršg¡»am
 
tmp_te_cŞ
, 
tmp_te_row
;

150 
tmp_te_cŞ
<<
te_cŞs
;

151 
tmp_te_row
<<
te_rows
;

152 
te_cŞ
=
tmp_te_cŞ
.
	`¡r
();

153 
te_row
=
tmp_te_row
.
	`¡r
();

154 
¡ršg
 
¡r
;

157 
ušt32_t
 
k
=0; k<
video_Çmes
.
	`size
(); k++){

158 
veùÜ
<veùÜ<>> 
tmp_video_size
;

159 
if¡»am
 
	`video_size_fe
(
video_šfo_dœ
+
video_Çmes
[
k
]+"_"+
te_cŞ
+"x"+
te_row
+"_size");

160 if(!
video_size_fe
)

161 
cout
<<"nØvideØšfØfe: "<<
video_Çmes
[
k
]+"_"+
te_cŞ
+"x"+
te_row
+"_size"<<
’dl
;

162 
	`g‘lše
(
video_size_fe
,
¡r
)){

163 
i¡ršg¡»am
 
	`sss
(
¡r
);

164 
¡ršg
 
tok’
;

165 
veùÜ
<> 
tmp_te_size
;

166 
	`g‘lše
(
sss
,
tok’
,' ')){

167 
tmp_te_size
.
	`push_back
(
	`¡od
(
tok’
));

169 
tmp_video_size
.
	`push_back
(
tmp_te_size
);

171 
video_size
.
	`push_back
(
tmp_video_size
);

172 
video_size_fe
.
	`şo£
();

175 
if¡»am
 
	`u£r_šfo_å
(
u£r_šfo_fe
);

176 if(!
u£r_šfo_å
)

177 
cout
<<"nØu£¸šfØfe: "<<
u£r_šfo_fe
<<
’dl
;

178 
¡ršg
 
video_idx
, 
u£r_idx
;

179 
u£r_šfo_å
 >> 
video_idx
 >> 
u£r_idx
){

180 
veùÜ
<> 
tmp_u£r
;

181 
tmp_u£r
.
	`push_back
(
	`¡oi
(
video_idx
));

182 
tmp_u£r
.
	`push_back
(
	`¡oi
(
u£r_idx
));

183 
tmp_u£r
.
	`push_back
(-1);

184 
u£r_šfo
.
	`push_back
(
tmp_u£r
);

186 
tmp_´ed_fe
[50];

187 
	`¥rštf
(
tmp_´ed_fe
,"%s%s_u£r%02d_´ed",
´ed_dœ
.
	`c_¡r
(),
video_Çmes
[
tmp_u£r
[0]].c_¡r(),
	`¡oi
(
u£r_idx
));

188 
¡d
::
¡ršg
 
	`´ed_šfo_f
(
tmp_´ed_fe
);

189 
if¡»am
 
	`´ed_šfo_å
(
´ed_šfo_f
);

190 
veùÜ
<veùÜ<>> 
tmp_u£r_´ed
;

191 
út
=0;

192 
	`g‘lše
(
´ed_šfo_å
,
¡r
)){

197 
i¡ršg¡»am
 
	`sss
(
¡r
);

198 
¡ršg
 
tok’
;

199 
veùÜ
<> 
tmp_te_´ed
;

200 
	`g‘lše
(
sss
,
tok’
,' ')){

201 
tmp_te_´ed
.
	`push_back
(
	`¡of
(
tok’
));

203 
tmp_u£r_´ed
.
	`push_back
(
tmp_te_´ed
);

206 
´ed_šfo
.
	`push_back
(
tmp_u£r_´ed
);

207 
´ed_šfo_å
.
	`şo£
();

209 
tmp_gt_fe
[50];

210 
	`¥rštf
(
tmp_gt_fe
,"%s%s_u£r%02d_gt_n30",
gt_dœ
.
	`c_¡r
(),
video_Çmes
[
tmp_u£r
[0]].c_¡r(),
	`¡oi
(
u£r_idx
));

211 
¡d
::
¡ršg
 
	`tmp_gt_f
(
tmp_gt_fe
);

212 
if¡»am
 
	`gt_šfo_å
(
tmp_gt_f
);

213 
veùÜ
<veùÜ<>> 
tmp_u£r_gt
;

214 
út
=0;

215 
	`g‘lše
(
gt_šfo_å
,
¡r
)){

216 ià(
út
%30!=0){

217 
út
++;

220 
i¡ršg¡»am
 
	`sss
(
¡r
);

221 
¡ršg
 
tok’
;

222 
veùÜ
<> 
tmp_te_gt
;

223 
	`g‘lše
(
sss
,
tok’
,' ')){

224 
tmp_te_gt
.
	`push_back
(
	`¡of
(
tok’
));

226 
tmp_u£r_gt
.
	`push_back
(
tmp_te_gt
);

227 
út
++;

229 
gt_šfo
.
	`push_back
(
tmp_u£r_gt
);

230 
gt_šfo_å
.
	`şo£
();

233 
u£r_šfo_å
.
	`şo£
();

235 
te_num
=()(
te_cŞs
*
te_rows
);

236 
ušt32_t
 
£g_num
=()(60.0/()
£g_Ëngth
);

237 
ušt32_t
 
k
=0; k<
u£rs
; k++){

238 
veùÜ
<veùÜ<>> 
tmp_£g
;

239 
ušt32_t
 
m
=0; m<
£g_num
; m++){

240 
veùÜ
<> 
tmp_te
;

241 
v
=0; v<
te_num
; v++){

242 
tmp_te
.
	`push_back
(0);

244 
tmp_£g
.
	`push_back
(
tmp_te
);

246 
´obs
.
	`push_back
(
tmp_£g
);

249 
ušt32_t
 
k
=0; k<
u£rs
; k++){

250 
veùÜ
<> 
tmp_v£g
;

251 
ušt32_t
 
m
=0; m<
£g_num
; m++){

252 
tmp_v£g
.
	`push_back
(0);

254 
video_£r›s
.
	`push_back
(
tmp_v£g
);

256 
ušt32_t
 
k
=0; k<
u£rs
; k++){

257 
veùÜ
<> 
tmp_br_£g
;

258 
veùÜ
<> 
tmp_di¡_£g
;

259 
ušt32_t
 
m
=0; m<
£g_num
; m++){

260 
tmp_br_£g
.
	`push_back
(0);

262 
brs
.
	`push_back
(
tmp_br_£g
);

270 
	`NS_LOG_INFO
("Create‚odes.");

271 
NodeCÚš”
 
nodes
;

274 
nodes
.
	`C»©e
 (5);

277 
	`NS_LOG_INFO
("Create channels.");

279 
NodeCÚš”
 
n0n2
 = 
	`NodeCÚš”
 (
nodes
.
	`G‘
 (0),‚odes.Get (2));

280 
NodeCÚš”
 
n1n2
 = 
	`NodeCÚš”
 (
nodes
.
	`G‘
 (1),‚odes.Get (2));

281 
NodeCÚš”
 
n3n2
 = 
	`NodeCÚš”
 (
nodes
.
	`G‘
 (3),‚odes.Get (2));

284 
IÁ”ÃtSckH–³r
 
š‹º‘
;

285 
š‹º‘
.
	`In¡®l
(
nodes
);

288 
PoštToPoštH–³r
 
p2p
;

289 
p2p
.
	`S‘DeviûA‰ribu‹
 ("D©aR©e", 
	`SŒšgV®ue
 ("18Mbps"));

290 
p2p
.
	`S‘ChªÃlA‰ribu‹
 ("D–ay", 
	`SŒšgV®ue
 ("2ms"));

291 
N‘DeviûCÚš”
 
d0d2
 = 
p2p
.
	`In¡®l
 (
n0n2
);

293 
p2p
.
	`S‘DeviûA‰ribu‹
 ("D©aR©e", 
	`SŒšgV®ue
 ("20Mbps"));

294 
p2p
.
	`S‘ChªÃlA‰ribu‹
 ("D–ay", 
	`SŒšgV®ue
 ("2ms"));

295 
N‘DeviûCÚš”
 
d1d2
 = 
p2p
.
	`In¡®l
 (
n1n2
);

297 
p2p
.
	`S‘DeviûA‰ribu‹
 ("D©aR©e", 
	`SŒšgV®ue
 ("40Mbps"));

298 
p2p
.
	`S‘ChªÃlA‰ribu‹
 ("D–ay", 
	`SŒšgV®ue
 ("2ms"));

299 
N‘DeviûCÚš”
 
d3d2
 = 
p2p
.
	`In¡®l
 (
n3n2
);

334 
	`NS_LOG_INFO
 ("Assign IP Addresses.");

335 
Ipv4Add»ssH–³r
 
v4
;

336 
v4
.
	`S‘Ba£
 ("10.1.1.0", "255.255.255.0");

337 
Ipv4IÁ”çûCÚš”
 
i0i2
 = 
v4
.
	`Assign
 (
d0d2
);

339 
v4
.
	`S‘Ba£
 ("10.1.2.0", "255.255.255.0");

340 
Ipv4IÁ”çûCÚš”
 
i1i2
 = 
v4
.
	`Assign
 (
d1d2
);

342 
v4
.
	`S‘Ba£
 ("10.1.3.0", "255.255.255.0");

343 
Ipv4IÁ”çûCÚš”
 
i3i2
 = 
v4
.
	`Assign
 (
d3d2
);

349 
	`NS_LOG_INFO
("Create Applications.");

351 
Ipv4Glob®RoutšgH–³r
::
	`PİuÏ‹RoutšgTabËs
 ();

357 
¡d
::
veùÜ
<¡d::
¡ršg
> 
´ÙocŞs
;

358 
¡d
::
¡ršg¡»am
 
	`ss
(
´ÙocŞ
);

359 
¡d
::
¡ršg
 
´Ùo
;

360 
ušt32_t
 
´ÙoNum
 = 0;

361 
¡d
::
	`g‘lše
(
ss
, 
´Ùo
, ','è&& 
´ÙoNum
++ < 
u£rs
)

363 
´ÙocŞs
.
	`push_back
(
´Ùo
);

366 
ušt16_t
 
pÜt
 = 80;

367 
¡d
::
veùÜ
<
DashCl›ÁH–³r
> 
ş›Ás
;

368 
¡d
::
veùÜ
<
AµliÿtiÚCÚš”
> 
ş›ÁAµs
;

371 
ušt32_t
 
u£r
 = 0; u£¸< 
u£rs
; user++)

374 if(
u£r
==0){

375 
DashCl›ÁH–³r
 
	`ş›Á
("ns3::TcpSocketFactory",

376 
	`IÃtSock‘Add»ss
(
i0i2
.
	`G‘Add»ss
(1), 
pÜt
), 
´ÙocŞs
[
u£r
 % 
´ÙoNum
]);

377 
ş›Á
.
	`S‘A‰ribu‹
("VideoId", 
	`Uš‹g”V®ue
(
u£r
 + 1));

378 
AµliÿtiÚCÚš”
 
ş›ÁAµ
 = 
ş›Á
.
	`In¡®l
(
nodes
.
	`G‘
(0));

379 
ş›ÁAµ
.
	`S¹
(
	`SecÚds
(0.25));

380 
ş›Ás
.
	`push_back
(
ş›Á
);

381 
ş›ÁAµs
.
	`push_back
(
ş›ÁAµ
);

384 if(
u£r
==1){

385 
DashCl›ÁH–³r
 
	`ş›Á
("ns3::TcpSocketFactory",

386 
	`IÃtSock‘Add»ss
(
i1i2
.
	`G‘Add»ss
(1), 
pÜt
), 
´ÙocŞs
[
u£r
 % 
´ÙoNum
]);

387 
ş›Á
.
	`S‘A‰ribu‹
("VideoId", 
	`Uš‹g”V®ue
(
u£r
 + 1));

388 
AµliÿtiÚCÚš”
 
ş›ÁAµ
 = 
ş›Á
.
	`In¡®l
(
nodes
.
	`G‘
(1));

389 
ş›ÁAµ
.
	`S¹
(
	`SecÚds
(0.25));

390 
ş›Ás
.
	`push_back
(
ş›Á
);

391 
ş›ÁAµs
.
	`push_back
(
ş›ÁAµ
);

394 if(
u£r
==2){

395 
DashCl›ÁH–³r
 
	`ş›Á
("ns3::TcpSocketFactory",

396 
	`IÃtSock‘Add»ss
(
i3i2
.
	`G‘Add»ss
(1), 
pÜt
), 
´ÙocŞs
[
u£r
 % 
´ÙoNum
]);

397 
ş›Á
.
	`S‘A‰ribu‹
("VideoId", 
	`Uš‹g”V®ue
(
u£r
 + 1));

398 
AµliÿtiÚCÚš”
 
ş›ÁAµ
 = 
ş›Á
.
	`In¡®l
(
nodes
.
	`G‘
(3));

399 
ş›ÁAµ
.
	`S¹
(
	`SecÚds
(0.25));

400 
ş›Ás
.
	`push_back
(
ş›Á
);

401 
ş›ÁAµs
.
	`push_back
(
ş›ÁAµ
);

423 
DashS”v”H–³r
 
	`£rv”
("ns3::TcpSocketFactory",

424 
	`IÃtSock‘Add»ss
(
Ipv4Add»ss
::
	`G‘Any
(), 
pÜt
));

425 
AµliÿtiÚCÚš”
 
£rv”Aµs
 = 
£rv”
.
	`In¡®l
(
nodes
.
	`G‘
(2));

426 
£rv”Aµs
.
	`S¹
(
	`SecÚds
(0.0));

447 
	`NS_LOG_INFO
("Run Simulation.");

449 
SimuÏtÜ
::
	`Run
();

450 
SimuÏtÜ
::
	`De¡roy
();

451 
	`NS_LOG_INFO
("Done.");

454 
ušt32_t
 
k
;

455 
k
 = 0; k < 
u£rs
; k++)

457 
PŒ
<
DashCl›Á
> 
­p
 = 
DyÇmicCa¡
<DashCl›Á>(
ş›ÁAµs
[
k
].
	`G‘
(0));

458 
¡d
::
cout
 << 
´ÙocŞs
[
k
 % 
´ÙoNum
] << "-Node: " << k;

459 
­p
->
	`G‘Sts
();

464 
	}
}

	@examples/dash-wifi.cc

21 
	~"ns3/cÜe-moduË.h
"

22 
	~"ns3/ÃtwÜk-moduË.h
"

23 
	~"ns3/­¶iÿtiÚs-moduË.h
"

24 
	~"ns3/wifi-moduË.h
"

25 
	~"ns3/mob™y-moduË.h
"

26 
	~"ns3/csma-moduË.h
"

27 
	~"ns3/š‹º‘-moduË.h
"

28 
	~"ns3/Ãnim-moduË.h
"

29 
	~"ns3/Ş¤-h–³r.h
"

30 
	~"ns3/dash-moduË.h
"

32 
usšg
 
Çme¥aû
 
	gns3
;

33 
NS_LOG_COMPONENT_DEFINE
("Dash-Wifi");

36 
	$maš
(
¬gc
, *
¬gv
[])

38 
ušt32_t
 
nWifi
 = 8;

39 
ušt32_t
 
maxBy‹s
 = 0;

40 
ušt32_t
 
u£rs
 = 1;

41 
ušt32_t
 
bulkNo
 = 1;

42 
rg‘_dt
 = 35.0;

43 
¡İTime
 = 100.0;

44 
¡d
::
¡ršg
 
lškR©e
 = "500Kbps";

45 
¡d
::
¡ršg
 
d–ay
 = "5ms";

46 
¡d
::
¡ršg
 
´ÙocŞ
 = "ns3::DashClient";

47 
¡d
::
¡ršg
 
wšdow
 = "10s";

56 
CommªdLše
 
cmd
;

57 
cmd
.
	`AddV®ue
("nWifi", "Numb” oàwif˜STA deviûs", 
nWifi
);

58 
cmd
.
	`AddV®ue
("maxBytes", "Total‚umber of bytes for‡pplicationo send",

59 
maxBy‹s
);

60 
cmd
.
	`AddV®ue
("u£rs", "Thnumb” oàcÚcu¼’ˆvideos", 
u£rs
);

61 
cmd
.
	`AddV®ue
("bulkNo", "Thnumb” oàbackground TCP¿nsãrs", 
bulkNo
);

62 
cmd
.
	`AddV®ue
("targetDt",

64 
rg‘_dt
);

65 
cmd
.
	`AddV®ue
("stopTime",

66 "Thtimwh’hş›Á wÈ¡İ„eque¡šg segm’ts", 
¡İTime
);

67 
cmd
.
	`AddV®ue
("linkRate",

69 
lškR©e
);

70 
cmd
.
	`AddV®ue
("delay",

72 
d–ay
);

73 
cmd
.
	`AddV®ue
("protocol",

75 
´ÙocŞ
);

76 
cmd
.
	`AddV®ue
("window",

77 "Thwšdow fÜ m—suršghav”agthroughpuˆ(Time).", 
wšdow
);

78 
cmd
.
	`P¬£
(
¬gc
, 
¬gv
);

80 ià(
bulkNo
 + 
u£rs
 > 
nWifi
 + 1)

82 
¡d
::
û¼
 << "you‚“d mÜ¡©iÚs" << std::
’dl
;

86 
¡d
::
cout
 << "nWifiğ" << 
nWifi
 << std::
’dl
;

88 
	`LogCompÚ’tEÇbË
("UdpCl›Á", 
LOG_LEVEL_INFO
);

89 
	`LogCompÚ’tEÇbË
("UdpS”v”", 
LOG_LEVEL_INFO
);

91 
NodeCÚš”
 
wifiSNodes
;

92 
wifiSNodes
.
	`C»©e
(
nWifi
);

94 
YªsWifiChªÃlH–³r
 
chªÃl
 = YªsWifiChªÃlH–³r::
	`DeçuÉ
();

95 
YªsWifiPhyH–³r
 
phy
 = YªsWifiPhyH–³r::
	`DeçuÉ
();

96 
phy
.
	`S‘ChªÃl
(
chªÃl
.
	`C»©e
());

99 
WifiH–³r
 
wifi
 = 
	`WifiH–³r
();

100 
wifi
.
	`S‘RemÙeStiÚMªag”
("ns3::AarfWifiManager");

101 
NqosWifiMacH–³r
 
mac
 = NqosWifiMacH–³r::
	`DeçuÉ
();

103 
N‘DeviûCÚš”
 
¡aDeviûs
;

104 
¡aDeviûs
 = 
wifi
.
	`In¡®l
(
phy
, 
mac
, 
wifiSNodes
);

106 
Mob™yH–³r
 
mob™y
;

107 
mob™y
.
	`S‘Pos™iÚAÎoÿtÜ
("ns3::GridPositionAllocator", "MinX",

108 
	`DoubËV®ue
(0.0), "MinY", DoubleValue(0.0), "DeltaX", DoubleValue(40.0),

109 "D–Y", 
	`DoubËV®ue
(50.0), "GridWidth", 
	`Uš‹g”V®ue
(2), "LayoutType",

110 
	`SŒšgV®ue
("RowFirst"));

112 
mob™y
.
	`S‘Mob™yMod–
("ns3::ConstantPositionMobilityModel");

113 
mob™y
.
	`In¡®l
(
wifiSNodes
);

115 
IÁ”ÃtSckH–³r
 
¡ack
;

116 
¡ack
.
	`In¡®l
(
wifiSNodes
);

117 
Ipv4Add»ssH–³r
 
add»ss
;

118 
add»ss
.
	`S‘Ba£
("10.1.2.0", "255.255.255.0");

119 
Ipv4IÁ”çûCÚš”
 
š‹rçûs
 = 
add»ss
.
	`Assign
(
¡aDeviûs
);

122 
¡d
::
veùÜ
<¡d::
¡ršg
> 
´ÙocŞs
;

123 
¡d
::
¡ršg¡»am
 
	`ss
(
´ÙocŞ
);

124 
¡d
::
¡ršg
 
´Ùo
;

125 
ušt32_t
 
´ÙoNum
 = 0;

126 
¡d
::
	`g‘lše
(
ss
, 
´Ùo
, ','è&& 
´ÙoNum
++ < 
u£rs
)

128 
´ÙocŞs
.
	`push_back
(
´Ùo
);

131 
ušt16_t
 
pÜt
 = 80;

133 
¡d
::
veùÜ
<
DashCl›ÁH–³r
> 
ş›Ás
;

134 
¡d
::
veùÜ
<
AµliÿtiÚCÚš”
> 
ş›ÁAµs
;

136 
ušt32_t
 
u£r
 = 0; u£¸< 
u£rs
; user++)

138 
DashCl›ÁH–³r
 
	`ş›Á
("ns3::TcpSocketFactory",

139 
	`IÃtSock‘Add»ss
(
š‹rçûs
.
	`G‘Add»ss
(0), 
pÜt
),
´ÙocŞs
[
u£r
 % 
´ÙoNum
]);

141 
ş›Á
.
	`S‘A‰ribu‹
("VideoId", 
	`Uš‹g”V®ue
(
u£r
 + 1));

142 
ş›Á
.
	`S‘A‰ribu‹
("T¬g‘Dt", 
	`TimeV®ue
(
	`SecÚds
(
rg‘_dt
)));

143 
ş›Á
.
	`S‘A‰ribu‹
("wšdow", 
	`TimeV®ue
(
	`Time
(
wšdow
)));

144 
AµliÿtiÚCÚš”
 
ş›ÁAµ
 = 
ş›Á
.
	`In¡®l
(
wifiSNodes
.
	`G‘
(
u£r
 + 1));

145 
ş›ÁAµ
.
	`S¹
(
	`SecÚds
(0.25));

146 
ş›ÁAµ
.
	`Stİ
(
	`SecÚds
(
¡İTime
));

148 
ş›Ás
.
	`push_back
(
ş›Á
);

149 
ş›ÁAµs
.
	`push_back
(
ş›ÁAµ
);

153 
DashS”v”H–³r
 
	`£rv”
("ns3::TcpSocketFactory",

154 
	`IÃtSock‘Add»ss
(
Ipv4Add»ss
::
	`G‘Any
(), 
pÜt
));

155 
AµliÿtiÚCÚš”
 
£rv”Aµs
 = 
£rv”
.
	`In¡®l
(
wifiSNodes
.
	`G‘
(0));

156 
£rv”Aµs
.
	`S¹
(
	`SecÚds
(0.0));

157 
£rv”Aµs
.
	`Stİ
(
	`SecÚds
(
¡İTime
 + 5.0));

159 
ušt32_t
 
bulk
 = 0; bulk < 
bulkNo
; bulk++)

161 
BulkS’dH–³r
 
	`sourû
("ns3::TcpSocketFactory",

162 
	`IÃtSock‘Add»ss
(
š‹rçûs
.
	`G‘Add»ss
(1 + 
u£rs
 + 
bulk
), 
pÜt
));

164 
sourû
.
	`S‘A‰ribu‹
("MaxBy‹s", 
	`Uš‹g”V®ue
(
maxBy‹s
));

165 
AµliÿtiÚCÚš”
 
sourûAµs
 = 
sourû
.
	`In¡®l
(
wifiSNodes
.
	`G‘
(0));

166 
sourûAµs
.
	`S¹
(
	`SecÚds
(0.0));

167 
sourûAµs
.
	`Stİ
(
	`SecÚds
(
¡İTime
));

169 
Pack‘SškH–³r
 
	`sšk
("ns3::TcpSocketFactory",

170 
	`IÃtSock‘Add»ss
(
Ipv4Add»ss
::
	`G‘Any
(), 
pÜt
));

171 
AµliÿtiÚCÚš”
 
sškAµs
 = 
sšk
.
	`In¡®l
(

172 
wifiSNodes
.
	`G‘
(1 + 
u£rs
 + 
bulk
));

173 
sškAµs
.
	`S¹
(
	`SecÚds
(0.0));

174 
sškAµs
.
	`Stİ
(
	`SecÚds
(
¡İTime
));

191 
SimuÏtÜ
::
	`Stİ
(
	`SecÚds
(
¡İTime
));

192 
Anim©iÚIÁ”çû
 
	`ªim
("dash-wifi.xml");

193 
SimuÏtÜ
::
	`Run
();

194 
SimuÏtÜ
::
	`De¡roy
();

196 
ušt32_t
 
k
;

197 
k
 = 0; k < 
u£rs
; k++)

199 
PŒ
<
DashCl›Á
> 
­p
 = 
DyÇmicCa¡
<DashCl›Á>(
ş›ÁAµs
[
k
].
	`G‘
(0));

200 
¡d
::
cout
 << 
´ÙocŞs
[
k
 % 
´ÙoNum
] << "-Node: " << k;

201 
­p
->
	`G‘Sts
();

205 
	}
}

	@examples/first.cc

17 
	~"ns3/cÜe-moduË.h
"

18 
	~"ns3/ÃtwÜk-moduË.h
"

19 
	~"ns3/š‹º‘-moduË.h
"

20 
	~"ns3/pošt-to-pošt-moduË.h
"

21 
	~"ns3/­¶iÿtiÚs-moduË.h
"

23 
usšg
 
Çme¥aû
 
	gns3
;

25 
NS_LOG_COMPONENT_DEFINE
 ("FirstScriptExample");

28 
	$maš
 (
¬gc
, *
¬gv
[])

30 
CommªdLše
 
cmd
;

31 
cmd
.
	`P¬£
 (
¬gc
, 
¬gv
);

33 
Time
::
	`S‘ResŞutiÚ
 (Time::
NS
);

34 
	`LogCompÚ’tEÇbË
 ("UdpEchoCl›ÁAµliÿtiÚ", 
LOG_LEVEL_INFO
);

35 
	`LogCompÚ’tEÇbË
 ("UdpEchoS”v”AµliÿtiÚ", 
LOG_LEVEL_INFO
);

37 
NodeCÚš”
 
nodes
;

38 
nodes
.
	`C»©e
 (2);

40 
PoštToPoštH–³r
 
poštToPošt
;

41 
poštToPošt
.
	`S‘DeviûA‰ribu‹
 ("D©aR©e", 
	`SŒšgV®ue
 ("5Mbps"));

42 
poštToPošt
.
	`S‘ChªÃlA‰ribu‹
 ("D–ay", 
	`SŒšgV®ue
 ("2ms"));

44 
N‘DeviûCÚš”
 
deviûs
;

45 
deviûs
 = 
poštToPošt
.
	`In¡®l
 (
nodes
);

47 
IÁ”ÃtSckH–³r
 
¡ack
;

48 
¡ack
.
	`In¡®l
 (
nodes
);

50 
Ipv4Add»ssH–³r
 
add»ss
;

51 
add»ss
.
	`S‘Ba£
 ("10.1.1.0", "255.255.255.0");

53 
Ipv4IÁ”çûCÚš”
 
š‹rçûs
 = 
add»ss
.
	`Assign
 (
deviûs
);

55 
UdpEchoS”v”H–³r
 
	`echoS”v”
 (9);

57 
AµliÿtiÚCÚš”
 
£rv”Aµs
 = 
echoS”v”
.
	`In¡®l
 (
nodes
.
	`G‘
 (1));

58 
£rv”Aµs
.
	`S¹
 (
	`SecÚds
 (1.0));

59 
£rv”Aµs
.
	`Stİ
 (
	`SecÚds
 (10.0));

61 
UdpEchoCl›ÁH–³r
 
	`echoCl›Á
 (
š‹rçûs
.
	`G‘Add»ss
 (1), 9);

62 
echoCl›Á
.
	`S‘A‰ribu‹
 ("MaxPack‘s", 
	`Uš‹g”V®ue
 (1));

63 
echoCl›Á
.
	`S‘A‰ribu‹
 ("IÁ”v®", 
	`TimeV®ue
 (
	`SecÚds
 (1.0)));

64 
echoCl›Á
.
	`S‘A‰ribu‹
 ("Pack‘Size", 
	`Uš‹g”V®ue
 (1024));

66 
AµliÿtiÚCÚš”
 
ş›ÁAµs
 = 
echoCl›Á
.
	`In¡®l
 (
nodes
.
	`G‘
 (0));

67 
ş›ÁAµs
.
	`S¹
 (
	`SecÚds
 (2.0));

68 
ş›ÁAµs
.
	`Stİ
 (
	`SecÚds
 (10.0));

70 
SimuÏtÜ
::
	`Run
 ();

71 
SimuÏtÜ
::
	`De¡roy
 ();

73 
	}
}

	@examples/link-example.cc

27 
	~<¡ršg
>

28 
	~<f¡»am
>

29 
	~"ns3/cÜe-moduË.h
"

30 
	~"ns3/pošt-to-pošt-moduË.h
"

31 
	~"ns3/š‹º‘-moduË.h
"

32 
	~"ns3/­¶iÿtiÚs-moduË.h
"

33 
	~"ns3/ÃtwÜk-moduË.h
"

34 
	~"ns3/dash-moduË.h
"

35 
	~"../mod–/·¿.h
"

36 
usšg
 
Çme¥aû
 
	gns3
;

38 
NS_LOG_COMPONENT_DEFINE
("DashExample");

40 
	#SIZE
 100

	)

41 
	glše
[
SIZE
];

44 
C®lBack
(
PŒ
<
N‘Deviû
> 
deviû
, 
¡d
::
¡ršg
 
¿‹
)

46 
¡d
::
cout
 << "============================================\n"

47 "==ğCALLBACK:‚ew„©e: " << 
¿‹
 << " =====\n"

48 "============================================" << 
¡d
::
’dl
;

50 
	gdeviû
->
S‘A‰ribu‹
("D©aR©e", 
SŒšgV®ue
(
¿‹
));

55 
Sw™chC®lBack
(
PŒ
<
N‘Deviû
> 
deviû
, cÚ¡ 
¡d
::
¡ršg
 & 
sw™chTime
,

56 cÚ¡ 
¡d
::
¡ršg
 & 
lowR©e
, cÚ¡ std::¡ršg & 
highR©e
, 
boŞ
 
æag
)

59 
	g¡d
::
cout
 << "============================================\n"

60 "==ğCALLBACK:‚ew„©e: " << (
æag
 ? 
lowR©e
 : 
highR©e
) << " =====\n"

61 "============================================" << 
¡d
::
’dl
;

63 
	gdeviû
->
S‘A‰ribu‹
("DataRate",

64 
æag
 ? 
SŒšgV®ue
(
lowR©e
è: SŒšgV®ue(
highR©e
));

65 
	gæag
 = !
æag
;

67 
	gSimuÏtÜ
::
ScheduË
(
Time
(
sw™chTime
), 
Sw™chC®lBack
, 
deviû
, switchTime,

68 
lowR©e
, 
highR©e
, 
æag
);

72 
	$maš
(
¬gc
, *
¬gv
[])

74 
boŞ
 
Œacšg
 = 
çl£
;

75 
ušt32_t
 
maxBy‹s
 = 100;

76 
ušt32_t
 
u£rs
 = 1;

77 
rg‘_dt
 = 35.0;

78 
¡İTime
 = 500.0;

79 
lškHigh
 = 200.0;

80 
lškLow
 = 400.0;

81 
¡d
::
¡ršg
 
lškR©e
 = "1000000";

82 
¡d
::
¡ršg
 
highR©e
 = "2000000";

83 
¡d
::
¡ršg
 
lowR©e
 = "1000000";

84 
¡d
::
¡ršg
 
d–ay
 = "5ms";

85 
¡d
::
¡ršg
 
sw™chTime
 = "0s";

86 
¡d
::
¡ršg
 
sw™chS¹
 = "190s";

87 
¡d
::
¡ršg
 
´ÙocŞ
 = "ns3::DashClient";

88 
¡d
::
¡ršg
 
wšdow
 = "10s";

97 
CommªdLše
 
cmd
;

98 
cmd
.
	`AddV®ue
("Œacšg", "FÏgØ’abË/di§bË¿cšg", 
Œacšg
);

99 
cmd
.
	`AddV®ue
("maxBytes", "Total‚umber of bytes for‡pplicationo send",

100 
maxBy‹s
);

101 
cmd
.
	`AddV®ue
("u£rs", "Thnumb” oàcÚcu¼’ˆvideos", 
u£rs
);

102 
cmd
.
	`AddV®ue
("targetDt",

104 
rg‘_dt
);

105 
cmd
.
	`AddV®ue
("stopTime",

106 "Thtimwh’hş›Á wÈ¡İ„eque¡šg segm’ts", 
¡İTime
);

107 
cmd
.
	`AddV®ue
("linkRate",

109 
lškR©e
);

110 
cmd
.
	`AddV®ue
("delay",

112 
d–ay
);

113 
cmd
.
	`AddV®ue
("switchTime",

115 
sw™chTime
);

116 
cmd
.
	`AddV®ue
("protocol",

118 
´ÙocŞ
);

119 
cmd
.
	`AddV®ue
("window",

120 "Thwšdow fÜ m—suršghav”agthroughpuˆ(Time).", 
wšdow
);

121 
cmd
.
	`P¬£
(
¬gc
, 
¬gv
);

125 
if¡»am
 
	`fe
("3x3_test.csv");

126 
¡ršg
 
¡r
;

127 if(!
fe
è
cout
<<"nØfe"<<
’dl
;

128 
	`g‘lše
(
fe
,
¡r
)){

129 
video_num
.
	`push_back
(
	`¡oi
(
¡r
));

135 
	`NS_LOG_INFO
("Create‚odes.");

136 
NodeCÚš”
 
nodes
;

137 
nodes
.
	`C»©e
(2);

139 
	`NS_LOG_INFO
("Create channels.");

144 
PoštToPoštH–³r
 
poštToPošt
;

145 
poštToPošt
.
	`S‘DeviûA‰ribu‹
("D©aR©e", 
	`SŒšgV®ue
(
lškR©e
));

146 
poštToPošt
.
	`S‘ChªÃlA‰ribu‹
("D–ay", 
	`SŒšgV®ue
(
d–ay
));

148 
N‘DeviûCÚš”
 
deviûs
;

149 
deviûs
 = 
poštToPošt
.
	`In¡®l
(
nodes
);

151 ià(
	`Time
(
sw™chTime
è=ğ
	`SecÚds
(0))

153 
SimuÏtÜ
::
	`ScheduË
(
	`SecÚds
(
lškHigh
), 
C®lBack
, 
deviûs
.
	`G‘
(0),

154 
highR©e
);

155 
SimuÏtÜ
::
	`ScheduË
(
	`SecÚds
(
lškLow
), 
C®lBack
, 
deviûs
.
	`G‘
(0), 
lowR©e
);

156 
SimuÏtÜ
::
	`ScheduË
(
	`SecÚds
(
lškHigh
), 
C®lBack
, 
deviûs
.
	`G‘
(1),

157 
highR©e
);

158 
SimuÏtÜ
::
	`ScheduË
(
	`SecÚds
(
lškLow
), 
C®lBack
, 
deviûs
.
	`G‘
(1), 
lowR©e
);

162 
SimuÏtÜ
::
	`ScheduË
(
	`Time
(
sw™chS¹
), 
Sw™chC®lBack
, 
deviûs
.
	`G‘
(0),

163 
sw™chTime
, 
lowR©e
, 
highR©e
, 
çl£
);

164 
SimuÏtÜ
::
	`ScheduË
(
	`Time
(
sw™chS¹
), 
Sw™chC®lBack
, 
deviûs
.
	`G‘
(1),

165 
sw™chTime
, 
lowR©e
, 
highR©e
, 
çl£
);

170 
IÁ”ÃtSckH–³r
 
š‹º‘
;

171 
š‹º‘
.
	`In¡®l
(
nodes
);

176 
	`NS_LOG_INFO
("Assign IP Addresses.");

177 
Ipv4Add»ssH–³r
 
v4
;

178 
v4
.
	`S‘Ba£
("10.1.1.0", "255.255.255.0");

179 
Ipv4IÁ”çûCÚš”
 
i
 = 
v4
.
	`Assign
(
deviûs
);

181 
	`NS_LOG_INFO
("Create Applications.");

183 
¡d
::
veùÜ
<¡d::
¡ršg
> 
´ÙocŞs
;

184 
¡d
::
¡ršg¡»am
 
	`ss
(
´ÙocŞ
);

185 
¡d
::
¡ršg
 
´Ùo
;

186 
ušt32_t
 
´ÙoNum
 = 0;

187 
¡d
::
	`g‘lše
(
ss
, 
´Ùo
, ','è&& 
´ÙoNum
++ < 
u£rs
)

189 
´ÙocŞs
.
	`push_back
(
´Ùo
);

192 
ušt16_t
 
pÜt
 = 80;

194 
¡d
::
veùÜ
<
DashCl›ÁH–³r
> 
ş›Ás
;

195 
¡d
::
veùÜ
<
AµliÿtiÚCÚš”
> 
ş›ÁAµs
;

197 
ušt32_t
 
u£r
 = 0; u£¸< 
u£rs
; user++)

199 
DashCl›ÁH–³r
 
	`ş›Á
("ns3::TcpSocketFactory",

200 
	`IÃtSock‘Add»ss
(
i
.
	`G‘Add»ss
(1), 
pÜt
), 
´ÙocŞs
[
u£r
 % 
´ÙoNum
]);

202 
ş›Á
.
	`S‘A‰ribu‹
("T¬g‘Dt", 
	`TimeV®ue
(
	`SecÚds
(
rg‘_dt
)));

203 
ş›Á
.
	`S‘A‰ribu‹
("VideoId", 
	`Uš‹g”V®ue
(
u£r
 + 1));

204 
ş›Á
.
	`S‘A‰ribu‹
("wšdow",
	`TimeV®ue
(
	`Time
(
wšdow
)));

206 
AµliÿtiÚCÚš”
 
ş›ÁAµ
 = 
ş›Á
.
	`In¡®l
(
nodes
.
	`G‘
(0));

207 
ş›ÁAµ
.
	`S¹
(
	`SecÚds
(0.25));

210 
ş›Ás
.
	`push_back
(
ş›Á
);

211 
ş›ÁAµs
.
	`push_back
(
ş›ÁAµ
);

215 
DashS”v”H–³r
 
	`£rv”
("ns3::TcpSocketFactory",

216 
	`IÃtSock‘Add»ss
(
Ipv4Add»ss
::
	`G‘Any
(), 
pÜt
));

217 
AµliÿtiÚCÚš”
 
£rv”Aµs
 = 
£rv”
.
	`In¡®l
(
nodes
.
	`G‘
(1));

218 
£rv”Aµs
.
	`S¹
(
	`SecÚds
(0.0));

224 ià(
Œacšg
)

226 
AsciiT¿ûH–³r
 
ascii
;

227 
poštToPošt
.
	`EÇbËAsciiAÎ
(
ascii
.
	`C»©eFeSŒ—m
("dash-send.tr"));

228 
poštToPošt
.
	`EÇbËPÿpAÎ
("dash-£nd", 
çl£
);

234 
	`NS_LOG_INFO
("Run Simulation.");

235 
SimuÏtÜ
::
	`Stİ
(
	`SecÚds
(
¡İTime
));

236 
SimuÏtÜ
::
	`Run
();

237 
SimuÏtÜ
::
	`De¡roy
();

238 
	`NS_LOG_INFO
("Done.");

240 
ušt32_t
 
k
;

241 
k
 = 0; k < 
u£rs
; k++)

243 
PŒ
<
DashCl›Á
> 
­p
 = 
DyÇmicCa¡
<DashCl›Á>(
ş›ÁAµs
[
k
].
	`G‘
(0));

244 
¡d
::
cout
 << 
´ÙocŞs
[
k
 % 
´ÙoNum
] << "-Node: " << k;

245 
­p
->
	`G‘Sts
();

248 
	}
}

	@examples/ttt.cc

17 
	~"ns3/DudpH–³r.h
"

18 
	~"ns3/cÜe-moduË.h
"

19 
	~"ns3/ÃtwÜk-moduË.h
"

20 
	~"ns3/š‹º‘-moduË.h
"

21 
	~"ns3/pošt-to-pošt-moduË.h
"

22 
	~"ns3/­¶iÿtiÚs-moduË.h
"

23 
	~"ns3/dash-moduË.h
"

24 
	~"ns3/udp-moduË.h
"

26 
usšg
 
Çme¥aû
 
	gns3
;

28 
NS_LOG_COMPONENT_DEFINE
 ("FirstScriptExample");

31 
	$maš
 (
¬gc
, *
¬gv
[])

33 
CommªdLše
 
cmd
;

34 
cmd
.
	`P¬£
 (
¬gc
, 
¬gv
);

36 
Time
::
	`S‘ResŞutiÚ
 (Time::
NS
);

37 
	`LogCompÚ’tEÇbË
 ("UdpEchoCl›ÁAµliÿtiÚ", 
LOG_LEVEL_INFO
);

38 
	`LogCompÚ’tEÇbË
 ("UdpEchoS”v”AµliÿtiÚ", 
LOG_LEVEL_INFO
);

40 
NodeCÚš”
 
nodes
;

41 
nodes
.
	`C»©e
 (2);

43 
PoštToPoštH–³r
 
poštToPošt
;

44 
poštToPošt
.
	`S‘DeviûA‰ribu‹
 ("D©aR©e", 
	`SŒšgV®ue
 ("5Mbps"));

45 
poštToPošt
.
	`S‘ChªÃlA‰ribu‹
 ("D–ay", 
	`SŒšgV®ue
 ("2ms"));

47 
N‘DeviûCÚš”
 
deviûs
;

48 
deviûs
 = 
poštToPošt
.
	`In¡®l
 (
nodes
);

50 
IÁ”ÃtSckH–³r
 
¡ack
;

51 
¡ack
.
	`In¡®l
 (
nodes
);

53 
Ipv4Add»ssH–³r
 
add»ss
;

54 
add»ss
.
	`S‘Ba£
 ("10.1.1.0", "255.255.255.0");

56 
Ipv4IÁ”çûCÚš”
 
š‹rçûs
 = 
add»ss
.
	`Assign
 (
deviûs
);

60 
DudpS”v”H–³r
 
	`echoS”v”
 (9);

63 
AµliÿtiÚCÚš”
 
£rv”Aµs
 = 
echoS”v”
.
	`In¡®l
 (
nodes
.
	`G‘
 (1));

64 
£rv”Aµs
.
	`S¹
 (
	`SecÚds
 (1.0));

65 
£rv”Aµs
.
	`Stİ
 (
	`SecÚds
 (10.0));

67 
¡d
::
¡ršg
 
´ÙocŞ
 = "ns3::DashClient";

68 
¡d
::
veùÜ
<¡d::
¡ršg
> 
´ÙocŞs
;

69 
¡d
::
¡ršg¡»am
 
	`ss
(
´ÙocŞ
);

70 
¡d
::
¡ršg
 
´Ùo
;

71 
ušt32_t
 
´ÙoNum
 = 0;

72 
¡d
::
	`g‘lše
(
ss
, 
´Ùo
, ','è&& 
´ÙoNum
++ < 1)

74 
´ÙocŞs
.
	`push_back
(
´Ùo
);

77 
¡d
::
veùÜ
<
DudpCl›ÁH–³r
> 
ş›Ás
;

78 
¡d
::
veùÜ
<
AµliÿtiÚCÚš”
> 
ş›ÁAµs
;

79 
¡d
::
veùÜ
<
DashCl›ÁH–³r
> 
ş›Ás_dash
;

81 
ušt32_t
 
u£r
 = 0; user < 1; user++){

82 
DudpCl›ÁH–³r
 
	`echoCl›Á
 (
š‹rçûs
.
	`G‘Add»ss
 (1), 9);

85 
echoCl›Á
.
	`S‘A‰ribu‹
 ("MaxPack‘s", 
	`Uš‹g”V®ue
 (1));

86 
echoCl›Á
.
	`S‘A‰ribu‹
 ("IÁ”v®", 
	`TimeV®ue
 (
	`SecÚds
 (1.0)));

87 
echoCl›Á
.
	`S‘A‰ribu‹
 ("Pack‘Size", 
	`Uš‹g”V®ue
 (1024));

90 
DashCl›ÁH–³r
 
	`ş›Á
("ns3::TcpSocketFactory",

91 
	`IÃtSock‘Add»ss
(
š‹rçûs
.
	`G‘Add»ss
(1), 9), 
´ÙocŞs
[
u£r
 % 
´ÙoNum
]);

92 
ş›Á
.
	`S‘A‰ribu‹
("VideoId", 
	`Uš‹g”V®ue
(
u£r
 + 1));

93 
AµliÿtiÚCÚš”
 
ş›ÁAµ_dash
 = 
ş›Á
.
	`In¡®l
(
nodes
.
	`G‘
(0));

94 
ş›ÁAµ_dash
.
	`S¹
(
	`SecÚds
(0.25));

95 
ş›Ás_dash
.
	`push_back
(
ş›Á
);

96 
ş›ÁAµs
.
	`push_back
(
ş›ÁAµ_dash
);

99 
AµliÿtiÚCÚš”
 
ş›ÁAµ
 = 
echoCl›Á
.
	`In¡®l
 (
nodes
.
	`G‘
 (0));

100 
ş›ÁAµ
.
	`S¹
 (
	`SecÚds
 (2.0));

101 
ş›ÁAµ
.
	`Stİ
 (
	`SecÚds
 (10.0));

102 
ş›Ás
.
	`push_back
(
echoCl›Á
);

103 
ş›ÁAµs
.
	`push_back
(
ş›ÁAµ
);

108 
SimuÏtÜ
::
	`Run
 ();

109 
SimuÏtÜ
::
	`De¡roy
 ();

111 
	}
}

	@examples/udp_dash.cc

27 
	~<¡ršg
>

28 
	~<f¡»am
>

29 
	~<s¡»am
>

30 
	~"ns3/DudpH–³r.h
"

31 
	~"ns3/udp-moduË.h
"

33 
	~"ns3/cÜe-moduË.h
"

34 
	~"ns3/pošt-to-pošt-moduË.h
"

35 
	~"ns3/š‹º‘-moduË.h
"

36 
	~"ns3/­¶iÿtiÚs-moduË.h
"

37 
	~"ns3/ÃtwÜk-moduË.h
"

38 
	~"ns3/dash-moduË.h
"

39 
	~<s¡»am
>

40 
	~"../mod–/·¿.h
"

41 
usšg
 
Çme¥aû
 
	gns3
;

42 
usšg
 
Çme¥aû
 
	g¡d
;

43 
NS_LOG_COMPONENT_DEFINE
("DashExample");

45 
	#SIZE
 100

	)

46 
	glše
[
SIZE
];

50 
	$BªdwidthT¿û
(){

52 
CÚfig
::
	`S‘
("/NodeLi¡/0/DeviûLi¡/0/$ns3::PoštToPoštN‘Deviû/D©aR©e", 
	`SŒšgV®ue
("5Mbps") );

59 
	}
}

62 
	$maš
(
¬gc
, *
¬gv
[])

64 
boŞ
 
Œacšg
 = 
çl£
;

65 
ušt32_t
 
maxBy‹s
 = 100;

66 
ušt32_t
 
u£rs
 = 1;

67 
rg‘_dt
 = 35.0;

68 
¡İTime
 = 100.0;

69 
¡d
::
¡ršg
 
lškR©e
 = "500Kbps";

70 
¡d
::
¡ršg
 
d–ay
 = "0ms";

71 
¡d
::
¡ršg
 
´ÙocŞ
 = "ns3::DashClient";

72 
¡d
::
¡ršg
 
wšdow
 = "10s";

73 
video_šfo_dœ
="";

74 
´ob_dœ
="";

75 
´ob_ov”®l_dœ
="";

76 
u£r_šfo_fe
="";

77 
ex³rim’t_dœ
="";

78 
te_rows
=0;

79 
te_cŞs
=0;

80 
rho
=0.5;

81 
š™_bufãr
 = 4;

82 
£g_Ëngth
 = 1;

83 
»q_num
 = 2;

84 
¡d
::
¡ršg
 
gt_dœ
="";

85 
¡d
::
¡ršg
 
´ed_dœ
="";

86 
¡d
::
¡ršg
 
size_dœ
="";

88 
mode
="";

89 
¡d
::
¡ršg
 
®go
="";

90 
veùÜ
<veùÜ<>> 
bw
;

91 
bw_¬—
=2;

92 
¡d
::
¡ršg
 
bw_ty³
;

93 
ušt32_t
 
bw_idx
=0;

94 
veùÜ
<> 
u£r_bw
;

96 
¡d
::
¡ršg
 
cur_dœ
="";

97 
¡d
::
¡ršg
 
dr_dœ
="";

104 
CommªdLše
 
cmd
;

105 
cmd
.
	`AddV®ue
("Œacšg", "FÏgØ’abË/di§bË¿cšg", 
Œacšg
);

106 
cmd
.
	`AddV®ue
("maxBytes", "Total‚umber of bytes for‡pplicationo send",

107 
maxBy‹s
);

108 
cmd
.
	`AddV®ue
("u£rs", "Thnumb” oàcÚcu¼’ˆvideos", 
u£rs
);

109 
cmd
.
	`AddV®ue
("targetDt",

111 
rg‘_dt
);

112 
cmd
.
	`AddV®ue
("stopTime",

113 "Thtimwh’hş›Á wÈ¡İ„eque¡šg segm’ts", 
¡İTime
);

114 
cmd
.
	`AddV®ue
("linkRate",

116 
lškR©e
);

117 
cmd
.
	`AddV®ue
("delay",

119 
d–ay
);

120 
cmd
.
	`AddV®ue
("protocol",

122 
´ÙocŞ
);

123 
cmd
.
	`AddV®ue
("window",

124 "Thwšdow fÜ m—suršghav”agthroughpuˆ(Time).", 
wšdow
);

126 
cmd
.
	`AddV®ue
("in_file",

127 "špuˆfe", 
šput_£r›s
);

129 
cmd
.
	`AddV®ue
("seg_length",

130 "Th£gm’ˆËngth.", 
£g_Ëngth
);

132 
cmd
.
	`AddV®ue
("init_buffer",

133 "Thš™ŸÈbufã¸Ëngth (£gm’t).", 
š™_bufãr
);

134 
cmd
.
	`AddV®ue
("video_info_dir",

135 "ThdœeùÜy stÜšghvideØšfÜm©iÚ:ed-£gm’ˆsize, PSNR, SSIM, OPVQ.", 
video_šfo_dœ
);

136 
cmd
.
	`AddV®ue
("user_info",

137 "Thf¡Üšghu£¸šfÜm©iÚ (video_idx, u£r_idx).", 
u£r_šfo_fe
);

138 
cmd
.
	`AddV®ue
("experiment_dir",

139 "ThdœeùÜy stÜšghex³rim’ˆouuts.", 
ex³rim’t_dœ
);

140 
cmd
.
	`AddV®ue
("feature_dir",

141 "ThdœeùÜy stÜšg iÅuˆã©u»s.", 
ã©u»_dœ
);

142 
cmd
.
	`AddV®ue
("tile_rows",

143 "Thnumb” oàrow še.", 
te_rows
);

144 
cmd
.
	`AddV®ue
("tile_cols",

145 "Thnumb” oàcŞumn še.", 
te_cŞs
);

146 
cmd
.
	`AddV®ue
("rho",

147 "Thth»shŞd oàv›wšg…robab™y.", 
rho
);

148 
cmd
.
	`AddV®ue
("pred_dir",

149 "ThdœeùÜy stÜšgh´ediùed¿ûs.", 
´ed_dœ
);

150 
cmd
.
	`AddV®ue
("gt_dir",

151 "ThdœeùÜy stÜšghgroundruth¿ûs.", 
gt_dœ
);

152 
cmd
.
	`AddV®ue
("cur_dir",

153 "ThdœeùÜy stÜšgh´ediùed¿ûs.", 
cur_dœ
);

154 
cmd
.
	`AddV®ue
("dr_dir",

155 "ThdœeùÜy stÜšgh´ediùed¿ûs.", 
dr_dœ
);

156 
cmd
.
	`AddV®ue
("mode",

157 "difã»ÁŸ‹ usšg CUR o¸´ediùiÚ", 
mode
);

158 
cmd
.
	`AddV®ue
("algo",

159 "Thb™¿‹‡ÎoÿtiÚ‡lgÜ™hms: uni, vod,†ive, mm", 
®go
);

160 
cmd
.
	`AddV®ue
("bw_area",

161 "Th¬— cÚsid”ed fÜhbªdwidth", 
bw_¬—
);

162 
cmd
.
	`AddV®ue
("bw_type",

163 "Thfšdiÿtšghbwy³ ®loÿtiÚ fÜƒach u£r", 
bw_ty³
);

164 
cmd
.
	`AddV®ue
("bw_idx",

165 "Thšdex oàbwy³ fe", 
bw_idx
);

166 
cmd
.
	`AddV®ue
("area_dir",

167 "ThdœeùÜy stÜšgh¬— infÜm©iÚ.", 
¬—_dœ
);

168 
cmd
.
	`AddV®ue
("size_dir",

169 "ThdœeùÜy stÜšghvideØsizšfÜm©iÚ.", 
size_dœ
);

170 
cmd
.
	`AddV®ue
("req_num",

171 "ThdœeùÜy stÜšghvideØsizšfÜm©iÚ.", 
»q_num
);

172 
cmd
.
	`P¬£
(
¬gc
, 
¬gv
);

175 
i
=0; i<6; i++){

176 
veùÜ
<> 
tmp_bw
;

177 
j
=0; j<3; j++){

178 
tmp_bw
.
	`push_back
(0);

180 
bw
.
	`push_back
(
tmp_bw
);

182 
bw
[0][0]=46.2;

183 
bw
[0][1]=26.7;

184 
bw
[0][2]=12.6;

185 
bw
[1][0]=11.7;

186 
bw
[1][1]=9.0;

187 
bw
[1][2]=9.1;

188 
bw
[2][0]=43.2;

189 
bw
[2][1]=37.1;

190 
bw
[2][2]=12.7;

191 
bw
[3][0]=37.9;

192 
bw
[3][1]=25.0;

193 
bw
[3][2]=15.9;

194 
bw
[4][0]=32.8;

195 
bw
[4][1]=19.5;

196 
bw
[4][2]=14.2;

197 
bw
[5][0]=39.0;

198 
bw
[5][1]=6.2;

199 
bw
[5][2]=4.6;

202 
¡ršg
 
d–ay_İt
[3]={"3ms","10ms","40ms"};

203 
¡ršg
 
d_d–ay
;

205 
¡d
::
¡ršg
 
tmp_u£r_bw
;

206 
if¡»am
 
	`u£r_bw_fe
(
bw_ty³
);

207 if(!
u£r_bw_fe
)

208 
cout
<<"nØu£r_bw_fe"<<
’dl
;

209 
ušt32_t
 
út
=0;

210 
u£r_bw_fe
>>
tmp_u£r_bw
){

211 
út
=cnt+1;

212 if(
út
>
bw_idx
*
u£rs
 && cnt<=(bw_idx+1)*users){

213 
u£r_bw
.
	`push_back
(
bw
[
bw_¬—
][
	`¡oi
(
tmp_u£r_bw
)]);

214 
d_d–ay
 = 
d–ay_İt
[
	`¡oi
(
tmp_u£r_bw
)];

217 
u£r_bw_fe
.
	`şo£
();

219 
cout
 << "d–ay: " << 
d_d–ay
 <<
’dl
;

222 
t_bw
 =
u£r_bw
[0];

225 
¡d
::
¡ršg
 
video_šfo_šdex
="";

226 
video_šfo_šdex
=
video_šfo_dœ
+"video_index";

227 
if¡»am
 
	`video_šfo_fe
(
video_šfo_šdex
);

228 if(!
video_šfo_fe
)

229 
cout
<<"nØvideØšfØfe"<<
’dl
;

230 
¡d
::
¡ršg
 
tmp_¡r
="";

231 
video_šfo_fe
 >> 
tmp_¡r
){

232 
video_Çmes
.
	`push_back
(
tmp_¡r
);

234 
video_šfo_fe
.
	`şo£
();

235 
¡d
::
¡ršg¡»am
 
tmp_te_cŞ
, 
tmp_te_row
;

236 
tmp_te_cŞ
<<
te_cŞs
;

237 
tmp_te_row
<<
te_rows
;

238 
te_cŞ
=
tmp_te_cŞ
.
	`¡r
();

239 
te_row
=
tmp_te_row
.
	`¡r
();

240 
¡ršg
 
¡r
;

242 
if¡»am
 
	`u£r_šfo_å
(
u£r_šfo_fe
);

243 if(!
u£r_šfo_å
)

244 
cout
<<"nØu£¸šfØfe: "<<
u£r_šfo_fe
<<
’dl
;

245 
¡ršg
 
video_idx
, 
u£r_idx
;

246 
út
=0;

247 
cout
<<"te_row: "<<
te_rows
<<"e_cŞ: "<<
te_cŞs
<<
’dl
;

248 
u£r_šfo_å
 >> 
video_idx
 >> 
u£r_idx
){

249 
veùÜ
<> 
tmp_u£r
;

250 
tmp_u£r
.
	`push_back
(
	`¡oi
(
video_idx
));

251 
tmp_u£r
.
	`push_back
(
	`¡oi
(
u£r_idx
));

252 
tmp_u£r
.
	`push_back
(-1);

254 
tmp_size_fe
[100];

257 
	`¥rštf
(
tmp_size_fe
,"%s%s_u£r%02d_0_1_cur_size",
size_dœ
.
	`c_¡r
(),
video_Çmes
[
tmp_u£r
[0]].c_¡r(),
	`¡oi
(
u£r_idx
));

260 
tmp2_size_fe
[100];

261 
	`¥rštf
(
tmp2_size_fe
,"%s%s_u£r%02d_0_1_udp_size_qp28",
size_dœ
.
	`c_¡r
(),
video_Çmes
[
tmp_u£r
[0]].c_¡r(),
	`¡oi
(
u£r_idx
));

264 
tmp3_size_fe
[100];

265 
	`¥rštf
(
tmp3_size_fe
,"%s%s_u£r%02d_0_1_udp_size_qp32",
size_dœ
.
	`c_¡r
(),
video_Çmes
[
tmp_u£r
[0]].c_¡r(),
	`¡oi
(
u£r_idx
));

268 
tmp4_size_fe
[100];

269 
	`¥rštf
(
tmp4_size_fe
,"%s%s_u£r%02d_0_1_udp_size_qp36",
size_dœ
.
	`c_¡r
(),
video_Çmes
[
tmp_u£r
[0]].c_¡r(),
	`¡oi
(
u£r_idx
));

271 
¡d
::
¡ršg
 
	`size_fe
(
tmp_size_fe
);

272 
if¡»am
 
	`size_å
(
size_fe
);

274 if(!
size_å
)

275 
cout
<<"nØsizfe"<<
size_fe
<<
’dl
;

276 
veùÜ
<> 
tmp_video_size
;

277 
	`g‘lše
(
size_å
,
¡r
)){

278 
i¡ršg¡»am
 
	`sss
(
¡r
);

279 
¡ršg
 
tok’
;

280 
te_size
=0;

281 
	`g‘lše
(
sss
,
tok’
,' ')){

282 
te_size
ñe_size+
	`¡od
(
tok’
);

284 
tmp_video_size
.
	`push_back
(
te_size
);

286 
u£r_£g_size
.
	`push_back
(
tmp_video_size
);

287 
size_å
.
	`şo£
();

291 
¡d
::
¡ršg
 
	`udp_size_fe
(
tmp2_size_fe
);

292 
if¡»am
 
	`udp_size_å
(
udp_size_fe
);

294 if(!
udp_size_å
)

295 
cout
<<"nØsizfe"<<
udp_size_fe
<<
’dl
;

296 
veùÜ
<> 
tmp2_video_size
;

297 
	`g‘lše
(
udp_size_å
,
¡r
)){

298 
i¡ršg¡»am
 
	`sss
(
¡r
);

299 
¡ršg
 
tok’
;

300 
te_size
=0;

301 
	`g‘lše
(
sss
,
tok’
,' ')){

302 
te_size
ñe_size+
	`¡od
(
tok’
);

304 
tmp2_video_size
.
	`push_back
(
te_size
);

306 
udp_£g_size
.
	`push_back
(
tmp2_video_size
);

307 
udp_size_å
.
	`şo£
();

311 
¡d
::
¡ršg
 
	`udp_size2_fe
(
tmp3_size_fe
);

312 
if¡»am
 
	`udp_size2_å
(
udp_size2_fe
);

314 if(!
udp_size2_å
)

315 
cout
<<"nØsizfe"<<
udp_size2_fe
<<
’dl
;

316 
veùÜ
<> 
tmp3_video_size
;

317 
	`g‘lše
(
udp_size2_å
,
¡r
)){

318 
i¡ršg¡»am
 
	`sss
(
¡r
);

319 
¡ršg
 
tok’
;

320 
te_size
=0;

321 
	`g‘lše
(
sss
,
tok’
,' ')){

322 
te_size
ñe_size+
	`¡od
(
tok’
);

324 
tmp3_video_size
.
	`push_back
(
te_size
);

327 
udp_£g_size2
.
	`push_back
(
tmp3_video_size
);

329 
udp_size2_å
.
	`şo£
();

332 
¡d
::
¡ršg
 
	`udp_size3_fe
(
tmp4_size_fe
);

333 
if¡»am
 
	`udp_size3_å
(
udp_size3_fe
);

334 if(!
udp_size3_å
)

335 
cout
<<"nØsizfe"<<
udp_size3_fe
<<
’dl
;

336 
veùÜ
<> 
tmp4_video_size
;

337 
	`g‘lše
(
udp_size3_å
,
¡r
)){

338 
i¡ršg¡»am
 
	`sss
(
¡r
);

339 
¡ršg
 
tok’
;

340 
te_size
=0;

341 
	`g‘lše
(
sss
,
tok’
,' ')){

342 
te_size
ñe_size+
	`¡od
(
tok’
);

344 
tmp4_video_size
.
	`push_back
(
te_size
);

346 
udp_£g_size3
.
	`push_back
(
tmp4_video_size
);

347 
udp_size3_å
.
	`şo£
();

353 
út
=cnt+1;

355 
u£r_šfo_å
.
	`şo£
();

356 
te_num
=()(
te_cŞs
*
te_rows
);

357 
ušt32_t
 
£g_num
=()(60.0/()
£g_Ëngth
);

358 
ušt32_t
 
k
=0; k<
u£rs
; k++){

359 
veùÜ
<veùÜ<>> 
tmp_£g
;

360 
ušt32_t
 
m
=0; m<
£g_num
; m++){

361 
veùÜ
<> 
tmp_te
;

362 
v
=0; v<
te_num
; v++){

363 
tmp_te
.
	`push_back
(0);

365 
tmp_£g
.
	`push_back
(
tmp_te
);

367 
´obs
.
	`push_back
(
tmp_£g
);

370 
ušt32_t
 
k
=0; k<
u£rs
; k++){

371 
veùÜ
<> 
tmp_v£g
;

372 
ušt32_t
 
m
=0; m<
£g_num
; m++){

373 
tmp_v£g
.
	`push_back
(0);

375 
video_£r›s
.
	`push_back
(
tmp_v£g
);

376 
udp_£r›s
.
	`push_back
(
tmp_v£g
);

378 
ušt32_t
 
k
=0; k<
u£rs
; k++){

379 
veùÜ
<> 
tmp_br_£g
;

380 
veùÜ
<> 
tmp_di¡_£g
;

381 
ušt32_t
 
m
=0; m<
£g_num
; m++){

382 
tmp_br_£g
.
	`push_back
(0);

384 
brs
.
	`push_back
(
tmp_br_£g
);

391 
	`NS_LOG_INFO
("Create‚odes.");

392 
NodeCÚš”
 
nodes
;

395 
nodes
.
	`C»©e
 (
u£rs
+1);

398 
	`NS_LOG_INFO
("Create channels.");

400 
veùÜ
<
NodeCÚš”
> 
u£r_node
;

401 
ušt32_t
 
u£r
 = 0; u£¸< 
u£rs
; user++){

402 
NodeCÚš”
 
x
 = 
	`NodeCÚš”
 (
nodes
.
	`G‘
 (
u£r
),‚odes.G‘ (
u£rs
));

403 
u£r_node
.
	`push_back
(
x
);

413 
IÁ”ÃtSckH–³r
 
š‹º‘
;

414 
š‹º‘
.
	`In¡®l
(
nodes
);

416 
veùÜ
<
N‘DeviûCÚš”
> 
u£r_deviû
;

417 
¡ršg
 
¿‹
[15]= {"18.2Mbps","18.2Mbps","18.2Mbps","18.2Mbps","20Mbps","20Mbps","20Mbps","20Mbps","20Mbps","40Mbps","40Mbps","40Mbps","40Mbps","40Mbps","40Mbps"};

418 
veùÜ
<
¡ršg
> 
u£r_bwr
;

420 
ušt32_t
 
i
=0; i<
u£r_bw
.
	`size
(); i++){

422 
o¡ršg¡»am
 
ss
;

423 
ss
 << 
u£r_bw
[
i
];

424 
¡ršg
 
tmp
 = 
ss
.
	`¡r
();

425 
tmp
 =mp+"Mbps";

427 
u£r_bwr
.
	`push_back
(
tmp
);

428 
cout
<<"Bªd: "<<
tmp
<<
’dl
;

432 
ušt32_t
 
u£r
 = 0; u£¸< 
u£rs
; user++){

433 
PoštToPoštH–³r
 
p2p
;

434 
p2p
.
	`S‘DeviûA‰ribu‹
 ("D©aR©e", 
	`SŒšgV®ue
 (
u£r_bwr
[
u£r
]));

435 
p2p
.
	`S‘ChªÃlA‰ribu‹
 ("D–ay", 
	`SŒšgV®ue
 (
d_d–ay
));

436 
N‘DeviûCÚš”
 
x
 = 
p2p
.
	`In¡®l
 (
u£r_node
[
u£r
]);

437 
u£r_deviû
.
	`push_back
(
x
);

489 
	`NS_LOG_INFO
 ("Assign IP Addresses.");

490 
Ipv4Add»ssH–³r
 
v4
;

491 
veùÜ
<
Ipv4IÁ”çûCÚš”
> 
u£r_v4
;

492 
ušt32_t
 
u£r
 = 0; u£¸< 
u£rs
; user++){

493 
¡ršg
 
tmp1
 = "10.1.";

494 
¡ršg¡»am
 
ss
;

495 
ss
 << 
u£r
;

496 
¡ršg
 
¡r
 = 
ss
.
	`¡r
();

497 
¡ršg
 
s
 = 
tmp1
+
¡r
+".0";

498 
v4
.
	`S‘Ba£
 (
s
.
	`c_¡r
(), "255.255.255.0");

499 
Ipv4IÁ”çûCÚš”
 
x
 = 
v4
.
	`Assign
 (
u£r_deviû
[
u£r
]);

500 
u£r_v4
.
	`push_back
(
x
);

519 
	`NS_LOG_INFO
("Create Applications.");

521 
Ipv4Glob®RoutšgH–³r
::
	`PİuÏ‹RoutšgTabËs
 ();

527 
¡d
::
veùÜ
<¡d::
¡ršg
> 
´ÙocŞs
;

528 
¡d
::
¡ršg¡»am
 
	`ss
(
´ÙocŞ
);

529 
¡d
::
¡ršg
 
´Ùo
;

530 
ušt32_t
 
´ÙoNum
 = 0;

531 
¡d
::
	`g‘lše
(
ss
, 
´Ùo
, ','è&& 
´ÙoNum
++ < 
u£rs
)

533 
´ÙocŞs
.
	`push_back
(
´Ùo
);

536 
ušt16_t
 
pÜt
 = 80;

537 
¡d
::
veùÜ
<
DashCl›ÁH–³r
> 
ş›Ás
;

538 
¡d
::
veùÜ
<
AµliÿtiÚCÚš”
> 
ş›ÁAµs
;

539 
¡d
::
veùÜ
<
DudpCl›ÁH–³r
> 
ş›Á_udp
;

540 
ušt32_t
 
u£r
 = 0; u£¸< 
u£rs
; user++)

543 
DashCl›ÁH–³r
 
	`ş›Á
("ns3::TcpSocketFactory",

544 
	`IÃtSock‘Add»ss
(
u£r_v4
[
u£r
].
	`G‘Add»ss
(1), 
pÜt
), 
´ÙocŞs
[u£¸% 
´ÙoNum
]);

545 
ş›Á
.
	`S‘A‰ribu‹
("VideoId", 
	`Uš‹g”V®ue
(
u£r
 + 1));

546 
AµliÿtiÚCÚš”
 
ş›ÁAµ
 = 
ş›Á
.
	`In¡®l
(
nodes
.
	`G‘
(
u£r
));

547 
ş›ÁAµ
.
	`S¹
(
	`SecÚds
(0.25));

549 
ş›Ás
.
	`push_back
(
ş›Á
);

550 
ş›ÁAµs
.
	`push_back
(
ş›ÁAµ
);

552 
DudpCl›ÁH–³r
 
	`echoCl›Á
 (
u£r_v4
[
u£r
].
	`G‘Add»ss
(1), 9);

553 
echoCl›Á
.
	`S‘A‰ribu‹
 ("MaxPack‘s", 
	`Uš‹g”V®ue
 (30));

554 
echoCl›Á
.
	`S‘A‰ribu‹
 ("IÁ”v®", 
	`TimeV®ue
 (
	`SecÚds
 (1.0)));

555 
echoCl›Á
.
	`S‘A‰ribu‹
 ("Pack‘Size", 
	`Uš‹g”V®ue
 (100));

556 
echoCl›Á
.
	`S‘A‰ribu‹
 ("VideoId", 
	`Uš‹g”V®ue
 (
u£r
+1));

557 
AµliÿtiÚCÚš”
 
ş›ÁAµ_udp
 = 
echoCl›Á
.
	`In¡®l
 (
nodes
.
	`G‘
 (
u£r
));

558 
ş›ÁAµ_udp
.
	`S¹
 (
	`SecÚds
 (0.25));

560 
ş›Á_udp
.
	`push_back
(
echoCl›Á
);

561 
ş›ÁAµs
.
	`push_back
(
ş›ÁAµ_udp
);

565 
DashS”v”H–³r
 
	`£rv”
("ns3::TcpSocketFactory",

566 
	`IÃtSock‘Add»ss
(
Ipv4Add»ss
::
	`G‘Any
(), 
pÜt
));

567 
AµliÿtiÚCÚš”
 
£rv”Aµs
 = 
£rv”
.
	`In¡®l
(
nodes
.
	`G‘
(
u£rs
));

568 
£rv”Aµs
.
	`S¹
(
	`SecÚds
(0.0));

571 
DudpS”v”H–³r
 
	`echoS”v”
 (9);

572 
AµliÿtiÚCÚš”
 
£rv”Aµs_udp
 = 
echoS”v”
.
	`In¡®l
 (
nodes
.
	`G‘
 (
u£rs
));

573 
£rv”Aµs_udp
.
	`S¹
 (
	`SecÚds
 (0.0));

594 
	`NS_LOG_INFO
("Run Simulation.");

596 
SimuÏtÜ
::
	`Run
();

599 
SimuÏtÜ
::
	`De¡roy
();

600 
	`NS_LOG_INFO
("Done.");

613 
	}
}

	@helper/DudpHelper.cc

20 
	~"DudpH–³r.h
"

23 
	~"ns3/DudpCl›Á.h
"

24 
	~"ns3/DudpS”v”.h
"

25 
	~"ns3/uš‹g”.h
"

26 
	~"ns3/Çmes.h
"

28 
Çme¥aû
 
	gns3
 {

30 
	gDudpS”v”H–³r
::
DudpS”v”H–³r
 (
ušt16_t
 
pÜt
)

32 
m_çùÜy
.
S‘Ty³Id
 (
DudpS”v”
::
G‘Ty³Id
 ());

33 
S‘A‰ribu‹
 ("PÜt", 
Uš‹g”V®ue
 (
pÜt
));

37 
	gDudpS”v”H–³r
::
S‘A‰ribu‹
 (

38 
¡d
::
¡ršg
 
Çme
,

39 cÚ¡ 
A‰ribu‹V®ue
 &
v®ue
)

41 
	gm_çùÜy
.
S‘
 (
Çme
, 
v®ue
);

44 
AµliÿtiÚCÚš”


45 
	gDudpS”v”H–³r
::
In¡®l
 (
PŒ
<
Node
> 
node
) const

47  
AµliÿtiÚCÚš”
 (
In¡®lPriv
 (
node
));

50 
AµliÿtiÚCÚš”


51 
	gDudpS”v”H–³r
::
In¡®l
 (
¡d
::
¡ršg
 
nodeName
) const

53 
PŒ
<
Node
> 
node
 = 
Names
::
Fšd
<Node> (
nodeName
);

54  
AµliÿtiÚCÚš”
 (
In¡®lPriv
 (
node
));

57 
AµliÿtiÚCÚš”


58 
	gDudpS”v”H–³r
::
In¡®l
 (
NodeCÚš”
 
c
) const

60 
AµliÿtiÚCÚš”
 
­ps
;

61 
	gNodeCÚš”
::
I‹¿tÜ
 
i
 = 
c
.
Begš
 (); 
	gi
 !ğc.
End
 (); ++i)

63 
	g­ps
.
Add
 (
In¡®lPriv
 (*
i
));

66  
	g­ps
;

69 
	gPŒ
<
	gAµliÿtiÚ
>

70 
	gDudpS”v”H–³r
::
In¡®lPriv
 (
PŒ
<
Node
> 
node
) const

72 
PŒ
<
AµliÿtiÚ
> 
­p
 = 
m_çùÜy
.
C»©e
<
DudpS”v”
> ();

73 
	gnode
->
AddAµliÿtiÚ
 (
­p
);

75  
	g­p
;

78 
	gDudpCl›ÁH–³r
::
DudpCl›ÁH–³r
 (
Add»ss
 
add»ss
, 
ušt16_t
 
pÜt
)

80 
	gm_çùÜy
.
S‘Ty³Id
 (
DudpCl›Á
::
G‘Ty³Id
 ());

81 
S‘A‰ribu‹
 ("RemÙeAdd»ss", 
Add»ssV®ue
 (
add»ss
));

82 
S‘A‰ribu‹
 ("RemÙePÜt", 
Uš‹g”V®ue
 (
pÜt
));

85 
	gDudpCl›ÁH–³r
::
DudpCl›ÁH–³r
 (
Add»ss
 
add»ss
)

87 
m_çùÜy
.
S‘Ty³Id
 (
DudpCl›Á
::
G‘Ty³Id
 ());

88 
S‘A‰ribu‹
 ("RemÙeAdd»ss", 
Add»ssV®ue
 (
add»ss
));

92 
	gDudpCl›ÁH–³r
::
S‘A‰ribu‹
 (

93 
¡d
::
¡ršg
 
Çme
,

94 cÚ¡ 
A‰ribu‹V®ue
 &
v®ue
)

96 
	gm_çùÜy
.
S‘
 (
Çme
, 
v®ue
);

100 
	gDudpCl›ÁH–³r
::
S‘Fl
 (
PŒ
<
AµliÿtiÚ
> 
­p
, 
¡d
::
¡ršg
 
fl
)

102 
­p
->
G‘Objeù
<
DudpCl›Á
>()->
S‘Fl
 (
fl
);

106 
	gDudpCl›ÁH–³r
::
S‘Fl
 (
PŒ
<
AµliÿtiÚ
> 
­p
, 
ušt8_t
 
fl
, 
ušt32_t
 
d©aL’gth
)

108 
	g­p
->
	gG‘Objeù
<
	gDudpCl›Á
>()->
S‘Fl
 (
fl
, 
d©aL’gth
);

112 
	gDudpCl›ÁH–³r
::
S‘Fl
 (
PŒ
<
AµliÿtiÚ
> 
­p
, 
ušt8_t
 *
fl
, 
ušt32_t
 
flL’gth
, ušt32_ˆ
d©aL’gth
)

114 
	g­p
->
	gG‘Objeù
<
	gDudpCl›Á
>()->
S‘Fl
 (
fl
, 
flL’gth
, 
d©aL’gth
);

117 
AµliÿtiÚCÚš”


118 
	gDudpCl›ÁH–³r
::
In¡®l
 (
PŒ
<
Node
> 
node
) const

120  
AµliÿtiÚCÚš”
 (
In¡®lPriv
 (
node
));

123 
AµliÿtiÚCÚš”


124 
	gDudpCl›ÁH–³r
::
In¡®l
 (
¡d
::
¡ršg
 
nodeName
) const

126 
PŒ
<
Node
> 
node
 = 
Names
::
Fšd
<Node> (
nodeName
);

127  
AµliÿtiÚCÚš”
 (
In¡®lPriv
 (
node
));

130 
AµliÿtiÚCÚš”


131 
	gDudpCl›ÁH–³r
::
In¡®l
 (
NodeCÚš”
 
c
) const

133 
AµliÿtiÚCÚš”
 
­ps
;

134 
	gNodeCÚš”
::
I‹¿tÜ
 
i
 = 
c
.
Begš
 (); 
	gi
 !ğc.
End
 (); ++i)

136 
	g­ps
.
Add
 (
In¡®lPriv
 (*
i
));

139  
	g­ps
;

142 
	gPŒ
<
	gAµliÿtiÚ
>

143 
	gDudpCl›ÁH–³r
::
In¡®lPriv
 (
PŒ
<
Node
> 
node
) const

145 
PŒ
<
AµliÿtiÚ
> 
­p
 = 
m_çùÜy
.
C»©e
<
DudpCl›Á
> ();

146 
	gnode
->
AddAµliÿtiÚ
 (
­p
);

148  
	g­p
;

	@helper/DudpHelper.h

20 #iâdeà
UDP_ECHO_HELPER_H


21 
	#UDP_ECHO_HELPER_H


	)

23 
	~<¡dšt.h
>

24 
	~"ns3/­¶iÿtiÚ-cÚš”.h
"

25 
	~"ns3/node-cÚš”.h
"

26 
	~"ns3/objeù-çùÜy.h
"

27 
	~"ns3/v4-add»ss.h
"

28 
	~"ns3/v6-add»ss.h
"

30 
Çme¥aû
 
	gns3
 {

37 şas 
	cDudpS”v”H–³r


39 
	gpublic
:

46 
DudpS”v”H–³r
 (
ušt16_t
 
pÜt
);

54 
S‘A‰ribu‹
 (
¡d
::
¡ršg
 
Çme
, cÚ¡ 
A‰ribu‹V®ue
 &
v®ue
);

64 
AµliÿtiÚCÚš”
 
In¡®l
 (
PŒ
<
Node
> 
node
) const;

75 
AµliÿtiÚCÚš”
 
In¡®l
 (
¡d
::
¡ršg
 
nodeName
) const;

87 
AµliÿtiÚCÚš”
 
In¡®l
 (
NodeCÚš”
 
c
) const;

89 
	g´iv©e
:

97 
PŒ
<
AµliÿtiÚ
> 
In¡®lPriv
 (PŒ<
Node
> 
node
) const;

99 
ObjeùFaùÜy
 
	gm_çùÜy
;

106 şas 
	cDudpCl›ÁH–³r


108 
	gpublic
:

117 
DudpCl›ÁH–³r
 (
Add»ss
 

, 
ušt16_t
 
pÜt
);

125 
DudpCl›ÁH–³r
 (
Add»ss
 
addr
);

133 
S‘A‰ribu‹
 (
¡d
::
¡ršg
 
Çme
, cÚ¡ 
A‰ribu‹V®ue
 &
v®ue
);

147 
S‘Fl
 (
PŒ
<
AµliÿtiÚ
> 
­p
, 
¡d
::
¡ršg
 
fl
);

164 
S‘Fl
 (
PŒ
<
AµliÿtiÚ
> 
­p
, 
ušt8_t
 
fl
, 
ušt32_t
 
d©aL’gth
);

184 
S‘Fl
 (
PŒ
<
AµliÿtiÚ
> 
­p
, 
ušt8_t
 *
fl
, 
ušt32_t
 
flL’gth
, ušt32_ˆ
d©aL’gth
);

195 
AµliÿtiÚCÚš”
 
In¡®l
 (
PŒ
<
Node
> 
node
) const;

207 
AµliÿtiÚCÚš”
 
In¡®l
 (
¡d
::
¡ršg
 
nodeName
) const;

216 
AµliÿtiÚCÚš”
 
In¡®l
 (
NodeCÚš”
 
c
) const;

218 
	g´iv©e
:

226 
PŒ
<
AµliÿtiÚ
> 
In¡®lPriv
 (PŒ<
Node
> 
node
) const;

227 
ObjeùFaùÜy
 
	gm_çùÜy
;

	@helper/dash-client-helper.cc

23 
	~"dash-ş›Á-h–³r.h
"

24 
	~"ns3/š‘-sock‘-add»ss.h
"

25 
	~"ns3/·ck‘-sock‘-add»ss.h
"

26 
	~"ns3/¡ršg.h
"

27 
	~"ns3/Çmes.h
"

29 
Çme¥aû
 
	gns3
 {

31 
	gDashCl›ÁH–³r
::
DashCl›ÁH–³r
 (
¡d
::
¡ršg
 
tıPrÙocŞ
, 
Add»ss
 
add»ss
)

33 
	gm_çùÜy
.
S‘Ty³Id
 ("ns3::DashClient");

34 
	gm_çùÜy
.
S‘
 ("PrÙocŞ", 
SŒšgV®ue
 (
tıPrÙocŞ
));

35 
	gm_çùÜy
.
S‘
 ("RemÙe", 
Add»ssV®ue
 (
add»ss
));

38 
	gDashCl›ÁH–³r
::
DashCl›ÁH–³r
 (
¡d
::
¡ršg
 
tıPrÙocŞ
, 
Add»ss
 
add»ss
, std::¡ršg 
®gÜ™hm
)

40 
m_çùÜy
.
S‘Ty³Id
 (
®gÜ™hm
);

41 
	gm_çùÜy
.
S‘
 ("PrÙocŞ", 
SŒšgV®ue
 (
tıPrÙocŞ
));

42 
	gm_çùÜy
.
S‘
 ("RemÙe", 
Add»ssV®ue
 (
add»ss
));

45 
	gDashCl›ÁH–³r
::
S‘A‰ribu‹
 (
¡d
::
¡ršg
 
Çme
, cÚ¡ 
A‰ribu‹V®ue
 &
v®ue
)

47 
	gm_çùÜy
.
S‘
 (
Çme
, 
v®ue
);

50 
AµliÿtiÚCÚš”


51 
	gDashCl›ÁH–³r
::
In¡®l
 (
PŒ
<
Node
> 
node
) const

53  
AµliÿtiÚCÚš”
 (
In¡®lPriv
 (
node
));

56 
AµliÿtiÚCÚš”


57 
	gDashCl›ÁH–³r
::
In¡®l
 (
¡d
::
¡ršg
 
nodeName
) const

59 
PŒ
<
Node
> 
node
 = 
Names
::
Fšd
<Node> (
nodeName
);

60  
AµliÿtiÚCÚš”
 (
In¡®lPriv
 (
node
));

63 
AµliÿtiÚCÚš”


64 
	gDashCl›ÁH–³r
::
In¡®l
 (
NodeCÚš”
 
c
) const

66 
AµliÿtiÚCÚš”
 
­ps
;

67 
	gNodeCÚš”
::
I‹¿tÜ
 
i
 = 
c
.
Begš
 (); 
	gi
 !ğc.
End
 (); ++i)

69 
	g­ps
.
Add
 (
In¡®lPriv
 (*
i
));

72  
	g­ps
;

75 
	gPŒ
<
	gAµliÿtiÚ
>

76 
	gDashCl›ÁH–³r
::
In¡®lPriv
 (
PŒ
<
Node
> 
node
) const

78 
PŒ
<
AµliÿtiÚ
> 
­p
 = 
m_çùÜy
.
C»©e
<Application> ();

79 
	gnode
->
AddAµliÿtiÚ
 (
­p
);

81  
	g­p
;

	@helper/dash-client-helper.h

23 #iâdeà
DASH_CLIENT_HELPER_H


24 
	#DASH_CLIENT_HELPER_H


	)

26 
	~<¡dšt.h
>

27 
	~<¡ršg
>

28 
	~"ns3/objeù-çùÜy.h
"

29 
	~"ns3/add»ss.h
"

30 
	~"ns3/©Œibu‹.h
"

31 
	~"ns3/Ãt-deviû.h
"

32 
	~"ns3/node-cÚš”.h
"

33 
	~"ns3/­¶iÿtiÚ-cÚš”.h
"

35 
Çme¥aû
 
	gns3
 {

41 şas 
	cDashCl›ÁH–³r


43 
	gpublic
:

54 
DashCl›ÁH–³r
 (
¡d
::
¡ršg
 
tıPrÙocŞ
, 
Add»ss
 
add»ss
);

69 
DashCl›ÁH–³r
 (
¡d
::
¡ršg
 
tıPrÙocŞ
, 
Add»ss
 
add»ss
, std::¡ršg 
®gÜ™hm
);

78 
S‘A‰ribu‹
 (
¡d
::
¡ršg
 
Çme
, cÚ¡ 
A‰ribu‹V®ue
 &
v®ue
);

88 
AµliÿtiÚCÚš”
 
In¡®l
 (
NodeCÚš”
 
c
) const;

97 
AµliÿtiÚCÚš”
 
In¡®l
 (
PŒ
<
Node
> 
node
) const;

106 
AµliÿtiÚCÚš”
 
In¡®l
 (
¡d
::
¡ršg
 
nodeName
) const;

108 
	g´iv©e
:

117 
PŒ
<
AµliÿtiÚ
> 
In¡®lPriv
 (PŒ<
Node
> 
node
) const;

118 
	g¡d
::
¡ršg
 
m_´ÙocŞ
;

119 
Add»ss
 
	gm_»mÙe
;

120 
ObjeùFaùÜy
 
	gm_çùÜy
;

	@helper/dash-server-helper.cc

23 
	~"dash-£rv”-h–³r.h
"

24 
	~"ns3/¡ršg.h
"

25 
	~"ns3/š‘-sock‘-add»ss.h
"

26 
	~"ns3/Çmes.h
"

28 
Çme¥aû
 
	gns3
 {

30 
	gDashS”v”H–³r
::
DashS”v”H–³r
 (
¡d
::
¡ršg
 
´ÙocŞ
, 
Add»ss
 
add»ss
)

32 
	gm_çùÜy
.
S‘Ty³Id
 ("ns3::DashServer");

33 
	gm_çùÜy
.
S‘
 ("PrÙocŞ", 
SŒšgV®ue
 (
´ÙocŞ
));

34 
	gm_çùÜy
.
S‘
 ("Loÿl", 
Add»ssV®ue
 (
add»ss
));

38 
	gDashS”v”H–³r
::
S‘A‰ribu‹
 (
¡d
::
¡ršg
 
Çme
, cÚ¡ 
A‰ribu‹V®ue
 &
v®ue
)

40 
	gm_çùÜy
.
S‘
 (
Çme
, 
v®ue
);

43 
AµliÿtiÚCÚš”


44 
	gDashS”v”H–³r
::
In¡®l
 (
PŒ
<
Node
> 
node
) const

46  
AµliÿtiÚCÚš”
 (
In¡®lPriv
 (
node
));

49 
AµliÿtiÚCÚš”


50 
	gDashS”v”H–³r
::
In¡®l
 (
¡d
::
¡ršg
 
nodeName
) const

52 
PŒ
<
Node
> 
node
 = 
Names
::
Fšd
<Node> (
nodeName
);

53  
AµliÿtiÚCÚš”
 (
In¡®lPriv
 (
node
));

56 
AµliÿtiÚCÚš”


57 
	gDashS”v”H–³r
::
In¡®l
 (
NodeCÚš”
 
c
) const

59 
AµliÿtiÚCÚš”
 
­ps
;

60 
	gNodeCÚš”
::
I‹¿tÜ
 
i
 = 
c
.
Begš
 (); 
	gi
 !ğc.
End
 (); ++i)

62 
	g­ps
.
Add
 (
In¡®lPriv
 (*
i
));

65  
	g­ps
;

68 
	gPŒ
<
	gAµliÿtiÚ
>

69 
	gDashS”v”H–³r
::
In¡®lPriv
 (
PŒ
<
Node
> 
node
) const

71 
PŒ
<
AµliÿtiÚ
> 
­p
 = 
m_çùÜy
.
C»©e
<Application> ();

72 
	gnode
->
AddAµliÿtiÚ
 (
­p
);

74  
	g­p
;

	@helper/dash-server-helper.h

22 #iâdeà
DASH_SERVER_HELPER_H


23 
	#DASH_SERVER_HELPER_H


	)

25 
	~"ns3/objeù-çùÜy.h
"

26 
	~"ns3/v4-add»ss.h
"

27 
	~"ns3/node-cÚš”.h
"

28 
	~"ns3/­¶iÿtiÚ-cÚš”.h
"

30 
Çme¥aû
 
	gns3
 {

36 şas 
	cDashS”v”H–³r


38 
	gpublic
:

49 
DashS”v”H–³r
 (
¡d
::
¡ršg
 
´ÙocŞ
, 
Add»ss
 
add»ss
);

57 
S‘A‰ribu‹
 (
¡d
::
¡ršg
 
Çme
, cÚ¡ 
A‰ribu‹V®ue
 &
v®ue
);

66 
AµliÿtiÚCÚš”
 
In¡®l
 (
NodeCÚš”
 
c
) const;

74 
AµliÿtiÚCÚš”
 
In¡®l
 (
PŒ
<
Node
> 
node
) const;

82 
AµliÿtiÚCÚš”
 
In¡®l
 (
¡d
::
¡ršg
 
nodeName
) const;

84 
	g´iv©e
:

88 
PŒ
<
AµliÿtiÚ
> 
In¡®lPriv
 (PŒ<
Node
> 
node
) const;

89 
ObjeùFaùÜy
 
	gm_çùÜy
;

	@model/DudpClient.cc

18 
	~"ns3/log.h
"

19 
	~"ns3/v4-add»ss.h
"

20 
	~"ns3/v6-add»ss.h
"

21 
	~"ns3/n¡ime.h
"

22 
	~"ns3/š‘-sock‘-add»ss.h
"

23 
	~"ns3/š‘6-sock‘-add»ss.h
"

24 
	~"ns3/sock‘.h
"

25 
	~"ns3/simuÏtÜ.h
"

26 
	~"ns3/sock‘-çùÜy.h
"

27 
	~"ns3/·ck‘.h
"

28 
	~"ns3/uš‹g”.h
"

29 
	~"ns3/Œaû-sourû-acûssÜ.h
"

30 
	~"DudpCl›Á.h
"

31 
	~"h‰p-h—d”.h
"

32 
	~"·¿.h
"

33 
	~"m³g-¶ay”.h
"

34 
usšg
 
Çme¥aû
 
	g¡d
;

37 
	gveùÜ
<veùÜ<>> 
	gudp_£g_size
;

38 
	gveùÜ
<veùÜ<>> 
	gudp_£g_size2
;

39 
	gveùÜ
<veùÜ<>> 
	gudp_£g_size3
;

41 
	gveùÜ
<veùÜ<>> 
	gudp_£r›s
;

42 
boŞ
 
	gT_¶ay
=
çl£
;

43 
boŞ
 
	gT_¡¬t
=
çl£
;

44 
	gt_bw
;

45 
	gp_num
=0;

46 
	gp_š‹r
;

47 
	gcouÁ_·ck‘
;

48 
boŞ
 
	gloss_m¬k
=
çl£
;

51 
	gnow_£g
=-1;

52 
	gp_£g
;

60 
Çme¥aû
 
	gns3
 {

62 
NS_LOG_COMPONENT_DEFINE
 ("DudpClientApplication");

64 
NS_OBJECT_ENSURE_REGISTERED
 (
DudpCl›Á
);

66 
Ty³Id


67 
	gDudpCl›Á
::
G‘Ty³Id
 ()

69 
Ty³Id
 
tid
 = TypeId ("ns3::DudpClient")

70 .
S‘P¬’t
<
AµliÿtiÚ
> ()

71 .
S‘GroupName
("Applications")

72 .
AddCÚ¡ruùÜ
<
DudpCl›Á
> ()

73 .
AddA‰ribu‹
 ("MaxPackets",

75 
Uš‹g”V®ue
 (100),

76 
MakeUš‹g”AcûssÜ
 (&
DudpCl›Á
::
m_couÁ
),

77 
MakeUš‹g”Check”
<
ušt32_t
> ())

78 .
AddA‰ribu‹
 ("VideoId",

80 
Uš‹g”V®ue
 (0),

81 
MakeUš‹g”AcûssÜ
 (&
DudpCl›Á
::
m_videoId
),

82 
MakeUš‹g”Check”
<
ušt32_t
> (1))

83 .
AddA‰ribu‹
 ("Interval",

85 
TimeV®ue
 (
SecÚds
 (1.0)),

86 
MakeTimeAcûssÜ
 (&
DudpCl›Á
::
m_š‹rv®
),

87 
MakeTimeCheck”
 ())

88 .
AddA‰ribu‹
 ("RemoteAddress",

90 
Add»ssV®ue
 (),

91 
MakeAdd»ssAcûssÜ
 (&
DudpCl›Á
::
m_³”Add»ss
),

92 
MakeAdd»ssCheck”
 ())

93 .
AddA‰ribu‹
 ("RemotePort",

95 
Uš‹g”V®ue
 (0),

96 
MakeUš‹g”AcûssÜ
 (&
DudpCl›Á
::
m_³”PÜt
),

97 
MakeUš‹g”Check”
<
ušt16_t
> ())

98 .
AddA‰ribu‹
 ("PacketSize", "Size ofƒcho data in outbound…ackets",

99 
Uš‹g”V®ue
 (100),

100 
MakeUš‹g”AcûssÜ
 (&
DudpCl›Á
::
S‘D©aSize
,

101 &
DudpCl›Á
::
G‘D©aSize
),

102 
MakeUš‹g”Check”
<
ušt32_t
> ())

103 .
AddT¿ûSourû
 ("Tx", "A‚ew…acket is created‡nd is sent",

104 
MakeT¿ûSourûAcûssÜ
 (&
DudpCl›Á
::
m_txT¿û
),

107  
	gtid
;

110 
	gDudpCl›Á
::
DudpCl›Á
 ()

112 
NS_LOG_FUNCTION
 (
this
);

113 
	gm_£Á
 = 0;

114 
	gm_sock‘
 = 0;

115 
	gm_£ndEv’t
 = 
Ev’tId
 ();

116 
	gm_d©a
 = 0;

117 
	gm_d©aSize
 = 0;

118 
	gm_£gm’tId
 = 0;

121 
	gDudpCl›Á
::~
DudpCl›Á
()

123 
NS_LOG_FUNCTION
 (
this
);

124 
	gm_sock‘
 = 0;

126 
	gd–‘e
 [] 
	gm_d©a
;

127 
	gm_d©a
 = 0;

128 
	gm_d©aSize
 = 0;

132 
	gDudpCl›Á
::
S‘RemÙe
 (
Add»ss
 

, 
ušt16_t
 
pÜt
)

134 
NS_LOG_FUNCTION
 (
this
 << 

 << 
pÜt
);

135 
	gm_³”Add»ss
 = 

;

136 
	gm_³”PÜt
 = 
pÜt
;

140 
	gDudpCl›Á
::
S‘RemÙe
 (
Add»ss
 
addr
)

142 
NS_LOG_FUNCTION
 (
this
 << 
addr
);

143 
	gm_³”Add»ss
 = 
addr
;

147 
	gDudpCl›Á
::
DoDi¥o£
 ()

149 
NS_LOG_FUNCTION
 (
this
);

150 
	gAµliÿtiÚ
::
DoDi¥o£
 ();

154 
	gDudpCl›Á
::
S¹AµliÿtiÚ
 ()

156 
NS_LOG_FUNCTION
 (
this
);

160 ià(
	gm_sock‘
 == 0)

162 
Ty³Id
 
tid
 = Ty³Id::
LookupByName
 ("ns3::UdpSocketFactory");

163 
	gm_sock‘
 = 
Sock‘
::
C»©eSock‘
 (
G‘Node
 (), 
tid
);

164 ià(
	gIpv4Add»ss
::
IsM©chšgTy³
(
m_³”Add»ss
è=ğ
Œue
)

166 ià(
m_sock‘
->
Bšd
 () == -1)

168 
NS_FATAL_ERROR
 ("Failedo bind socket");

170 
	gm_sock‘
->
CÚÃù
 (
IÃtSock‘Add»ss
 (
Ipv4Add»ss
::
CÚv”tFrom
(
m_³”Add»ss
), 
m_³”PÜt
));

172 ià(
	gIpv6Add»ss
::
IsM©chšgTy³
(
m_³”Add»ss
è=ğ
Œue
)

174 ià(
m_sock‘
->
Bšd6
 () == -1)

176 
NS_FATAL_ERROR
 ("Failedo bind socket");

178 
	gm_sock‘
->
CÚÃù
 (
IÃt6Sock‘Add»ss
 (
Ipv6Add»ss
::
CÚv”tFrom
(
m_³”Add»ss
), 
m_³”PÜt
));

180 ià(
	gIÃtSock‘Add»ss
::
IsM©chšgTy³
 (
m_³”Add»ss
è=ğ
Œue
)

182 ià(
m_sock‘
->
Bšd
 () == -1)

184 
NS_FATAL_ERROR
 ("Failedo bind socket");

186 
	gm_sock‘
->
CÚÃù
 (
m_³”Add»ss
);

188 ià(
	gIÃt6Sock‘Add»ss
::
IsM©chšgTy³
 (
m_³”Add»ss
è=ğ
Œue
)

190 ià(
m_sock‘
->
Bšd6
 () == -1)

192 
NS_FATAL_ERROR
 ("Failedo bind socket");

194 
	gm_sock‘
->
CÚÃù
 (
m_³”Add»ss
);

198 
NS_ASSERT_MSG
 (
çl£
, "Incom·tibË‡dd»s ty³: " << 
m_³”Add»ss
);

202 
	gm_sock‘
->
S‘RecvC®lback
 (
MakeC®lback
 (&
DudpCl›Á
::
HªdËR—d
, 
this
));

203 
	gm_sock‘
->
S‘AÎowBrßdÿ¡
 (
Œue
);

204 
CheckS¹
 ();

213 
	gDudpCl›Á
::
CheckS¹
 (){

214 if(
T_¡¬t
==
çl£
){

215 
SimuÏtÜ
::
ScheduË
(
SecÚds
(0.001), &
DudpCl›Á
::
CheckS¹
, 
this
);

218 
ScheduËT¿nsm™
 (
SecÚds
 (0.));

223 
	gDudpCl›Á
::
StİAµliÿtiÚ
 ()

225 
NS_LOG_FUNCTION
 (
this
);

227 ià(
	gm_sock‘
 != 0)

229 
m_sock‘
->
Clo£
 ();

230 
	gm_sock‘
->
S‘RecvC®lback
 (
MakeNuÎC®lback
<, 
PŒ
<
Sock‘
> > ());

231 
	gm_sock‘
 = 0;

234 
	gSimuÏtÜ
::
Cªûl
 (
m_£ndEv’t
);

238 
	gDudpCl›Á
::
S‘D©aSize
 (
ušt32_t
 
d©aSize
)

240 
NS_LOG_FUNCTION
 (
this
 << 
d©aSize
);

247 
	gd–‘e
 [] 
	gm_d©a
;

248 
	gm_d©a
 = 0;

249 
	gm_d©aSize
 = 0;

250 
	gm_size
 = 
d©aSize
;

253 
ušt32_t


254 
	gDudpCl›Á
::
G‘D©aSize
 () const

256 
NS_LOG_FUNCTION
 (
this
);

257  
	gm_size
;

261 
	gDudpCl›Á
::
S‘Fl
 (
¡d
::
¡ršg
 
fl
)

263 
NS_LOG_FUNCTION
 (
this
 << 
fl
);

265 
ušt32_t
 
	gd©aSize
 = 
fl
.
size
 () + 1;

267 ià(
	gd©aSize
 !ğ
m_d©aSize
)

269 
d–‘e
 [] 
m_d©a
;

270 
	gm_d©a
 = 
Ãw
 
ušt8_t
 [
d©aSize
];

271 
	gm_d©aSize
 = 
d©aSize
;

274 
memıy
 (
m_d©a
, 
fl
.
c_¡r
 (), 
d©aSize
);

279 
	gm_size
 = 
d©aSize
;

283 
	gDudpCl›Á
::
S‘Fl
 (
ušt8_t
 
fl
, 
ušt32_t
 
d©aSize
)

285 
NS_LOG_FUNCTION
 (
this
 << 
fl
 << 
d©aSize
);

286 ià(
	gd©aSize
 !ğ
m_d©aSize
)

288 
d–‘e
 [] 
m_d©a
;

289 
	gm_d©a
 = 
Ãw
 
ušt8_t
 [
d©aSize
];

290 
	gm_d©aSize
 = 
d©aSize
;

293 
mem£t
 (
m_d©a
, 
fl
, 
d©aSize
);

298 
	gm_size
 = 
d©aSize
;

302 
	gDudpCl›Á
::
S‘Fl
 (
ušt8_t
 *
fl
, 
ušt32_t
 
flSize
, ušt32_ˆ
d©aSize
)

304 
NS_LOG_FUNCTION
 (
this
 << 
fl
 << 
flSize
 << 
d©aSize
);

305 ià(
	gd©aSize
 !ğ
m_d©aSize
)

307 
d–‘e
 [] 
m_d©a
;

308 
	gm_d©a
 = 
Ãw
 
ušt8_t
 [
d©aSize
];

309 
	gm_d©aSize
 = 
d©aSize
;

312 ià(
	gflSize
 >ğ
d©aSize
)

314 
memıy
 (
m_d©a
, 
fl
, 
d©aSize
);

315 
	gm_size
 = 
d©aSize
;

322 
ušt32_t
 
	gfËd
 = 0;

323 
	gfËd
 + 
	gflSize
 < 
	gd©aSize
)

325 
memıy
 (&
m_d©a
[
fËd
], 
fl
, 
flSize
);

326 
	gfËd
 +ğ
flSize
;

332 
memıy
 (&
m_d©a
[
fËd
], 
fl
, 
d©aSize
 - filled);

337 
	gm_size
 = 
d©aSize
;

341 
	gDudpCl›Á
::
ScheduËT¿nsm™
 (
Time
 
dt
)

343 
NS_LOG_FUNCTION
 (
this
 << 
dt
);

344 
	gm_£ndEv’t
 = 
SimuÏtÜ
::
ScheduË
 (
dt
, &
DudpCl›Á
::
S’d
, 
this
);

348 
	gDudpCl›Á
::
S’d
 ()

351 
NS_LOG_FUNCTION
 (
this
);

353 
NS_ASSERT
 (
m_£ndEv’t
.
IsExpœed
 ());

355 
	gPŒ
<
	gPack‘
> 
	gp
;

356 ià(
	gm_d©aSize
)

364 
NS_ASSERT_MSG
 (
m_d©aSize
 =ğ
m_size
, "DudpClient::Send(): m_size‡nd m_dataSize inconsistent");

365 
NS_ASSERT_MSG
 (
m_d©a
, "DudpClient::Send(): m_dataSize but‚o m_data");

366 
	gp
 = 
C»©e
<
Pack‘
> (
m_d©a
, 
	gm_d©aSize
);

377 
	gp
 = 
C»©e
<
Pack‘
> (
m_size
);

382 
	gB_»maš
 = 
t_bw
*1000000 - 
TP
;

383 
	g—ch_time
 = 1346.0*8/
B_»maš
;

387 
	gsum_by‹s
=0;

388 
	gsum_by‹s
 = 
udp_£g_size
[0][
m_£gm’tId
];

390 
	gsum_by‹s
 = 
sum_by‹s
/1288.0;

393 
	gsum_by‹s2
=0;

394 
	gsum_by‹s2
 = 
udp_£g_size2
[0][
m_£gm’tId
];

396 
	gsum_by‹s2
 = 
sum_by‹s2
/1288.0;

398 
	gsum_by‹s3
=0;

399 
	gsum_by‹s3
 = 
udp_£g_size3
[0][
m_£gm’tId
];

400 
	gsum_by‹s3
 = 
sum_by‹s3
/1288.0;

403 
	g·ck‘_numb”
=0;

404 ià(
	gsum_by‹s
-(sum_bytes) ==0)

405 
·ck‘_numb”
 = (
sum_by‹s
);

407 
	g·ck‘_numb”
 = (
sum_by‹s
)+1;

409 ià(
	g·ck‘_numb”
==0è
·ck‘_numb”
++;

412 
	g·ck‘_numb”2
=0;

413 ià(
	gsum_by‹s2
-(sum_bytes2) ==0)

414 
·ck‘_numb”2
 = (
sum_by‹s2
);

416 
	g·ck‘_numb”2
 = (
sum_by‹s2
)+1;

418 ià(
	g·ck‘_numb”2
==0è
·ck‘_numb”2
++;

421 
	g·ck‘_numb”3
=0;

422 ià(
	gsum_by‹s3
-(sum_bytes3) ==0)

423 
·ck‘_numb”3
 = (
sum_by‹s3
);

425 
	g·ck‘_numb”3
 = (
sum_by‹s3
)+1;

427 ià(
	g·ck‘_numb”3
==0è
·ck‘_numb”3
++;

429 
	gš‹rv®
 = 0.0;

430 ià(1-
·ck‘_numb”
*
	g—ch_time
 >=0){

431 
š‹rv®
 = (1-
·ck‘_numb”
*
—ch_time
)/packet_number;

432 
	gudp_£r›s
 [0][
m_£gm’tId
] = 
·ck‘_numb”
;

433 
	gcout
 <<"š‹rv®_choo£: "<<"high"<<
	g’dl
;

435 ià(1-
·ck‘_numb”2
*
	g—ch_time
 >=0) {

436 
š‹rv®
 = (1-
·ck‘_numb”2
*
—ch_time
)/packet_number2;

437 
	gudp_£r›s
 [0][
m_£gm’tId
] = 
·ck‘_numb”2
;

438 
	gcout
 <<"š‹rv®_choo£: "<<"medium"<<
	g’dl
;

442 
	gš‹rv®
 = (1-
·ck‘_numb”3
*
—ch_time
)/packet_number3;

443 
	gudp_£r›s
 [0][
m_£gm’tId
] = 
·ck‘_numb”3
;

444 
	gcout
 <<"š‹rv®_choo£: "<<"low"<<
	g’dl
;

451 
	gcout
 << "š‹rv®: "<< 
	gš‹rv®
 <<
	g’dl
;

452 ià(
	gš‹rv®
> 
	g—ch_time
)

453 
	gp_š‹r
 = 
š‹rv®
;

455 
	gp_š‹r
 = 
—ch_time
;

456 
	gš‹rv®
 = -1;

462 
HTTPH—d”
 
	gh‰pH—d”
;

463 
	gh‰pH—d”
.
S‘VideoId
(
m_videoId
);

464 
	gh‰pH—d”
.
S‘Segm’tId
(
m_£Á
);

465 
	gh‰pH—d”
.
S‘Pack‘Num
(
udp_£r›s
 [0][
m_£gm’tId
]);

466 
	gp
->
AddH—d”
(
h‰pH—d”
);

468 
	gcout
<<"ÃedØ»ûiv·ck‘: "<<
	gudp_£r›s
 [0][
m_£gm’tId
]<<
	g’dl
;

469 
	gcout
<<"u,4,"<<
	gudp_£r›s
 [0][
m_£gm’tId
]<<
	g’dl
;

470 
	gm_£gm’tId
++;

473 
m_txT¿û
 (
p
);

474 
	gm_sock‘
->
S’d
 (
p
);

476 ++
	gm_£Á
;

478 ià(
	gIpv4Add»ss
::
IsM©chšgTy³
 (
m_³”Add»ss
))

480 
NS_LOG_INFO
 ("Aˆtim" << 
SimuÏtÜ
::
Now
 ().
G‘SecÚds
 (è<< " ş›Á s’ˆ" << 
m_size
 << " byteso " <<

481 
Ipv4Add»ss
::
CÚv”tFrom
 (
m_³”Add»ss
è<< "…Üˆ" << 
m_³”PÜt
);

483 ià(
	gIpv6Add»ss
::
IsM©chšgTy³
 (
m_³”Add»ss
))

485 
NS_LOG_INFO
 ("Aˆtim" << 
SimuÏtÜ
::
Now
 ().
G‘SecÚds
 (è<< " ş›Á s’ˆ" << 
m_size
 << " byteso " <<

486 
Ipv6Add»ss
::
CÚv”tFrom
 (
m_³”Add»ss
è<< "…Üˆ" << 
m_³”PÜt
);

488 ià(
	gIÃtSock‘Add»ss
::
IsM©chšgTy³
 (
m_³”Add»ss
))

490 
NS_LOG_INFO
 ("Aˆtim" << 
SimuÏtÜ
::
Now
 ().
G‘SecÚds
 (è<< " ş›Á s’ˆ" << 
m_size
 << " byteso " <<

491 
IÃtSock‘Add»ss
::
CÚv”tFrom
 (
m_³”Add»ss
).
G‘Ipv4
 (è<< "…Üˆ" << IÃtSock‘Add»ss::CÚv”tFrom (m_³”Add»ss).
G‘PÜt
 ());

493 ià(
	gIÃt6Sock‘Add»ss
::
IsM©chšgTy³
 (
m_³”Add»ss
))

495 
NS_LOG_INFO
 ("Aˆtim" << 
SimuÏtÜ
::
Now
 ().
G‘SecÚds
 (è<< " ş›Á s’ˆ" << 
m_size
 << " byteso " <<

496 
IÃt6Sock‘Add»ss
::
CÚv”tFrom
 (
m_³”Add»ss
).
G‘Ipv6
 (è<< "…Üˆ" << IÃt6Sock‘Add»ss::CÚv”tFrom (m_³”Add»ss).
G‘PÜt
 ());

508 
	gDudpCl›Á
::
HªdËR—d
 (
PŒ
<
Sock‘
> 
sock‘
)

511 
NS_LOG_FUNCTION
 (
this
 << 
sock‘
);

512 
	gPŒ
<
	gPack‘
> 
	g·ck‘
;

513 
Add»ss
 
	gäom
;

514 
HTTPH—d”
 
	gh—d”
;

515 (
	g·ck‘
 = 
sock‘
->
RecvFrom
 (
äom
)))

517 
·ck‘
->
RemoveH—d”
(
h—d”
);

518 ià(
	gIÃtSock‘Add»ss
::
IsM©chšgTy³
 (
äom
))

522 
NS_LOG_INFO
 ("Aˆtim" << 
SimuÏtÜ
::
Now
 ().
G‘SecÚds
 (è<< " ş›Á„eûived " << 
·ck‘
->
G‘Size
 () << " bytes from " <<

523 
IÃtSock‘Add»ss
::
CÚv”tFrom
 (
äom
).
G‘Ipv4
 () << "…ort " <<

524 
IÃtSock‘Add»ss
::
CÚv”tFrom
 (
äom
).
G‘PÜt
 ());

526 ià(
	gIÃt6Sock‘Add»ss
::
IsM©chšgTy³
 (
äom
))

528 
NS_LOG_INFO
 ("Aˆtim" << 
SimuÏtÜ
::
Now
 ().
G‘SecÚds
 (è<< " ş›Á„eûived " << 
·ck‘
->
G‘Size
 () << " bytes from " <<

529 
IÃt6Sock‘Add»ss
::
CÚv”tFrom
 (
äom
).
G‘Ipv6
 () << "…ort " <<

530 
IÃt6Sock‘Add»ss
::
CÚv”tFrom
 (
äom
).
G‘PÜt
 ());

536 
	gp_£g
 = 
h—d”
.
G‘Segm’tId
();

537 
Pack‘
 
mes§ge
(1346);

539 
Pack‘Reûive
 (
mes§ge
);

545 
	gDudpCl›Á
::
Pack‘Reûive
 (
Pack‘
 
mes§ge
)

548 
p_num
++;

551 ià(
	gT_¶ay
==
çl£
 && 
now_£g
==
p_£g
){

553 
cout
<<"u,2,"<<
p_£g
<<","<<
SimuÏtÜ
::
Now
 ().
G‘SecÚds
 ()<<
’dl
;

554 
	gudp_¶ay”
.
ReûiveF¿me
(&
mes§ge
);

557 
	gudp_¶ay”
.
PÏyF¿me
();

561 ià(
	gp_num
<
	gudp_£r›s
[0][
m_£gm’tId
-1])

562 
	gudp_¶ay”
.
CheckPÏy
();

565 
C®lPÏy”
();

568 
	gudp_¶ay”
.
WakeupUdp
(
this
);

572 
	gDudpCl›Á
::
C®lPÏy”
(){

576 ià(
T_¶ay
==
çl£
)

577 
SimuÏtÜ
::
ScheduË
(
SecÚds
(0.01), &
DudpCl›Á
::
C®lPÏy”
, 
this
);

580 
	gudp_¶ay”
.
WakeupUdp
(
this
);

581 
	gudp_¶ay”
.
PÏyF¿me
();

	@model/DudpClient.h

19 #iâdeà
UDP_ECHO_CLIENT_H


20 
	#UDP_ECHO_CLIENT_H


	)

22 
	~"ns3/­¶iÿtiÚ.h
"

23 
	~"ns3/ev’t-id.h
"

24 
	~"ns3/±r.h
"

25 
	~"ns3/v4-add»ss.h
"

26 
	~"ns3/Œaûd-ÿÎback.h
"

27 
	~"udp-¶ay”.h
"

28 
	~"m³g-¶ay”.h
"

29 
Çme¥aû
 
	gns3
 {

31 
şass
 
	gSock‘
;

32 
şass
 
	gPack‘
;

40 şas 
	cDudpCl›Á
 : 
public
 
AµliÿtiÚ


42 
ä›nd
 
şass
 
UdpPÏy”
;

43 
ä›nd
 
şass
 
	gM³gPÏy”
;

45 
	gpublic
:

50 
Ty³Id
 
G‘Ty³Id
 ();

52 
DudpCl›Á
 ();

54 
	gvœtu®
 ~
DudpCl›Á
 ();

61 
S‘RemÙe
 (
Add»ss
 

, 
ušt16_t
 
pÜt
);

66 
S‘RemÙe
 (
Add»ss
 
addr
);

78 
S‘D©aSize
 (
ušt32_t
 
d©aSize
);

91 
ušt32_t
 
G‘D©aSize
 () const;

103 
S‘Fl
 (
¡d
::
¡ršg
 
fl
);

117 
S‘Fl
 (
ušt8_t
 
fl
, 
ušt32_t
 
d©aSize
);

135 
S‘Fl
 (
ušt8_t
 *
fl
, 
ušt32_t
 
flSize
, ušt32_ˆ
d©aSize
);

137 
šlše
 
	gUdpPÏy”
 &

138 
g‘PÏy”
()

140  
	gudp_¶ay”
;

143 
šlše
 
	gM³gPÏy”
 & 
G‘PÏy”
()

145  
	gm_¶ay”
;

151 
	g´Ùeùed
:

152 
vœtu®
 
DoDi¥o£
 ();

153 
ušt32_t
 
	gm_£gm’tId
;

155 
	g´iv©e
:

157 
vœtu®
 
S¹AµliÿtiÚ
 ();

158 
vœtu®
 
StİAµliÿtiÚ
 ();

164 
ScheduËT¿nsm™
 (
Time
 
dt
);

168 
S’d
 ();

171 
Pack‘Reûive
 (
Pack‘
 
mes§ge
);

179 
HªdËR—d
 (
PŒ
<
Sock‘
> 
sock‘
);

181 
C®lPÏy”
();

182 
CheckS¹
();

184 
UdpPÏy”
 
	gudp_¶ay”
;

185 
M³gPÏy”
 
	gm_¶ay”
;

187 
ušt32_t
 
	gm_couÁ
;

188 
Time
 
	gm_š‹rv®
;

189 
ušt32_t
 
	gm_size
;

191 
ušt32_t
 
	gm_d©aSize
;

192 
ušt8_t
 *
	gm_d©a
;

194 
ušt32_t
 
	gm_£Á
;

195 
	gPŒ
<
	gSock‘
> 
	gm_sock‘
;

196 
Add»ss
 
	gm_³”Add»ss
;

197 
ušt16_t
 
	gm_³”PÜt
;

198 
Ev’tId
 
	gm_£ndEv’t
;

199 
ušt32_t
 
	gm_videoId
;

202 
	gT¿ûdC®lback
<
	gPŒ
<cÚ¡ 
	gPack‘
> > 
	gm_txT¿û
;

	@model/DudpServer.cc

19 
	~"ns3/log.h
"

20 
	~"ns3/v4-add»ss.h
"

21 
	~"ns3/v6-add»ss.h
"

22 
	~"ns3/add»ss-uts.h
"

23 
	~"ns3/n¡ime.h
"

24 
	~"ns3/š‘-sock‘-add»ss.h
"

25 
	~"ns3/š‘6-sock‘-add»ss.h
"

26 
	~"ns3/sock‘.h
"

27 
	~"ns3/udp-sock‘.h
"

28 
	~"ns3/simuÏtÜ.h
"

29 
	~"ns3/sock‘-çùÜy.h
"

30 
	~"ns3/·ck‘.h
"

31 
	~"ns3/uš‹g”.h
"

33 
	~"DudpS”v”.h
"

34 
	~"h‰p-h—d”.h
"

35 
	~"·¿.h
"

40 
ušt32_t
 
	gs_id
;

42 
usšg
 
Çme¥aû
 
	g¡d
;

44 
Çme¥aû
 
	gns3
 {

46 
NS_LOG_COMPONENT_DEFINE
 ("DudpServerApplication");

48 
NS_OBJECT_ENSURE_REGISTERED
 (
DudpS”v”
);

50 
Ty³Id


51 
	gDudpS”v”
::
G‘Ty³Id
 ()

53 
Ty³Id
 
tid
 = TypeId ("ns3::DudpServer")

54 .
S‘P¬’t
<
AµliÿtiÚ
> ()

55 .
S‘GroupName
("Applications")

56 .
AddCÚ¡ruùÜ
<
DudpS”v”
> ()

57 .
AddA‰ribu‹
 ("Port", "Port on which we†isten for incoming…ackets.",

58 
Uš‹g”V®ue
 (9),

59 
MakeUš‹g”AcûssÜ
 (&
DudpS”v”
::
m_pÜt
),

60 
MakeUš‹g”Check”
<
ušt16_t
> ())

62  
	gtid
;

65 
	gDudpS”v”
::
DudpS”v”
 ()

67 
NS_LOG_FUNCTION
 (
this
);

70 
	gDudpS”v”
::~
DudpS”v”
()

72 
NS_LOG_FUNCTION
 (
this
);

73 
	gm_sock‘
 = 0;

74 
	gm_sock‘6
 = 0;

78 
	gDudpS”v”
::
DoDi¥o£
 ()

80 
NS_LOG_FUNCTION
 (
this
);

81 
	gAµliÿtiÚ
::
DoDi¥o£
 ();

85 
	gDudpS”v”
::
S¹AµliÿtiÚ
 ()

87 
NS_LOG_FUNCTION
 (
this
);

89 ià(
	gm_sock‘
 == 0)

91 
Ty³Id
 
tid
 = Ty³Id::
LookupByName
 ("ns3::UdpSocketFactory");

92 
	gm_sock‘
 = 
Sock‘
::
C»©eSock‘
 (
G‘Node
 (), 
tid
);

93 
IÃtSock‘Add»ss
 
	gloÿl
 = IÃtSock‘Add»s (
Ipv4Add»ss
::
G‘Any
 (), 
m_pÜt
);

94 ià(
	gm_sock‘
->
Bšd
 (
loÿl
) == -1)

96 
NS_FATAL_ERROR
 ("Failedo bind socket");

98 ià(
	gadd»ssUts
::
IsMuÉiÿ¡
 (
m_loÿl
))

100 
PŒ
<
UdpSock‘
> 
udpSock‘
 = 
DyÇmicCa¡
<UdpSock‘> (
m_sock‘
);

101 ià(
	gudpSock‘
)

104 
	gudpSock‘
->
MuÉiÿ¡JošGroup
 (0, 
m_loÿl
);

108 
NS_FATAL_ERROR
 ("Error: Failedo join multicast group");

113 ià(
	gm_sock‘6
 == 0)

115 
Ty³Id
 
tid
 = Ty³Id::
LookupByName
 ("ns3::UdpSocketFactory");

116 
	gm_sock‘6
 = 
Sock‘
::
C»©eSock‘
 (
G‘Node
 (), 
tid
);

117 
IÃt6Sock‘Add»ss
 
	gloÿl6
 = IÃt6Sock‘Add»s (
Ipv6Add»ss
::
G‘Any
 (), 
m_pÜt
);

118 ià(
	gm_sock‘6
->
Bšd
 (
loÿl6
) == -1)

120 
NS_FATAL_ERROR
 ("Failedo bind socket");

122 ià(
	gadd»ssUts
::
IsMuÉiÿ¡
 (
loÿl6
))

124 
PŒ
<
UdpSock‘
> 
udpSock‘
 = 
DyÇmicCa¡
<UdpSock‘> (
m_sock‘6
);

125 ià(
	gudpSock‘
)

128 
	gudpSock‘
->
MuÉiÿ¡JošGroup
 (0, 
loÿl6
);

132 
NS_FATAL_ERROR
 ("Error: Failedo join multicast group");

137 
	gm_sock‘
->
S‘RecvC®lback
 (
MakeC®lback
 (&
DudpS”v”
::
HªdËR—d
, 
this
));

138 
	gm_sock‘6
->
S‘RecvC®lback
 (
MakeC®lback
 (&
DudpS”v”
::
HªdËR—d
, 
this
));

142 
	gDudpS”v”
::
StİAµliÿtiÚ
 ()

144 
NS_LOG_FUNCTION
 (
this
);

146 ià(
	gm_sock‘
 != 0)

148 
m_sock‘
->
Clo£
 ();

149 
	gm_sock‘
->
S‘RecvC®lback
 (
MakeNuÎC®lback
<, 
PŒ
<
Sock‘
> > ());

151 ià(
	gm_sock‘6
 != 0)

153 
m_sock‘6
->
Clo£
 ();

154 
	gm_sock‘6
->
S‘RecvC®lback
 (
MakeNuÎC®lback
<, 
PŒ
<
Sock‘
> > ());

159 
	gDudpS”v”
::
HªdËR—d
 (
PŒ
<
Sock‘
> 
sock‘
)

161 
NS_LOG_FUNCTION
 (
this
 << 
sock‘
);

163 
	gPŒ
<
	gPack‘
> 
	g·ck‘
;

164 
Add»ss
 
	gäom
;

165 (
	g·ck‘
 = 
sock‘
->
RecvFrom
 (
äom
)))

167 ià(
IÃtSock‘Add»ss
::
IsM©chšgTy³
 (
äom
))

169 
NS_LOG_INFO
 ("Aˆtim" << 
SimuÏtÜ
::
Now
 ().
G‘SecÚds
 (è<< " £rv”„eûived " << 
·ck‘
->
G‘Size
 () << " bytes from " <<

170 
IÃtSock‘Add»ss
::
CÚv”tFrom
 (
äom
).
G‘Ipv4
 () << "…ort " <<

171 
IÃtSock‘Add»ss
::
CÚv”tFrom
 (
äom
).
G‘PÜt
 ());

173 ià(
	gIÃt6Sock‘Add»ss
::
IsM©chšgTy³
 (
äom
))

175 
NS_LOG_INFO
 ("Aˆtim" << 
SimuÏtÜ
::
Now
 ().
G‘SecÚds
 (è<< " £rv”„eûived " << 
·ck‘
->
G‘Size
 () << " bytes from " <<

176 
IÃt6Sock‘Add»ss
::
CÚv”tFrom
 (
äom
).
G‘Ipv6
 () << "…ort " <<

177 
IÃt6Sock‘Add»ss
::
CÚv”tFrom
 (
äom
).
G‘PÜt
 ());

181 
HTTPH—d”
 
	gh—d”
;

182 
	g·ck‘
->
RemoveH—d”
(
h—d”
);

185 
	g·ck‘
->
RemoveAÎPack‘Tags
 ();

186 
	g·ck‘
->
RemoveAÎBy‹Tags
 ();

187 
NS_LOG_LOGIC
 ("Echoing…acket");

189 
ušt32_t
 
	g·ck‘_num
 = 
h—d”
.
G‘Pack‘Num
();

190 
	gcouÁ_·ck‘
 = 
·ck‘_num
;

191 
	gs_id
 = 
h—d”
.
G‘Segm’tId
();

203 
	gm_ş›Á
 = 
äom
;

204 
	gT_¶ay
=
çl£
;

205 
	gloss_m¬k
=
çl£
;

206 
ScheduËT¿nsm™
(
SecÚds
 (0.));

209 ià(
	gIÃtSock‘Add»ss
::
IsM©chšgTy³
 (
äom
))

211 
NS_LOG_INFO
 ("Aˆtim" << 
SimuÏtÜ
::
Now
 ().
G‘SecÚds
 (è<< " £rv” s’ˆ" << 
·ck‘
->
G‘Size
 () << " byteso " <<

212 
IÃtSock‘Add»ss
::
CÚv”tFrom
 (
äom
).
G‘Ipv4
 () << "…ort " <<

213 
IÃtSock‘Add»ss
::
CÚv”tFrom
 (
äom
).
G‘PÜt
 ());

215 ià(
	gIÃt6Sock‘Add»ss
::
IsM©chšgTy³
 (
äom
))

217 
NS_LOG_INFO
 ("Aˆtim" << 
SimuÏtÜ
::
Now
 ().
G‘SecÚds
 (è<< " £rv” s’ˆ" << 
·ck‘
->
G‘Size
 () << " byteso " <<

218 
IÃt6Sock‘Add»ss
::
CÚv”tFrom
 (
äom
).
G‘Ipv6
 () << "…ort " <<

219 
IÃt6Sock‘Add»ss
::
CÚv”tFrom
 (
äom
).
G‘PÜt
 ());

226 
	gDudpS”v”
::
ScheduËT¿nsm™
 (
Time
 
dt
)

228 
NS_LOG_FUNCTION
 (
this
 << 
dt
);

231 
	gcouÁ_·ck‘
--;

233 ià(
	gcouÁ_·ck‘
>=0 && 
T_¶ay
!=
Œue
){

234 
SimuÏtÜ
::
ScheduË
 (
SecÚds
 (0.), &
DudpS”v”
::
S’d
, 
this
);

235 
	gSimuÏtÜ
::
ScheduË
 (
SecÚds
 (
p_š‹r
), &
DudpS”v”
::
ScheduËT¿nsm™
, 
this
,Seconds (0.));

238 
	gcouÁ_·ck‘
=-1;

246 
	gDudpS”v”
::
S’d
 ()

249 
HTTPH—d”
 
h‰pH—d”
;

250 
	gh‰pH—d”
.
S‘Segm’tId
(
s_id
);

252 
	gPŒ
<
	gPack‘
> 
	g·ck‘
;

253 
	g·ck‘
 = 
C»©e
<
Pack‘
> (1346);

254 
	g·ck‘
->
AddH—d”
(
h‰pH—d”
);

256 
	gcout
 <<"u,"<<"1,"<<
	gs_id
<<","<<
	gSimuÏtÜ
::
Now
 ().
G‘SecÚds
 ()<<
’dl
;

258 
	gm_sock‘
->
S’dTo
 (
·ck‘
, 0, 
m_ş›Á
);

	@model/DudpServer.h

19 #iâdeà
UDP_ECHO_SERVER_H


20 
	#UDP_ECHO_SERVER_H


	)

22 
	~"ns3/­¶iÿtiÚ.h
"

23 
	~"ns3/ev’t-id.h
"

24 
	~"ns3/±r.h
"

25 
	~"ns3/add»ss.h
"

27 
Çme¥aû
 
	gns3
 {

29 
şass
 
	gSock‘
;

30 
şass
 
	gPack‘
;

43 şas 
	cDudpS”v”
 : 
public
 
AµliÿtiÚ


45 
public
:

50 
Ty³Id
 
G‘Ty³Id
 ();

51 
DudpS”v”
 ();

52 
	gvœtu®
 ~
DudpS”v”
 ();

54 
	g´Ùeùed
:

55 
vœtu®
 
DoDi¥o£
 ();

57 
	g´iv©e
:

59 
vœtu®
 
S¹AµliÿtiÚ
 ();

60 
vœtu®
 
StİAµliÿtiÚ
 ();

69 
HªdËR—d
 (
PŒ
<
Sock‘
> 
sock‘
);

70 
ScheduËT¿nsm™
 (
Time
 
dt
);

71 
S’d
 ();

73 
Ev’tId
 
	gm_£ndEv’t
;

75 
ušt16_t
 
	gm_pÜt
;

76 
	gPŒ
<
	gSock‘
> 
	gm_sock‘
;

77 
	gPŒ
<
	gSock‘
> 
	gm_sock‘6
;

78 
Add»ss
 
	gm_loÿl
;

79 
Add»ss
 
	gm_ş›Á
;

	@model/algorithms/aaash-client.cc

8 
	~"¯ash-ş›Á.h
"

9 
	~<ns3/log.h
>

10 
	~<ns3/simuÏtÜ.h
>

11 
	~<ns3/dash-ş›Á.h
>

13 
NS_LOG_COMPONENT_DEFINE
("AaashClient");

15 
Çme¥aû
 
	gns3


17 
NS_OBJECT_ENSURE_REGISTERED
(
A¯shCl›Á
);

19 
Ty³Id


20 
	gA¯shCl›Á
::
G‘Ty³Id
()

22 
Ty³Id
 
tid
 =

23 
Ty³Id
("ns3::A¯shCl›Á").
S‘P¬’t
<
DashCl›Á
>().
AddCÚ¡ruùÜ
<

24 
A¯shCl›Á
>();

25  
	gtid
;

28 
	gA¯shCl›Á
::
A¯shCl›Á
() :

29 
m_ruÂšg_ç¡_¡¬t
(
Œue
)

35 
A¯shCl›Á
::~AaashClient()

41 
A¯shCl›Á
::
C®cNextSegm’t
(
ušt32_t
 
cu¼R©e
, ušt32_ˆ& 
ÃxtR©e
,

42 
Time
 & 
d–ay
)

44 
ušt32_t
 
	g¿‹s
[] =

51 
ušt32_t
 
	g¿‹s_size
 = (
¿‹s
) / (rates[0]);

53 
	ga1
 = 0.75;

54 
	ga2
 = 0.33;

55 
	ga3
 = 0.5;

56 
	ga4
 = 0.75;

57 
	ga5
 = 0.9;

59 
Time
 
b_mš
("10s");

60 
Time
 
b_low
("20s");

61 
Time
 
b_high
("50s");

62 
Time
 
	gb_İt
 = 
SecÚds
((
b_low
 + 
b_high
).
G‘SecÚds
() * 0.5);

64 
Time
 
f
(
MliSecÚds
(
MPEG_FRAMES_PER_SEGMENT
 * 
MPEG_TIME_BETWEEN_FRAMES
));

66 
Time
 
	gb_t
 = 
m_bufãrS‹
.
rbegš
()->
£cÚd
;

69 
ušt32_t
 
	g¿‹Ind
 = 
¿‹s_size
;

70 
ušt32_t
 
	gi
 = 0; i < 
	g¿‹s_size
; i++)

72 ià(
	g¿‹s
[
i
] =ğ
cu¼R©e
)

74 
¿‹Ind
 = 
i
;

78 ià(
	g¿‹Ind
 =ğ
¿‹s_size
)

80 
NS_FATAL_ERROR
("Wrong„ate");

83 
	gÃxtR©e
 = 
cu¼R©e
;

84 
	gd–ay
 = 
SecÚds
(0);

86 
ušt32_t
 
	gr_up
 = 
¿‹s
[
¿‹Ind
];

87 
ušt32_t
 
	gr_down
 = 
¿‹s
[
¿‹Ind
];

88 ià(
	g¿‹Ind
 + 1 < 
	g¿‹s_size
)

90 
	gr_up
 = 
¿‹s
[
¿‹Ind
 + 1];

92 ià(
	g¿‹Ind
 >= 1)

94 
r_down
 = 
¿‹s
[
¿‹Ind
 - 1];

99 ià(
	gm_ruÂšg_ç¡_¡¬t
 && (
	g¿‹Ind
 !ğ
¿‹s_size
 - 1è&& 
BufãrInc
()

100 && (
cu¼R©e
 <ğ
a1
 * 
m_b™¿‹E¡im©e
))

102 ià(
b_t
 < 
b_mš
)

104 ià(
r_up
 <ğ
a2
 * 
m_b™¿‹E¡im©e
)

106 
ÃxtR©e
 = 
r_up
;

109 ià(
	gb_t
 < 
	gb_low
)

111 ià(
	gr_up
 <ğ
a3
 * 
m_b™¿‹E¡im©e
)

113 
ÃxtR©e
 = 
r_up
;

118 ià(
	gr_up
 <ğ
a4
 * 
m_b™¿‹E¡im©e
)

120 
ÃxtR©e
 = 
r_up
;

122 ià(
	gb_t
 > 
	gb_high
)

124 
	gd–ay
 = 
b_high
 - 
f
;

130 
	gm_ruÂšg_ç¡_¡¬t
 = 
çl£
;

131 ià(
	gb_t
 < 
	gb_mš
)

133 
	gÃxtR©e
 = 
¿‹s
[0];

135 ià(
	gb_t
 < 
	gb_low
)

137 ià(
	gcu¼R©e
 !ğ
¿‹s
[0] && 
cu¼R©e
 >ğ
m_b™¿‹E¡im©e
)

139 
ÃxtR©e
 = 
r_down
;

142 ià(
	gb_t
 < 
	gb_high
)

144 ià((
	gcu¼R©e
 =ğ
¿‹s
[
¿‹s_size
 - 1])

145 || (
r_up
 >ğ
a5
 * 
m_b™¿‹E¡im©e
))

147 
d–ay
 = 
¡d
::
max
(
b_t
 - 
f
, 
b_İt
);

152 ià((
	gcu¼R©e
 =ğ
¿‹s
[
¿‹s_size
 - 1])

153 || (
r_up
 >ğ
a5
 * 
m_b™¿‹E¡im©e
))

155 
d–ay
 = 
¡d
::
max
(
b_t
 - 
f
, 
b_İt
);

159 
	gÃxtR©e
 = 
r_up
;

165 
NS_LOG_INFO
(

166 "ÃxtR©e: " << 
ÃxtR©e
 << "\tb_d–ay: " << 
d–ay
.
G‘SecÚds
(è<< "\tb_t: " << 
b_t
.G‘SecÚds(è<< "\tb_İt: " << 
b_İt
.GetSeconds());

169 
boŞ


170 
	gA¯shCl›Á
::
BufãrInc
()

172 
Time
 
Ï¡
(
SecÚds
(0));

174 
	g¡d
::
m­
<
Time
, 
	gTime
>::
™”©Ü
 
™
 = 
m_bufãrS‹
.
begš
();

175 
	g™
 !ğ
m_bufãrS‹
.
’d
(); it++)

180 ià(
	g™
->
	g£cÚd
 < 
	gÏ¡
)

182  
	gçl£
;

184 
	gÏ¡
 = 
™
->
£cÚd
;

186  
	gŒue
;

	@model/algorithms/aaash-client.h

8 #iâdeà
AAASH_CLIENT_H_


9 
	#AAASH_CLIENT_H_


	)

11 
	~<ns3/dash-ş›Á.h
>

12 
Çme¥aû
 
	gns3


15 şas 
	cA¯shCl›Á
 : 
public
 
DashCl›Á


17 
public
:

18 
Ty³Id


19 
G‘Ty³Id
();

21 
A¯shCl›Á
();

23 
	gvœtu®


24 ~
A¯shCl›Á
();

26 
vœtu®
 

27 
C®cNextSegm’t
(
ušt32_t
 
cu¼R©e
, ušt32_ˆ& 
ÃxtR©e
, 
Time
 & 
d–ay
);

29 
	g´iv©e
:

30 
boŞ


31 
BufãrInc
();

33 
boŞ
 
	gm_ruÂšg_ç¡_¡¬t
;

	@model/algorithms/fdash-client.cc

8 
	~"fdash-ş›Á.h
"

9 
	~<ns3/log.h
>

10 
	~<ns3/simuÏtÜ.h
>

11 
	~<ns3/dash-ş›Á.h
>

13 
NS_LOG_COMPONENT_DEFINE
("FdashClient");

15 
Çme¥aû
 
	gns3


17 
NS_OBJECT_ENSURE_REGISTERED
(
FdashCl›Á
);

19 
Ty³Id


20 
	gFdashCl›Á
::
G‘Ty³Id
()

22 
Ty³Id
 
tid
 =

23 
Ty³Id
("ns3::FdashCl›Á").
S‘P¬’t
<
DashCl›Á
>().
AddCÚ¡ruùÜ
<

24 
FdashCl›Á
>();

25  
	gtid
;

28 
	gFdashCl›Á
::
FdashCl›Á
()

34 
FdashCl›Á
::~FdashClient()

40 
FdashCl›Á
::
C®cNextSegm’t
(
ušt32_t
 
cu¼R©e
, ušt32_ˆ& 
ÃxtR©e
,

41 
Time
 & 
d–ay
)

43 
	g¦ow
 = 0, 
	gok
 = 0, 
	gç¡
 = 0, 
	gçÎšg
 = 0, 
	g¡—dy
 = 0, 
	grisšg
 = 0, 
	gr1
 =

44 0, 
	gr2
 = 0, 
	gr3
 = 0, 
	gr4
 = 0, 
	gr5
 = 0, 
	gr6
 = 0, 
	gr7
 = 0, 
	gr8
 = 0, 
	gr9
 = 0, 
	gp2
 =

45 0, 
	gp1
 = 0, 
	gz
 = 0, 
	gn1
 = 0, 
	gn2
 = 0, 
	gouut
 = 0;

47 
	gt
 = 
m_rg‘_dt
.
G‘SecÚds
();

49 
	gcu¼Dt
 = 
G‘BufãrE¡im©e
();

50 
	gdiff
 = 
G‘BufãrDifã»ÁŸl
();

52 ià(
	gcu¼Dt
 < 2 * 
	gt
 / 3)

54 
	g¦ow
 = 1.0;

56 ià(
	gcu¼Dt
 < 
	gt
)

58 
	g¦ow
 = 1 - 1 / (
t
 / 3è* (
cu¼Dt
 - 2 * / 3);

59 
	gok
 = 1 / (
t
 / 3è* (
cu¼Dt
 - 2 * / 3);

61 ià(
	gcu¼Dt
 < 4 * 
	gt
)

63 
	gok
 = 1 - 1 / (3 * 
t
è* (
cu¼Dt
 -);

64 
	gç¡
 = 1 / (3 * 
t
è* (
cu¼Dt
 -);

68 
	gç¡
 = 1;

71 ià(
	gdiff
 < -2 * 
	gt
 / 3)

73 
	gçÎšg
 = 1;

75 ià(
	gdiff
 < 0)

77 
	gçÎšg
 = 1 - 1 / (2 * 
t
 / 3è* (
diff
 + 2 * / 3);

78 
	g¡—dy
 = 1 / (2 * 
t
 / 3è* (
diff
 + 2 * / 3);

80 ià(
	gdiff
 < 4 * 
	gt
)

82 
	g¡—dy
 = 1 - 1 / (4 * 
t
è* 
diff
;

83 
	grisšg
 = 1 / (4 * 
t
è* 
diff
;

87 
	grisšg
 = 1;

90 
	gr1
 = 
¡d
::
mš
(
¦ow
, 
çÎšg
);

91 
	gr2
 = 
¡d
::
mš
(
ok
, 
çÎšg
);

92 
	gr3
 = 
¡d
::
mš
(
ç¡
, 
çÎšg
);

93 
	gr4
 = 
¡d
::
mš
(
¦ow
, 
¡—dy
);

94 
	gr5
 = 
¡d
::
mš
(
ok
, 
¡—dy
);

95 
	gr6
 = 
¡d
::
mš
(
ç¡
, 
¡—dy
);

96 
	gr7
 = 
¡d
::
mš
(
¦ow
, 
risšg
);

97 
	gr8
 = 
¡d
::
mš
(
ok
, 
risšg
);

98 
	gr9
 = 
¡d
::
mš
(
ç¡
, 
risšg
);

100 
	gp2
 = 
¡d
::
sq¹
(¡d::
pow
(
r9
, 2));

101 
	gp1
 = 
¡d
::
sq¹
(¡d::
pow
(
r6
, 2è+ std::pow(
r8
, 2));

102 
	gz
 = 
¡d
::
sq¹
(¡d::
pow
(
r3
, 2è+ std::pow(
r5
, 2è+ std::pow(
r7
, 2));

103 
	gn1
 = 
¡d
::
sq¹
(¡d::
pow
(
r2
, 2è+ std::pow(
r4
, 2));

104 
	gn2
 = 
¡d
::
sq¹
(¡d::
pow
(
r1
, 2));

107 
	gouut
 = (
n2
 * 0.25 + 
n1
 * 0.5 + 
z
 * 1 + 
p1
 * 2 + 
p2
 * 4)

108 / (
n2
 + 
n1
 + 
z
 + 
p1
 + 
p2
);

110 
NS_LOG_INFO
(

111 "cu¼Dt: " << 
cu¼Dt
 << " diff: " << 
diff
 << " slow: " << 
¦ow
 << " ok: " << 
ok
 << " fa¡: " << 
ç¡
 << " f®lšg: " << 
çÎšg
 << " s‹ady: " << 
¡—dy
 << "„isšg: " << 
risšg
 << "„1: " << 
r1
 << "„2: " << 
r2
 << "„3: " << 
r3
 << "„4: " << 
r4
 << "„5: " << 
r5
 << "„6: " << 
r6
 << "„7: " << 
r7
 << "„8: " << 
r8
 << "„9: " << 
r9
 << "…2: " << 
p2
 << "…1: " << 
p1
 << " z: " << 
z
 << "‚1: " << 
n1
 << "‚2: " << 
n2
 << " ouut: " << 
ouut
);

113 
ušt32_t
 
	g»suÉ
 = 0;

115 
	g»suÉ
 = 
ouut
 * 
m_b™¿‹E¡im©e
;

117 
ušt32_t
 
	g¿‹s
[] =

124 
ušt32_t
 
	g¿‹s_size
 = (
¿‹s
) / (rates[0]);

126 
ušt32_t
 
	gi
;

128 
	gÃxtR©e
 = 
¿‹s
[0];

130 
	gi
 = 0; i < 
	g¿‹s_size
; i++)

132 ià(
	g»suÉ
 > 
	g¿‹s
[
i
])

134 
	gÃxtR©e
 = 
¿‹s
[
i
];

138 
	gd–ay
 = 
SecÚds
(0);

139 ià(
	gÃxtR©e
 > 
	gcu¼R©e
)

153 
	gt_60
 = 
cu¼Dt
 + (
m_b™¿‹E¡im©e
 / 
ÃxtR©e
 - 1) * 60;

155 ià(
	gt_60
 < 
	gt
)

157 
	gÃxtR©e
 = 
cu¼R©e
;

158 
	gt_60
 = 
cu¼Dt
 + (
m_b™¿‹E¡im©e
 / 
ÃxtR©e
 - 1) * 60;

160 ià(
	gt_60
 > 
	gt
)

167 ià(
	gÃxtR©e
 < 
	gcu¼R©e
)

169 
	gt_60
 = 
cu¼Dt
 + (
m_b™¿‹E¡im©e
 / 
ÃxtR©e
 - 1) * 60;

171 ià(
	gt_60
 > 
	gt
)

173 
	gt_60
 = 
cu¼Dt
 + (
m_b™¿‹E¡im©e
 / 
cu¼R©e
 - 1) * 60;

174 ià(
	gt_60
 > 
	gt
)

176 
	gÃxtR©e
 = 
cu¼R©e
;

182 
NS_LOG_INFO
(
cu¼R©e
 << " " << 
ouut
 << " " << 
»suÉ
);

	@model/algorithms/fdash-client.h

8 #iâdeà
FDASH_CLIENT_H_


9 
	#FDASH_CLIENT_H_


	)

11 
	~<ns3/dash-ş›Á.h
>

12 
Çme¥aû
 
	gns3


15 şas 
	cFdashCl›Á
 : 
public
 
DashCl›Á


17 
public
:

18 
Ty³Id


19 
G‘Ty³Id
();

21 
FdashCl›Á
();

23 
	gvœtu®


24 ~
FdashCl›Á
();

26 
vœtu®
 

27 
C®cNextSegm’t
(
ušt32_t
 
cu¼R©e
, ušt32_ˆ& 
ÃxtR©e
, 
Time
 & 
d–ay
);

29 
	g´iv©e
:

30 
boŞ


31 
BufãrInc
();

	@model/algorithms/osmp-client.cc

8 
	~"osmp-ş›Á.h
"

9 
	~<ns3/log.h
>

10 
	~<ns3/simuÏtÜ.h
>

11 
	~<ns3/dash-ş›Á.h
>

13 
NS_LOG_COMPONENT_DEFINE
("OsmpClient");

15 
Çme¥aû
 
	gns3


17 
NS_OBJECT_ENSURE_REGISTERED
(
OsmpCl›Á
);

19 
Ty³Id


20 
	gOsmpCl›Á
::
G‘Ty³Id
()

22 
Ty³Id
 
tid
 =

23 
Ty³Id
("ns3::OsmpCl›Á").
S‘P¬’t
<
DashCl›Á
>().
AddCÚ¡ruùÜ
<

24 
OsmpCl›Á
>();

25  
	gtid
;

28 
	gOsmpCl›Á
::
OsmpCl›Á
()

34 
OsmpCl›Á
::~OsmpClient()

40 
OsmpCl›Á
::
C®cNextSegm’t
(
ušt32_t
 
cu¼R©e
, ušt32_ˆ& 
ÃxtR©e
,

41 
Time
 & 
d–ay
)

43 
ušt32_t
 
	g¿‹s
[] =

48 
ušt32_t
 
	g¿‹s_size
 = (
¿‹s
) / (rates[0]);

50 
	g¡d
::
m­
<
Time
, 
	gTime
>::
™”©Ü
 
™
;

51 
	g™
 = 
m_bufãrS‹
.
’d
();

53 
	g™
--;

54 
Time
 
	gnow
 = 
™
->
fœ¡
;

56 ià(
	g™
 !ğ
m_bufãrS‹
.
begš
())

58 
™
--;

62 
Time
 
	gt_Ï¡_äag
 = 
now
 - 
™
->
fœ¡
;

65 
	gl_cur
 = 0;

66 
	g¿‹s
[
l_cur
] !ğ
cu¼R©e
)

68 
l_cur
++;

71 
	gl_nxt
 = 0;

72 
	gl_mš
 = 0;

73 
	gl_max
 = 
¿‹s_size
 - 1;

75 
	gr_dowÆßd
 = 100;

76 ià(
	gt_Ï¡_äag
.
G‘MliSecÚds
() > 0)

78 
	gr_dowÆßd
 = (1.0 * 
MPEG_FRAMES_PER_SEGMENT
 * 
MPEG_TIME_BETWEEN_FRAMES
)

79 / 
t_Ï¡_äag
.
G‘MliSecÚds
();

85 ià(
	gr_dowÆßd
 < 1)

87 ià(
	gl_cur
 > 
	gl_mš
)

89 ià(
	gr_dowÆßd
 < ((1.0 * 
	g¿‹s
[
l_cur
 - 1]) /„ates[l_cur]))

91 
	gl_nxt
 = 
l_mš
;

95 
	gl_nxt
 = 
l_cur
 - 1;

101 ià(
	gl_cur
 < 
	gl_max
)

103 ià(
	gl_cur
 == 0

104 || 
r_dowÆßd
 > ((1.0 * 
¿‹s
[
l_cur
 - 1]) /„ates[l_cur]))

108 
l_nxt
 =†_nxt + 1;

110 !(
	gl_nxt
 =ğ
l_max


111 || 
r_dowÆßd
 < ((1.0 * 
¿‹s
[
l_nxt
 + 1]è/„©es[
l_cur
])));

117 
	gd–ay
 = 
SecÚds
(0);

118 
	gÃxtR©e
 = 
¿‹s
[
l_nxt
];

	@model/algorithms/osmp-client.h

8 #iâdeà
OSMP_CLIENT_H_


9 
	#OSMP_CLIENT_H_


	)

11 
	~<ns3/dash-ş›Á.h
>

12 
Çme¥aû
 
	gns3


15 şas 
	cOsmpCl›Á
 : 
public
 
DashCl›Á


17 
public
:

18 
Ty³Id


19 
G‘Ty³Id
();

21 
OsmpCl›Á
();

23 
	gvœtu®


24 ~
OsmpCl›Á
();

26 
vœtu®
 

27 
C®cNextSegm’t
(
ušt32_t
 
cu¼R©e
, ušt32_ˆ& 
ÃxtR©e
, 
Time
 & 
d–ay
);

	@model/algorithms/raahs-client.cc

8 
	~"¿ahs-ş›Á.h
"

9 
	~<ns3/log.h
>

10 
	~<ns3/simuÏtÜ.h
>

11 
	~<ns3/dash-ş›Á.h
>

13 
NS_LOG_COMPONENT_DEFINE
("RaahsClient");

15 
Çme¥aû
 
	gns3


17 
NS_OBJECT_ENSURE_REGISTERED
(
R¯hsCl›Á
);

19 
Ty³Id


20 
	gR¯hsCl›Á
::
G‘Ty³Id
()

22 
Ty³Id
 
tid
 =

23 
Ty³Id
("ns3::R¯hsCl›Á").
S‘P¬’t
<
DashCl›Á
>().
AddCÚ¡ruùÜ
<

24 
R¯hsCl›Á
>();

25  
	gtid
;

28 
	gR¯hsCl›Á
::
R¯hsCl›Á
()

34 
R¯hsCl›Á
::~RaahsClient()

40 
R¯hsCl›Á
::
C®cNextSegm’t
(
ušt32_t
 
cu¼R©e
, ušt32_ˆ& 
ÃxtR©e
,

41 
Time
 & 
d–ay
)

43 
ušt32_t
 
	g¿‹s
[] =

50 
ušt32_t
 
	g¿‹s_size
 = (
¿‹s
) / (rates[0]);

53 
	gmsd
 = 
MPEG_FRAMES_PER_SEGMENT
 * 
MPEG_TIME_BETWEEN_FRAMES
 / 1000.0;

54 
	gsá
 = 
G‘Segm’tF‘chTime
();

56 
	gmi
 = 
msd
 / 
sá
;

58 
	gt_mš
 = 9;

60 
	g•sÚ
 = 0.0;

61 
ušt32_t
 
	gi
;

62 
	gi
 = 0; i < 
	g¿‹s_size
 - 1; i++)

64 
	g•sÚ
 = 
¡d
::
max
(
•sÚ
, (1.0 * 
¿‹s
[
i
 + 1] -„ates[i]) /„ates[i]);

67 
	ggamma_d
 = 0.67;

69 
	g¿‹Ind
 = 
¿‹s_size
;

70 
ušt32_t
 
	gi
 = 0; i < 
	g¿‹s_size
; i++)

72 ià(
	g¿‹s
[
i
] =ğ
cu¼R©e
)

74 
¿‹Ind
 = 
i
;

78 ià(
	g¿‹Ind
 =ğ
¿‹s_size
)

80 
NS_FATAL_ERROR
("Wrong„ate");

83 ià(
	gmi
 > 1 + 
	g•sÚ
)

85 ià(
	g¿‹Ind
 < 
	g¿‹s_size
 - 1)

87 
	gÃxtR©e
 = 
¿‹s
[()
¿‹Ind
 + 1];

90 ià(
	gmi
 < 
	ggamma_d
)

92 
	gi
 = 
¿‹Ind
 - 1;

93 
	gi
 = 0; i < 
	g¿‹Ind
 - 1; i--)

95 ià(
	g¿‹s
[
i
] < 
mi
 * 
	gcu¼R©e
)

97 
	gÃxtR©e
 = 
¿‹s
[
i
];

107 
	gts
 = 
G‘BufãrE¡im©e
(è- 
t_mš
 - 
cu¼R©e
 * 
msd
 / 
¿‹s
[0];

109 ià(
	gts
 > 0)

111 
	gd–ay
 = 
SecÚds
(
ts
);

115 
	gd–ay
 = 
SecÚds
(0);

	@model/algorithms/raahs-client.h

8 #iâdeà
RAAHS_CLIENT_H_


9 
	#RAAHS_CLIENT_H_


	)

11 
	~<ns3/dash-ş›Á.h
>

12 
Çme¥aû
 
	gns3


15 şas 
	cR¯hsCl›Á
 : 
public
 
DashCl›Á


17 
public
:

18 
Ty³Id


19 
G‘Ty³Id
();

21 
R¯hsCl›Á
();

23 
	gvœtu®


24 ~
R¯hsCl›Á
();

26 
vœtu®
 

27 
C®cNextSegm’t
(
ušt32_t
 
cu¼R©e
, ušt32_ˆ& 
ÃxtR©e
, 
Time
 & 
d–ay
);

29 
	g´iv©e
:

	@model/algorithms/sftm-client.cc

8 
	~"sám-ş›Á.h
"

9 
	~<ns3/log.h
>

10 
	~<ns3/simuÏtÜ.h
>

11 
	~<ns3/dash-ş›Á.h
>

13 
NS_LOG_COMPONENT_DEFINE
("SftmClient");

15 
Çme¥aû
 
	gns3


17 
NS_OBJECT_ENSURE_REGISTERED
(
SámCl›Á
);

19 
Ty³Id


20 
	gSámCl›Á
::
G‘Ty³Id
()

22 
Ty³Id
 
tid
 =

23 
Ty³Id
("ns3::SámCl›Á").
S‘P¬’t
<
DashCl›Á
>().
AddCÚ¡ruùÜ
<

24 
SámCl›Á
>();

25  
	gtid
;

28 
	gSámCl›Á
::
SámCl›Á
() :

29 
m_rsá_exûeded
(
çl£
)

35 
SámCl›Á
::~SftmClient()

41 
SámCl›Á
::
C®cNextSegm’t
(
ušt32_t
 
cu¼R©e
, ušt32_ˆ& 
ÃxtR©e
,

42 
Time
 & 
d–ay
)

44 
ušt32_t
 
	g¿‹s
[] =

51 
ušt32_t
 
	g¿‹s_size
 = (
¿‹s
) / (rates[0]);

54 
	gmsd
 = 
MPEG_FRAMES_PER_SEGMENT
 * 
MPEG_TIME_BETWEEN_FRAMES
 / 1000.0;

55 
	gsá
 = 
G‘Segm’tF‘chTime
();

56 
	gtbmt
 = 
m_rg‘_dt
.
G‘SecÚds
();

57 
	gts_ns
 = 
m_£gm’tId
 * 
msd
;

58 
	gts_o
 = 
G‘PÏy”
().
m_äamesPÏyed
 * 
MPEG_TIME_BETWEEN_FRAMES


60 
	grsá
 = 
ts_ns
 - 
ts_o
 - 
tbmt
;

61 
	grho
 = 0.75;

63 
	grsá_s
 = 
rho
 * 
msd
;

64 ià(
	grsá
 < 
	grsá_s
 && !
	gm_rsá_exûeded
)

66 
	grsá
 = 
rsá_s
;

70 
	gm_rsá_exûeded
 = 
Œue
;

73 
	gsám
 = 
¡d
::
mš
(
msd
, 
rsá
è/ 
	gsá
;

75 
ušt32_t
 
	g¿‹Ind
 = 
¿‹s_size
;

76 
ušt32_t
 
	gi
 = 0; i < 
	g¿‹s_size
; i++)

78 ià(
	g¿‹s
[
i
] =ğ
cu¼R©e
)

80 
¿‹Ind
 = 
i
;

84 ià(
	g¿‹Ind
 =ğ
¿‹s_size
)

86 
NS_FATAL_ERROR
("Wrong„ate");

89 
	gec_u
 =

90 
¿‹Ind
 < 
¿‹s_size
 - 1 ?

91 (1.0 * 
¿‹s
[
¿‹Ind
 + 1] -„ates[rateInd]) /„ates[rateInd] :

92 
¡d
::
num”ic_lim™s
<>::
max
();

94 
	gemax_u
 = 0;

95 
ušt32_t
 
	gi
 = 0; i < 
	g¿‹s_size
 - 1; i++)

97 
	ge
 = (1.0 * 
¿‹s
[
i
 + 1] -„ates[i]) /„ates[i];

98 
	gemax_u
 = 
¡d
::
max
(
emax_u
, 
e
);

101 
	ge_u
 = 
¡d
::
mš
(
emax_u
, 2 * 
ec_u
);

103 
	gec_d
 =

104 
¿‹Ind
 > 0 ?

105 (1.0 * 
¿‹s
[
¿‹Ind
] -„ates[rateInd - 1]) /„ates[rateInd] : 1.0;

107 
	gemš_d
 = 
¡d
::
num”ic_lim™s
<>::
max
();

108 
ušt32_t
 
	gi
 = 1; i < 
	g¿‹s_size
; i++)

110 
	ge
 = (1.0 * 
¿‹s
[
i
] -„ates[i - 1]) /„ates[i];

111 
	gemš_d
 = 
¡d
::
mš
(
emš_d
, 
e
);

114 
	ge_d
 = 
¡d
::
max
(2 * 
emš_d
, 
ec_d
);

116 ià(
	gsám
 > 1 + 
	ge_u
 && 
	g¿‹Ind
 < 
	g¿‹s_size
 - 1)

118 
	gÃxtR©e
 = 
¿‹s
[
¿‹Ind
 + 1];

120 ià(
	gsám
 < 1 - 
	ge_d
 && 
	g¿‹Ind
 != 0)

122 
ušt32_t
 
i
 = 0; 
	gi
 < 
	g¿‹Ind
; i++)

124 ià(
	g¿‹s
[
i
] >ğ
sám
 * 
¿‹s
[
¿‹Ind
])

128 
	gÃxtR©e
 = 
¿‹s
[
i
];

132 
	gbmt_mš
 = 0;

133 
	gbmt_c
 = 
G‘BufãrE¡im©e
();

134 
	gb_max
 = 
¿‹s
[
¿‹s_size
 - 1];

135 
	gb_mš
 = 
¿‹s
[0];

136 
	gt_id
 = 
bmt_c
 - 
bmt_mš
 - 
msd
 * 
b_max
 / 
b_mš
;

138 ià(
	gt_id
 > 0)

140 
	gd–ay
 = 
SecÚds
(
t_id
);

144 
	gd–ay
 = 
SecÚds
(0);

	@model/algorithms/sftm-client.h

8 #iâdeà
SFTM_CLIENT_H_


9 
	#SFTM_CLIENT_H_


	)

11 
	~<ns3/dash-ş›Á.h
>

12 
Çme¥aû
 
	gns3


15 şas 
	cSámCl›Á
 : 
public
 
DashCl›Á


17 
public
:

18 
Ty³Id


19 
G‘Ty³Id
();

21 
SámCl›Á
();

23 
	gvœtu®


24 ~
SámCl›Á
();

26 
vœtu®
 

27 
C®cNextSegm’t
(
ušt32_t
 
cu¼R©e
, ušt32_ˆ& 
ÃxtR©e
, 
Time
 & 
d–ay
);

29 
	g´iv©e
:

30 
boŞ
 
m_rsá_exûeded
;

	@model/algorithms/svaa-client.cc

8 
	~"sv¯-ş›Á.h
"

9 
	~<ns3/log.h
>

10 
	~<ns3/simuÏtÜ.h
>

11 
	~<ns3/dash-ş›Á.h
>

13 
NS_LOG_COMPONENT_DEFINE
("SvaaClient");

15 
Çme¥aû
 
	gns3


17 
NS_OBJECT_ENSURE_REGISTERED
(
Sv¯Cl›Á
);

19 
Ty³Id


20 
	gSv¯Cl›Á
::
G‘Ty³Id
()

22 
Ty³Id
 
tid
 =

23 
Ty³Id
("ns3::Sv¯Cl›Á").
S‘P¬’t
<
DashCl›Á
>().
AddCÚ¡ruùÜ
<

24 
Sv¯Cl›Á
>();

25  
	gtid
;

28 
	gSv¯Cl›Á
::
Sv¯Cl›Á
() :

29 
m_m_k_1
(0), 
m_m_k_2
(0), 
m_couÁ”
(0)

35 
	gSv¯Cl›Á
::~
Sv¯Cl›Á
()

41 
Sv¯Cl›Á
::
C®cNextSegm’t
(
ušt32_t
 
cu¼R©e
, ušt32_ˆ& 
ÃxtR©e
,

42 
Time
 & 
d–ay
)

44 
ušt32_t
 
	g¿‹s
[] =

49 
ušt32_t
 
	g¿‹s_size
 = (
¿‹s
) / (rates[0]);

50 
	gdiff
 = 
G‘BufãrDifã»ÁŸl
();

52 
	gq_tk
 = 
G‘BufãrE¡im©e
();

53 
	gq_»f
 = 
m_rg‘_dt
.
G‘SecÚds
();

54 
	gp
 = 1.0;

55 
	gf_q
 = 2 * 
¡d
::
exp
(
p
 * (
q_tk
 - 
q_»f
))

56 / (1 + 
¡d
::
exp
(
p
 * (
q_tk
 - 
q_»f
)));

57 
	gd–
 = 
MPEG_TIME_BETWEEN_FRAMES
 * 
MPEG_FRAMES_PER_SEGMENT
 / 1000.0;

58 
	gf_t
 = 
d–
 / (d– - 
diff
);

59 
	gf_u
 = 1;

61 
	gf
 = 
f_q
 * 
f_t
 * 
f_u
;

63 
	gt_k
 = 
m_b™¿‹E¡im©e
;

65 
	gu_k
 = 
f
 * 
t_k
;

67 
	gm_k
 = 0;

68 ià(
	gdiff
 >ğ0.4 * 
d–
)

70 
m_k
 = 1;

72 ià(
	gdiff
 >ğ0.2 * 
d–
)

74 
m_k
 = 5;

76 ià(
	gdiff
 >= 0)

78 
m_k
 = 15;

82 
	gm_k
 = 20;

85 
	gm
 = (
m_k
 + 
m_m_k_1
 + 
m_m_k_2
) / 3;

86 
	gm_m_k_2
 = 
m_m_k_1
;

87 
	gm_m_k_1
 = 
m_k
;

89 ià(
	gq_tk
 < 
	gq_»f
 / 2)

91 
	gi
 = 
¿‹s_size
 - 1;

92 
	g¿‹s
[
i
] > 
	gt_k
 && 
	gi
 > 0)

94 
	gi
--;

96 
	gÃxtR©e
 = 
¿‹s
[
i
];

97 
	gd–ay
 = 
SecÚds
(0);

100 ià(
	gu_k
 > 
	gcu¼R©e
)

102 
	gm_couÁ”
++;

103 ià(
	gm_couÁ”
 > 
	gm
)

105 
	gi
 = 
¿‹s_size
 - 1;

106 
	g¿‹s
[
i
] > 
	gt_k
 && 
	gi
 > 0)

108 
	gi
--;

110 
	gÃxtR©e
 = 
¿‹s
[
i
];

111 
	gd–ay
 = 
SecÚds
(0);

112 
	gm_couÁ”
 = 0;

116 ià(
	gu_k
 < 
	gcu¼R©e
)

118 
	gm_couÁ”
 = 0;

120 
	gÃxtR©e
 = 
cu¼R©e
;

121 
	gd–ay
 = 
SecÚds
(0);

	@model/algorithms/svaa-client.h

8 #iâdeà
SVAA_CLIENT_H_


9 
	#SVAA_CLIENT_H_


	)

11 
	~<ns3/dash-ş›Á.h
>

12 
Çme¥aû
 
	gns3


15 şas 
	cSv¯Cl›Á
 : 
public
 
DashCl›Á


17 
public
:

18 
Ty³Id


19 
G‘Ty³Id
();

21 
Sv¯Cl›Á
();

23 
	gvœtu®


24 ~
Sv¯Cl›Á
();

26 
vœtu®
 

27 
C®cNextSegm’t
(
ušt32_t
 
cu¼R©e
, ušt32_ˆ& 
ÃxtR©e
, 
Time
 & 
d–ay
);

29 
	g´iv©e
:

30 
m_m_k_1
;

31 
	gm_m_k_2
;

32 
	gm_couÁ”
;

	@model/dash-client.cc

21 
	~<ns3/log.h
>

22 
	~<ns3/uš‹g”.h
>

23 
	~<ns3/tı-sock‘-çùÜy.h
>

24 
	~<ns3/simuÏtÜ.h
>

25 
	~<ns3/š‘-sock‘-add»ss.h
>

26 
	~<ns3/š‘6-sock‘-add»ss.h
>

27 
	~"h‰p-h—d”.h
"

28 
	~"dash-ş›Á.h
"

29 
	~"·¿.h
"

30 
	~<cm©h
>

31 
	~<f¡»am
>

32 
	~<¡dlib.h
>

33 
	~<s¡»am
>

34 
	~<iomª
>

35 
	~"ns3/udp-sock‘.h
"

36 
	~"ns3/udp-sock‘-çùÜy.h
"

39 
NS_LOG_COMPONENT_DEFINE
("DashClient");

40 
usšg
 
Çme¥aû
 
	g¡d
;

42 
	gveùÜ
 <> 
	gvideo_num
;

43 
	gveùÜ
<veùÜ<>> 
	gvideo_£r›s
;

44 
	gš™_bufãr
;

45 
	g£g_Ëngth
;

46 
	g»q_num
;

47 
	gveùÜ
<veùÜ<veùÜ<>>> 
	g´obs
;

48 
	gveùÜ
<veùÜ<>> 
	gbrs
;

49 
	gveùÜ
<veùÜ<>> 
	gdi¡s
;

50 
	gveùÜ
<veùÜ<veùÜ<>>> 
	gvideo_size
;

51 
	gveùÜ
<veùÜ<>> 
	gu£r_£g_size
;

52 
	gveùÜ
<veùÜ<veùÜ<>>> 
	g´ed_šfo
;

53 
	gveùÜ
<veùÜ<veùÜ<>>> 
	gcur_šfo
;

54 
	gveùÜ
<veùÜ<veùÜ<>>> 
	gdr_šfo
;

55 
	gveùÜ
<veùÜ<veùÜ<>>> 
	ggt_šfo
;

56 
	gveùÜ
<
	g¡ršg
> 
	gvideo_Çmes
;

57 
	gveùÜ
<veùÜ<>> 
	gu£r_šfo
;

58 
	g¡d
::
¡ršg
 
te_cŞ
, 
	gte_row
;

59 
	g¡d
::
¡ršg
 
ex³rim’t_dœ
;

60 
	g¡d
::
¡ršg
 
ã©u»_dœ
;

61 
	g¡d
::
¡ršg
 
video_šfo_dœ
="";

62 
	g¡d
::
¡ršg
 
´ob_dœ
="";

63 
	g¡d
::
¡ršg
 
´ob_ov”®l_dœ
="";

64 
	g¡d
::
¡ršg
 
u£r_šfo_fe
="";

65 
	g¡d
::
¡ršg
 
¬—_dœ
="";

66 
	grho
;

67 
	gM
;

68 
	gte_num
;

69 
	g¡d
::
¡ršg
 
mode
="";

72 
	gfœ¡_t
 = 0.0;

73 
	gÏ¡_t
 =0.0;

74 
	gTP
;

76 
Çme¥aû
 
	gns3


79 
NS_OBJECT_ENSURE_REGISTERED
(
DashCl›Á
);

81 
	gDashCl›Á
::
m_couÁObjs
 = 0;

83 
Ty³Id


84 
	gDashCl›Á
::
G‘Ty³Id
()

86 
Ty³Id
 
tid
 =

87 
Ty³Id
("ns3::DashCl›Á").
S‘P¬’t
<
AµliÿtiÚ
>().
AddCÚ¡ruùÜ
<

88 
DashCl›Á
>().
AddA‰ribu‹
("VideoId",

89 "ThId oàthvideØth© i ¶ayed.", 
Uš‹g”V®ue
(0),

90 
MakeUš‹g”AcûssÜ
(&
DashCl›Á
::
m_videoId
),

91 
MakeUš‹g”Check”
<
ušt32_t
>(1)).
AddA‰ribu‹
("Remote",

92 "Thadd»s oàthde¡š©iÚ", 
Add»ssV®ue
(),

93 
MakeAdd»ssAcûssÜ
(&
DashCl›Á
::
m_³”
), 
MakeAdd»ssCheck”
()).
AddA‰ribu‹
(

95 
Ty³IdV®ue
(
TıSock‘FaùÜy
::
G‘Ty³Id
()),

96 
MakeTy³IdAcûssÜ
(&
DashCl›Á
::
m_tid
), 
MakeTy³IdCheck”
()).
AddA‰ribu‹
(

97 "T¬g‘Dt", "Thrg‘ bufãršgime", 
TimeV®ue
(
Time
("35s")),

98 
MakeTimeAcûssÜ
(&
DashCl›Á
::
m_rg‘_dt
), 
MakeTimeCheck”
()).
AddA‰ribu‹
(

100 
TimeV®ue
(
Time
("10s")), 
MakeTimeAcûssÜ
(&
DashCl›Á
::
m_wšdow
),

101 
MakeTimeCheck”
()

103 ).
AddT¿ûSourû
("Tx", "A‚ew…acket is created‡nd is sent",

104 
MakeT¿ûSourûAcûssÜ
(&
DashCl›Á
::
m_txT¿û
));

105  
	gtid
;

108 
	gDashCl›Á
::
DashCl›Á
() :

109 
m_¿‹Chªges
(0), 
m_rg‘_dt
("35s"), 
m_b™¿‹E¡im©e
(0.0), 
m_£gm’tId
(

110 0), 
m_sock‘
(0), 
m_cÚÃùed
(
çl£
), 
m_tÙBy‹s
(0), 
m_¡¬‹dReûivšg
(

111 
SecÚds
(0)), 
m_sumDt
(SecÚds(0)), 
m_Ï¡Dt
(SecÚds(-1)), 
m_id
(

112 
m_couÁObjs
++), 
m_»que¡Time
("0s"), 
m_£gm’t_by‹s
(0), 
m_b™R©e
(

113 50000), 
m_wšdow
(
SecÚds
(10)), 
m_£gm’tF‘chTime
(Seconds(0))

115 
NS_LOG_FUNCTION
(
this
);

116 
	gm_·r£r
.
S‘Aµ
(
this
);

119 
	gDashCl›Á
::~
DashCl›Á
()

121 
NS_LOG_FUNCTION
(
this
);

124 
	gPŒ
<
	gSock‘
>

125 
	gDashCl›Á
::
G‘Sock‘
() const

127 
NS_LOG_FUNCTION
(
this
);

128  
	gm_sock‘
;

132 
	gDashCl›Á
::
DoDi¥o£
()

134 
NS_LOG_FUNCTION
(
this
);

136 
	gm_sock‘
 = 0;

138 
	gAµliÿtiÚ
::
DoDi¥o£
();

143 
	gDashCl›Á
::
S¹AµliÿtiÚ
()

148 
NS_LOG_FUNCTION
(
this
);

152 ià(!
	gm_sock‘
)

154 
	gm_sock‘
 = 
Sock‘
::
C»©eSock‘
(
G‘Node
(), 
m_tid
);

167 ià(
	gIÃt6Sock‘Add»ss
::
IsM©chšgTy³
(
m_³”
))

169 
m_sock‘
->
Bšd6
();

171 ià(
	gIÃtSock‘Add»ss
::
IsM©chšgTy³
(
m_³”
))

173 
m_sock‘
->
Bšd
();

176 
	gm_sock‘
->
CÚÃù
(
m_³”
);

177 
	gm_sock‘
->
S‘RecvC®lback
(
MakeC®lback
(&
DashCl›Á
::
HªdËR—d
, 
this
));

178 
	gm_sock‘
->
S‘CÚÃùC®lback
(

179 
MakeC®lback
(&
DashCl›Á
::
CÚÃùiÚSucûeded
, 
this
),

180 
MakeC®lback
(&
DashCl›Á
::
CÚÃùiÚFaed
, 
this
));

181 
	gm_sock‘
->
S‘S’dC®lback
(
MakeC®lback
(&
DashCl›Á
::
D©aS’d
, 
this
));

186 
	gDashCl›Á
::
StİAµliÿtiÚ
()

188 
NS_LOG_FUNCTION
(
this
);

190 ià(
	gm_sock‘
 != 0)

192 
m_sock‘
->
Clo£
();

193 
	gm_cÚÃùed
 = 
çl£
;

194 
	gm_¶ay”
.
	gm_¡©e
 = 
MPEG_PLAYER_DONE
;

198 
NS_LOG_WARN
("DashClient found‚ull socketo close in StopApplication");

204 
	gDashCl›Á
::
Reque¡Segm’t
()

208 
NS_LOG_FUNCTION
(
this
);

210 ià(
	gm_cÚÃùed
 =ğ
çl£
)

217 
	gsum_by‹s
=0;

224 
	gsum_by‹s
 = 
u£r_£g_size
[
m_id
][
m_£gm’tId
];

227 
	gsum_by‹s
 = 
sum_by‹s
/1288.0;

229 
	g·ck‘_numb”
=0;

230 ià(
	gsum_by‹s
-(sum_bytes) ==0)

231 
·ck‘_numb”
 = (
sum_by‹s
);

233 
	g·ck‘_numb”
 = (
sum_by‹s
)+1;

236 
	gvideo_£r›s
[
m_id
][
m_£gm’tId
]=
·ck‘_numb”
;

241 if(
	g·ck‘_numb”
==0){

242 
video_£r›s
[
m_id
][
m_£gm’tId
]=1;

243 
	g·ck‘_numb”
=1 ;

246 
	gcout
<<"6"<<","<<
	gm_id
<<","<<
	gm_£gm’tId
<<","<<
	gSimuÏtÜ
::
Now
().
G‘SecÚds
()<<
’dl
;

248 
	gcout
<<"5,"<<
	gm_id
<<","<<
	gm_£gm’tId
<<","<<
	g·ck‘_numb”
<<
	g’dl
;

250 
	gPŒ
<
	gPack‘
> 
	g·ck‘
 = 
C»©e
<
Pack‘
>(100);

251 
HTTPH—d”
 
	gh‰pH—d”
;

252 
	gh‰pH—d”
.
S‘Seq
(1);

253 
	gh‰pH—d”
.
S‘Mes§geTy³
(
HTTP_REQUEST
);

254 
	gh‰pH—d”
.
S‘VideoId
(
m_videoId
);

255 
	gh‰pH—d”
.
S‘ResŞutiÚ
(
m_b™R©e
);

256 
	gh‰pH—d”
.
S‘Segm’tId
(
m_£gm’tId
++);

257 
	gh‰pH—d”
.
S‘Pack‘Num
(
·ck‘_numb”
);

258 
	g·ck‘
->
AddH—d”
(
h‰pH—d”
);

261 
	g»s
 = 0;

262 ià(((è(
	g»s
 = 
m_sock‘
->
S’d
(
·ck‘
))è!ğ·ck‘->
G‘Size
())

264 
NS_FATAL_ERROR
(

265 "Oh oh. Couldn'ˆ£nd…ack‘!„es=" << 
»s
 << " size=" << 
·ck‘
->
G‘Size
());

268 
	gm_»que¡Time
 = 
SimuÏtÜ
::
Now
();

269 
	gm_£gm’t_by‹s
 = 0;

282 
	gDashCl›Á
::
HªdËR—d
(
PŒ
<
Sock‘
> 
sock‘
)

284 
NS_LOG_FUNCTION
(
this
 << 
sock‘
);

286 
	gm_·r£r
.
R—dSock‘
(
sock‘
);

291 
	gDashCl›Á
::
CÚÃùiÚSucûeded
(
PŒ
<
Sock‘
> 
sock‘
)

293 
NS_LOG_FUNCTION
(
this
 << 
sock‘
);

294 
NS_LOG_LOGIC
("DashClient Connection succeeded");

295 
	gm_cÚÃùed
 = 
Œue
;

296 
Reque¡Segm’t
();

300 
	gDashCl›Á
::
CÚÃùiÚFaed
(
PŒ
<
Sock‘
> 
sock‘
)

302 
NS_LOG_FUNCTION
(
this
 << 
sock‘
);
NS_LOG_LOGIC
(

307 
	gDashCl›Á
::
D©aS’d
(
PŒ
<
Sock‘
>, 
ušt32_t
)

309 
NS_LOG_FUNCTION
(
this
);

311 ià(
	gm_cÚÃùed
)

314 
NS_LOG_INFO
("Something was sent");

319 
NS_LOG_INFO
("NOT CONNECTED!!!!");

324 
	gDashCl›Á
::
Mes§geReûived
(
Pack‘
 
mes§ge
)

326 
MPEGH—d”
 
m³gH—d”
;

327 
HTTPH—d”
 
	gh‰pH—d”
;

329 
	gäame_num
++;

332 
	gm_¶ay”
.
G‘ID
(
m_id
);

333 
	gm_¶ay”
.
ReûiveF¿me
(&
mes§ge
);

335 
	gm_£gm’t_by‹s
 +ğ
mes§ge
.
G‘Size
();

336 
	gm_tÙBy‹s
 +ğ
mes§ge
.
G‘Size
();

338 
	g¡d
::
cout
<<"2,"<<
m_id
<<","<<
SimuÏtÜ
::
Now
().
G‘SecÚds
()<<
¡d
::
’dl
;

340 if(
	gäame_num
==1)

341 
fœ¡_t
 = (
SimuÏtÜ
::
Now
().
G‘SecÚds
());

343 if(
	gäame_num
==
video_£r›s
[
m_id
][
v_num
]){

345 
Ï¡_t
 = (
SimuÏtÜ
::
Now
().
G‘SecÚds
());

346 
	gTP
 = 
äame_num
*1354*8.0 / (
Ï¡_t
-
fœ¡_t
);

347 
	gcout
 << "------TP------"<<
	gTP
<<
	g’dl
;

348 
	gv_num
++;

349 if(
	gv_num
!=()
video_£r›s
[
m_id
].
size
())

350 
tmp_num
=
äame_num
;

351 
	gäame_num
=0;

352 
	g£g_num
++;

354 
	gmes§ge
.
RemoveH—d”
(
m³gH—d”
);

355 
	gmes§ge
.
RemoveH—d”
(
h‰pH—d”
);

359 
	gm_¶ay”
.
	gm_¡©e
)

361 
	gMPEG_PLAYER_PLAYING
:

362 
m_sumDt
 +ğ
m_¶ay”
.
G‘R—lPÏyTime
(
m³gH—d”
.
G‘PÏybackTime
());

364 
	gMPEG_PLAYER_PAUSED
:

366 
	gMPEG_PLAYER_DONE
:

368 
	gMPEG_PLAYER_NOT_STARTED
:

371 
NS_FATAL_ERROR
("WRONG STATE");

376 if(
	gv_num
>0 && (
	gtmp_num
 =ğ
video_£r›s
[
m_id
][
v_num
-1]))

378 
tmp_num
=0;

380 
	gm_£gm’tF‘chTime
 = 
SimuÏtÜ
::
Now
(è- 
m_»que¡Time
;

381 
NS_LOG_INFO
(

382 
SimuÏtÜ
::
Now
().
G‘SecÚds
(è<< " by‹s: " << 
m_£gm’t_by‹s
 << " segm’tTime: " << 
m_£gm’tF‘chTime
.GetSeconds() << " segmentRate: " << 8 * m_segment_bytes / m_segmentFetchTime.GetSeconds());

384 
AddB™R©e
(
SimuÏtÜ
::
Now
(),

385 8 * 
m_£gm’t_by‹s
 / 
m_£gm’tF‘chTime
.
G‘SecÚds
());

387 
Time
 
	gcu¼Dt
 = 
m_¶ay”
.
G‘R—lPÏyTime
(
m³gH—d”
.
G‘PÏybackTime
());

389 
LogBufãrLev–
(
cu¼Dt
);

391 
ušt32_t
 
	gŞd
 = 
m_b™R©e
;

394 
Time
 
	gbufãrD–ay
;

399 
ušt32_t
 
	g´evB™¿‹
 = 
m_b™R©e
;

400 
	gDashCl›Á
::
C®cNextSegm’t
(
´evB™¿‹
, 
m_b™R©e
, 
bufãrD–ay
);

402 ià(
	g´evB™¿‹
 !ğ
m_b™R©e
)

404 
m_¿‹Chªges
++;

408 if(
	g£g_num
 <ğ
š™_bufãr
+
»q_num
){

410 
Reque¡Segm’t
();

411 
	gm_¶ay”
.
SchduËBufãrWakeup
(
bufãrD–ay
, 
this
);

416 
	gm_¶ay”
.
SchduËBufãrWakeup
(
bufãrD–ay
, 
this
);

419 
NS_LOG_INFO
(

420 "===ğLa¡ f¿m»ûived. Reque¡šg segm’ˆ" << 
m_£gm’tId
);

423 
NS_LOG_INFO
(

424 "!@#$#@!$@#\t" << 
SimuÏtÜ
::
Now
().
G‘SecÚds
(è<< " old: " << 
Şd
 << "‚ew: " << 
m_b™R©e
 << ": " << 
cu¼Dt
.G‘SecÚds(è<< " dt: " << (cu¼Dˆ- 
m_Ï¡Dt
).GetSeconds());

426 
	gm_Ï¡Dt
 = 
cu¼Dt
;

433 
	gDashCl›Á
::
C®cNextSegm’t
(
ušt32_t
 
cu¼R©e
, ušt32_ˆ& 
ÃxtR©e
,

434 
Time
 & 
d–ay
)

442 
	gÃxtR©e
 = 
cu¼R©e
;

443 
	gd–ay
 = 
SecÚds
(0);

447 
	gDashCl›Á
::
G‘Sts
()

449 
¡d
::
cout
 << " InterruptionTime: "

450 << 
m_¶ay”
.
m_š‹¼u±iÚ_time
.
G‘SecÚds
() << " interruptions: "

451 << 
m_¶ay”
.
m_š‹¼ru±iÚs
 << "‡vgRate: "

452 << (1.0 * 
m_¶ay”
.
m_tÙ®R©e
è/ m_¶ay”.
m_äamesPÏyed


453 << " mšR©e: " << 
m_¶ay”
.
m_mšR©e
 << " AvgDt: "

454 << 
m_sumDt
.
G‘SecÚds
(è/ 
m_¶ay”
.
m_äamesPÏyed
 << " changes: "

455 << 
m_¿‹Chªges
 << 
¡d
::
’dl
;

460 
	gDashCl›Á
::
LogBufãrLev–
(
Time
 
t
)

462 
m_bufãrS‹
[
SimuÏtÜ
::
Now
()] = 
t
;

463 
	g¡d
::
m­
<
Time
, 
	gTime
>::
™”©Ü
 
™
 = 
m_bufãrS‹
.
begš
();

464 
	g™
 !ğ
m_bufãrS‹
.
’d
(); ++it)

466 ià(
	g™
->
	gfœ¡
 < (
	gSimuÏtÜ
::
Now
(è- 
m_wšdow
))

468 
m_bufãrS‹
.
”a£
(
™
->
fœ¡
);

474 
	gDashCl›Á
::
G‘BufãrE¡im©e
()

476 
sum
 = 0;

477 
	gcouÁ
 = 0;

478 
	g¡d
::
m­
<
Time
, 
	gTime
>::
™”©Ü
 
™
 = 
m_bufãrS‹
.
begš
();

479 
	g™
 !ğ
m_bufãrS‹
.
’d
(); ++it)

481 
	gsum
 +ğ
™
->
£cÚd
.
G‘SecÚds
();

482 
	gcouÁ
++;

484  
	gsum
 / 
	gcouÁ
;

488 
	gDashCl›Á
::
G‘BufãrDifã»ÁŸl
()

490 
¡d
::
m­
<
Time
, 
	gTime
>::
™”©Ü
 
™
 = 
m_bufãrS‹
.
’d
();

492 ià(
	g™
 =ğ
m_bufãrS‹
.
begš
())

497 
	g™
--;

498 
Time
 
	gÏ¡
 = 
™
->
£cÚd
;

500 ià(
	g™
 =ğ
m_bufãrS‹
.
begš
())

505 
	g™
--;

506 
Time
 
	g´ev
 = 
™
->
£cÚd
;

507  (
	gÏ¡
 - 
	g´ev
).
G‘SecÚds
();

511 
	gDashCl›Á
::
G‘Segm’tF‘chTime
()

513  
m_£gm’tF‘chTime
.
G‘SecÚds
();

517 
	gDashCl›Á
::
AddB™R©e
(
Time
 
time
, 
b™¿‹
)

519 
	gm_b™¿‹s
[
time
] = 
b™¿‹
;

520 
	gsum
 = 0;

521 
	gcouÁ
 = 0;

522 
	g¡d
::
m­
<
Time
, >::
™”©Ü
 
™
 = 
m_b™¿‹s
.
begš
();

523 
	g™
 !ğ
m_b™¿‹s
.
’d
(); ++it)

525 ià(
	g™
->
	gfœ¡
 < (
	gSimuÏtÜ
::
Now
(è- 
m_wšdow
))

527 
m_b™¿‹s
.
”a£
(
™
->
fœ¡
);

531 
	gsum
 +ğ
™
->
£cÚd
;

532 
	gcouÁ
++;

535 
	gm_b™¿‹E¡im©e
 = 
sum
 / 
couÁ
;

	@model/dash-client.h

21 #iâdeà
DASH_CLIENT_H


22 
	#DASH_CLIENT_H


	)

24 
	~"ns3/­¶iÿtiÚ.h
"

25 
	~"ns3/±r.h
"

26 
	~"ns3/sock‘.h
"

27 
	~"m³g-¶ay”.h
"

28 
	~"ns3/Œaûd-ÿÎback.h
"

29 
	~"h‰p-·r£r.h
"

32 
Çme¥aû
 
	gns3


60 şas 
	cDashCl›Á
 : 
public
 
AµliÿtiÚ


62 
ä›nd
 
şass
 
M³gPÏy”
;

63 
ä›nd
 
şass
 
	gH‰pP¬£r
;

64 
	gpublic
:

65 
Ty³Id


66 
G‘Ty³Id
();

68 
DashCl›Á
();

70 
	gvœtu®


71 ~
DashCl›Á
();

76 
	gPŒ
<
	gSock‘
>

77 
G‘Sock‘
() const;

83 
G‘Sts
();

90 
šlše
 
	gM³gPÏy”
 &

91 
G‘PÏy”
()

93  
	gm_¶ay”
;

96 
	g´Ùeùed
:

97 
vœtu®
 

98 
DoDi¥o£
();

100 
šlše


101 
G‘B™R©eE¡im©e
()

103  
	gm_b™¿‹E¡im©e
;

106 
G‘BufãrDifã»ÁŸl
();

109 
AddB™R©e
(
Time
 
time
, 
b™¿‹
);

112 
G‘BufãrE¡im©e
();

115 
G‘Segm’tF‘chTime
();

117 
	g¡d
::
m­
<
Time
, 
	gTime
> 
	gm_bufãrS‹
;

118 
ušt32_t
 
	gm_¿‹Chªges
;

119 
Time
 
	gm_rg‘_dt
;

120 
	g¡d
::
m­
<
Time
, > 
	gm_b™¿‹s
;

121 
	gm_b™¿‹E¡im©e
;

122 
ušt32_t
 
	gm_£gm’tId
;

124 
	g´iv©e
:

132 
Reque¡Segm’t
();

141 
Mes§geReûived
(
Pack‘
 
mes§ge
);

144 
vœtu®
 

145 
S¹AµliÿtiÚ
();

146 
vœtu®
 

147 
StİAµliÿtiÚ
();

149 
CÚÃùiÚSucûeded
(
PŒ
<
Sock‘
> 
sock‘
);

151 
CÚÃùiÚFaed
(
PŒ
<
Sock‘
> 
sock‘
);

153 
D©aS’d
(
PŒ
<
Sock‘
>, 
ušt32_t
);

155 
HªdËR—d
(
PŒ
<
Sock‘
>);

156 
vœtu®
 

157 
C®cNextSegm’t
(
ušt32_t
 
cu¼R©e
, ušt32_ˆ& 
ÃxtR©e
, 
Time
 & 
d–ay
);

159 
LogBufãrLev–
(
Time
 
t
);

160 
šlše


161 
S‘Wšdow
(
Time
 
time
)

163 
	gm_wšdow
 = 
time
;

166 
M³gPÏy”
 
	gm_¶ay”
;

167 
H‰pP¬£r
 
	gm_·r£r
;

168 
	gPŒ
<
	gSock‘
> 
	gm_sock‘
;

169 
Add»ss
 
	gm_³”
;

170 
boŞ
 
	gm_cÚÃùed
;

171 
ušt32_t
 
	gm_tÙBy‹s
;

172 
Ty³Id
 
	gm_tid
;

173 
	gT¿ûdC®lback
<
	gPŒ
<cÚ¡ 
	gPack‘
> > 
	gm_txT¿û
;

174 
ušt32_t
 
	gm_videoId
;

175 
Time
 
	gm_¡¬‹dReûivšg
;

176 
Time
 
	gm_sumDt
;

177 
Time
 
	gm_Ï¡Dt
;

178 
	gm_couÁObjs
;

179 
	gm_id
;

180 
	gv_num
=0;

181 
	gäame_num
=0;

182 
	g£g_num
=0;

183 
	gæag
=0;

184 
	gtmp_num
=0;

185 
Time
 
	gm_»que¡Time
;

186 
ušt32_t
 
	gm_£gm’t_by‹s
;

187 
ušt32_t
 
	gm_b™R©e
;

188 
Time
 
	gm_wšdow
;

189 
Time
 
	gm_£gm’tF‘chTime
;

	@model/dash-server.cc

21 
	~"ns3/add»ss.h
"

22 
	~"ns3/add»ss-uts.h
"

23 
	~"ns3/log.h
"

24 
	~"ns3/š‘-sock‘-add»ss.h
"

25 
	~"ns3/š‘6-sock‘-add»ss.h
"

26 
	~"ns3/node.h
"

27 
	~"ns3/sock‘.h
"

28 
	~"ns3/udp-sock‘.h
"

29 
	~"ns3/simuÏtÜ.h
"

30 
	~"ns3/sock‘-çùÜy.h
"

31 
	~"ns3/·ck‘.h
"

32 
	~"ns3/Œaû-sourû-acûssÜ.h
"

33 
	~"ns3/udp-sock‘-çùÜy.h
"

34 
	~"dash-£rv”.h
"

35 
	~"h‰p-h—d”.h
"

36 
	~"m³g-h—d”.h
"

37 
	~<ns3/¿ndom-v¬ŸbË-¡»am.h
>

38 
	~<ns3/tı-sock‘.h
>

39 
	~<ns3/doubË.h
>

40 
	~"·¿.h
"

41 
usšg
 
Çme¥aû
 
	g¡d
;

44 
Çme¥aû
 
	gns3


46 
NS_LOG_COMPONENT_DEFINE
("DashServer");

47 
NS_OBJECT_ENSURE_REGISTERED
(
DashS”v”
);

49 
Ty³Id


50 
	gDashS”v”
::
G‘Ty³Id
()

52 
Ty³Id
 
tid
 =

53 
Ty³Id
("ns3::DashS”v”").
S‘P¬’t
<
AµliÿtiÚ
>().
AddCÚ¡ruùÜ
<

54 
DashS”v”
>().
AddA‰ribu‹
("Local",

55 "ThAdd»s Ú whichØBšdhrx sock‘.", 
Add»ssV®ue
(),

56 
MakeAdd»ssAcûssÜ
(&
DashS”v”
::
m_loÿl
), 
MakeAdd»ssCheck”
()).
AddA‰ribu‹
(

58 
Ty³IdV®ue
(
UdpSock‘FaùÜy
::
G‘Ty³Id
()),

59 
MakeTy³IdAcûssÜ
(&
DashS”v”
::
m_tid
), 
MakeTy³IdCheck”
()).
AddT¿ûSourû
(

61 
MakeT¿ûSourûAcûssÜ
(&
DashS”v”
::
m_rxT¿û
));

62  
	gtid
;

65 
	gDashS”v”
::
DashS”v”
()

67 
NS_LOG_FUNCTION
(
this
);

68 
	gm_sock‘
 = 0;

69 
	gm_tÙ®Rx
 = 0;

72 
	gDashS”v”
::~
DashS”v”
()

74 
NS_LOG_FUNCTION
(
this
);

77 
	gPŒ
<
	gSock‘
>

78 
	gDashS”v”
::
G‘Li¡’šgSock‘
() const

80 
NS_LOG_FUNCTION
(
this
);

81  
	gm_sock‘
;

84 
	g¡d
::
li¡
<
PŒ
<
Sock‘
> >

85 
DashS”v”
::
G‘Acû±edSock‘s
() const

87 
NS_LOG_FUNCTION
(
this
);

88  
	gm_sock‘Li¡
;

92 
	gDashS”v”
::
DoDi¥o£
()

94 
NS_LOG_FUNCTION
(
this
);

95 
	gm_sock‘
 = 0;

96 
	gm_sock‘Li¡
.
ş—r
();

99 
	gAµliÿtiÚ
::
DoDi¥o£
();

104 
	gDashS”v”
::
S¹AµliÿtiÚ
()

106 
NS_LOG_FUNCTION
(
this
);

108 ià(!
	gm_sock‘
)

110 
	gm_sock‘
 = 
Sock‘
::
C»©eSock‘
(
G‘Node
(), 
m_tid
);

111 
	gm_sock‘
->
Bšd
(
m_loÿl
);

112 
	gm_sock‘
->
Li¡’
();

114 ià(
	gadd»ssUts
::
IsMuÉiÿ¡
(
m_loÿl
))

116 
PŒ
<
UdpSock‘
> 
udpSock‘
 = 
DyÇmicCa¡
<UdpSock‘>(
m_sock‘
);

117 ià(
	gudpSock‘
)

120 
	gudpSock‘
->
MuÉiÿ¡JošGroup
(0, 
m_loÿl
);

124 
NS_FATAL_ERROR
("Error: joining multicast on‡‚on-UDP socket");

129 
	gm_sock‘
->
S‘RecvC®lback
(
MakeC®lback
(&
DashS”v”
::
HªdËR—d
, 
this
));

131 
	gm_sock‘
->
S‘Acû±C®lback
(

132 
MakeNuÎC®lback
<
boŞ
, 
PŒ
<
Sock‘
>, cÚ¡ 
Add»ss
 &>(),

133 
MakeC®lback
(&
DashS”v”
::
HªdËAcû±
, 
this
));

134 
	gm_sock‘
->
S‘Clo£C®lbacks
(

135 
MakeC®lback
(&
DashS”v”
::
HªdËP“rClo£
, 
this
),

136 
MakeC®lback
(&
DashS”v”
::
HªdËP“rE¼Ü
, 
this
));

140 
	gDashS”v”
::
StİAµliÿtiÚ
()

142 
NS_LOG_FUNCTION
(
this
);

143 !
	gm_sock‘Li¡
.
em±y
())

145 
	gPŒ
<
	gSock‘
> 
	gacû±edSock‘
 = 
m_sock‘Li¡
.
äÚt
();

146 
	gm_sock‘Li¡
.
pİ_äÚt
();

147 
	gacû±edSock‘
->
Clo£
();

149 ià(
	gm_sock‘
)

151 
	gm_sock‘
->
Clo£
();

152 
	gm_sock‘
->
S‘RecvC®lback
(
MakeNuÎC®lback
<, 
PŒ
<
Sock‘
> >());

157 
	gDashS”v”
::
HªdËR—d
(
PŒ
<
Sock‘
> 
sock‘
)

159 
NS_LOG_FUNCTION
(
this
 << 
sock‘
);

160 
	gPŒ
<
	gPack‘
> 
	g·ck‘
;

161 
Add»ss
 
	gäom
;

162 (
	g·ck‘
 = 
sock‘
->
RecvFrom
(
äom
)))

164 ià(
·ck‘
->
G‘Size
() == 0)

168 
	gm_tÙ®Rx
 +ğ
·ck‘
->
G‘Size
();

170 
HTTPH—d”
 
	gh—d”
;

171 
	g·ck‘
->
RemoveH—d”
(
h—d”
);

175 
S’dSegm’t
(
h—d”
.
G‘VideoId
(), h—d”.
G‘ResŞutiÚ
(),

176 
h—d”
.
G‘Segm’tId
(),h—d”.
G‘Pack‘Num
(), 
sock‘
);

178 ià(
	gIÃtSock‘Add»ss
::
IsM©chšgTy³
(
äom
))

180 
NS_LOG_INFO
(

181 "Aˆtim" << 
SimuÏtÜ
::
Now
 ().
G‘SecÚds
 (è<< " ·ck‘ sšk„eûived " << 
·ck‘
->
G‘Size
 (è<< " by‹ äom " << 
IÃtSock‘Add»ss
::
CÚv”tFrom
(
äom
).
G‘Ipv4
 (è<< "…Üˆ" << IÃtSock‘Add»ss::CÚv”tFrom (äom).
G‘PÜt
 (è<< "Ù® Rx " << 
m_tÙ®Rx
 << " bytes");

183 ià(
	gIÃt6Sock‘Add»ss
::
IsM©chšgTy³
(
äom
))

185 
NS_LOG_INFO
(

186 "Aˆtim" << 
SimuÏtÜ
::
Now
 ().
G‘SecÚds
 (è<< " ·ck‘ sšk„eûived " << 
·ck‘
->
G‘Size
 (è<< " by‹ äom " << 
IÃt6Sock‘Add»ss
::
CÚv”tFrom
(
äom
).
G‘Ipv6
 (è<< "…Üˆ" << IÃt6Sock‘Add»ss::CÚv”tFrom (äom).
G‘PÜt
 (è<< "Ù® Rx " << 
m_tÙ®Rx
 << " bytes");

188 
m_rxT¿û
(
·ck‘
, 
äom
);

193 
	gDashS”v”
::
HªdËP“rClo£
(
PŒ
<
Sock‘
> 
sock‘
)

195 
NS_LOG_FUNCTION
(
this
 << 
sock‘
);

199 
	gDashS”v”
::
HªdËP“rE¼Ü
(
PŒ
<
Sock‘
> 
sock‘
)

201 
NS_LOG_FUNCTION
(
this
 << 
sock‘
);

205 
	gDashS”v”
::
HªdËAcû±
(
PŒ
<
Sock‘
> 
s
, cÚ¡ 
Add»ss
& 
äom
)

207 
NS_LOG_FUNCTION
(
this
 << 
s
 << 
äom
);

208 
	gs
->
S‘RecvC®lback
(
MakeC®lback
(&
DashS”v”
::
HªdËR—d
, 
this
));

209 
	gs
->
S‘S’dC®lback
(
MakeC®lback
(&
DashS”v”
::
D©aS’d
, 
this
));

210 
	gm_sock‘Li¡
.
push_back
(
s
);

215 
	gDashS”v”
::
D©aS’d
(
PŒ
<
Sock‘
> 
sock‘
, 
ušt32_t
)

217 
NS_LOG_FUNCTION
(
this
);

218 
	g¡d
::
m­
<
PŒ
<
Sock‘
>, std::
queue
<
Pack‘
> >::
™”©Ü
 
™”
 =

219 
m_queues
.
begš
(); 
	g™”
 !ğm_queues.
’d
(); ++iter)

221 
HTTPH—d”
 
	gh‰pH—d”
;

222 
MPEGH—d”
 
	gm³gH—d”
;

224 ià(
	g™”
->
	g£cÚd
.
size
())

226 
	gPŒ
<
	gPack‘
> 
	gäame
 = 
™”
->
£cÚd
.
äÚt
().
Cİy
();

228 
	gäame
->
RemoveH—d”
(
m³gH—d”
);

229 
	gäame
->
RemoveH—d”
(
h‰pH—d”
);

231 
NS_LOG_INFO
(

232 "VidId: " << 
h‰pH—d”
.
G‘VideoId
(è<< "„xAvğ" << 
™”
->
fœ¡
->
G‘RxAvaabË
(è<< " queueğ"<< i‹r->
£cÚd
.
size
(è<< "„esğ" << h‰pH—d”.
G‘ResŞutiÚ
());

235 !
	gm_queues
[
sock‘
].
em±y
())

238 
	gby‹s
;

239 
	gPŒ
<
	gPack‘
> 
	gäame
 = 
m_queues
[
sock‘
].
äÚt
().
Cİy
();

241 
	g¡d
::
cout
<<"1,"<<
sock‘
<<","<<
SimuÏtÜ
::
Now
().
G‘SecÚds
()<<
¡d
::
’dl
;

242 ià((
	gby‹s
 = 
sock‘
->
S’d
(
äame
)è!ğ(èäame->
G‘Size
())

244 
¡d
::
cout
<<"Could‚Ù s’d f¿me"<<¡d::
’dl
;

245 
NS_LOG_INFO
("Could‚ot send frame");

246 ià(
	gby‹s
 != -1)

248 
NS_FATAL_ERROR
("Oops, we sent half‡ frame :(");

253 
	gm_queues
[
sock‘
].
pİ
();

256 
NS_LOG_INFO
("DATA WAS JUST SENT!!!");

261 
	gDashS”v”
::
S’dSegm’t
(
ušt32_t
 
video_id
, ušt32_ˆ
»sŞutiÚ
,

262 
ušt32_t
 
£gm’t_id
,ušt32_ˆ
·ck‘_num
, 
PŒ
<
Sock‘
> 
sock‘
)

277 
	gv_num
[
video_id
]++;

279 
	gavg_·ck‘size
 = 
»sŞutiÚ
 / (50 * 8);

281 
HTTPH—d”
 
	gh‰p_h—d”_tmp
;

282 
MPEGH—d”
 
	gm³g_h—d”_tmp
;

284 
	gPŒ
<
	gUnifÜmRªdomV¬ŸbË
> 
	gäame_size_g’
 = 
C»©eObjeù
<
UnifÜmRªdomV¬ŸbË
> ();

286 
	gäame_size_g’
->
S‘A‰ribu‹
 ("Mš", 
DoubËV®ue
 (1288));

295 
	gäame_size_g’
->
S‘A‰ribu‹
 ("Max", 
DoubËV®ue
 (1288));

299 if(
	g·ck‘_num
==1){

300 
äame_size_g’
->
S‘A‰ribu‹
 ("Mš", 
DoubËV®ue
 (0.001));

301 
	gäame_size_g’
->
S‘A‰ribu‹
 ("Max", 
DoubËV®ue
 (0.001));

305 
ušt32_t
 
	gf_id
 = 0; f_id < 
	g·ck‘_num
; f_id++)

307 
ušt32_t
 
	gäame_size
 = (è
äame_size_g’
->
G‘V®ue
();

312 
HTTPH—d”
 
	gh‰p_h—d”
;

313 
	gh‰p_h—d”
.
S‘Mes§geTy³
(
HTTP_RESPONSE
);

314 
	gh‰p_h—d”
.
S‘VideoId
(
video_id
);

315 
	gh‰p_h—d”
.
S‘ResŞutiÚ
(
»sŞutiÚ
);

316 
	gh‰p_h—d”
.
S‘Segm’tId
(
£gm’t_id
);

318 
MPEGH—d”
 
	gm³g_h—d”
;

319 
	gm³g_h—d”
.
S‘F¿meId
(
f_id
);

320 
	gm³g_h—d”
.
S‘PÏybackTime
(

321 
MliSecÚds
(

322 (
f_id
 + (
£gm’t_id
 * 
MPEG_FRAMES_PER_SEGMENT
))

323 * 
MPEG_TIME_BETWEEN_FRAMES
));

329 
	gm³g_h—d”
.
S‘Ty³
('B');

330 
	gm³g_h—d”
.
S‘Size
(
äame_size
);

332 
	gPŒ
<
	gPack‘
> 
	gäame
 = 
C»©e
<
Pack‘
>(
äame_size
);

333 
	gäame
->
AddH—d”
(
h‰p_h—d”
);

334 
	gäame
->
AddH—d”
(
m³g_h—d”
);

335 
NS_LOG_INFO
(

336 "SENDING PACKET " << 
f_id
 << " " << 
äame
->
G‘Size
(è<< "„es=" << 
h‰p_h—d”
.
G‘ResŞutiÚ
(è<< " size=" << 
m³g_h—d”
.G‘Size(è<< "‡vg=" << 
avg_·ck‘size
);

338 
	gm_queues
[
sock‘
].
push
(*
äame
);

340 
D©aS’d
(
sock‘
, 0);

	@model/dash-server.h

21 #iâdeà
DASH_SERVER_H


22 
	#DASH_SERVER_H


	)

24 
	~"ns3/­¶iÿtiÚ.h
"

25 
	~"ns3/ev’t-id.h
"

26 
	~"ns3/±r.h
"

27 
	~"ns3/Œaûd-ÿÎback.h
"

28 
	~"ns3/add»ss.h
"

29 
	~<m­
>

30 
	~<queue
>

32 
Çme¥aû
 
	gns3


35 
şass
 
	gAdd»ss
;

36 
şass
 
	gSock‘
;

37 
şass
 
	gPack‘
;

52 şas 
	cDashS”v”
 : 
public
 
AµliÿtiÚ


54 
public
:

55 
Ty³Id


56 
G‘Ty³Id
();

57 
DashS”v”
();

59 
	gvœtu®


60 ~
DashS”v”
();

65 
	gPŒ
<
	gSock‘
>

66 
G‘Li¡’šgSock‘
() const;

71 
	g¡d
::
li¡
<
PŒ
<
Sock‘
> >

72 
G‘Acû±edSock‘s
() const;

74 
	g´Ùeùed
:

75 
vœtu®
 

76 
DoDi¥o£
();

77 
	g´iv©e
:

79 
vœtu®
 

80 
S¹AµliÿtiÚ
();

81 
vœtu®
 

82 
StİAµliÿtiÚ
();

85 
HªdËR—d
(
PŒ
<
Sock‘
>);

87 
D©aS’d
(
PŒ
<
Sock‘
>, 
ušt32_t
);

90 
S’dSegm’t
(
ušt32_t
 
video_id
, ušt32_ˆ
»sŞutiÚ
, ušt32_ˆ
£gm’t_id
, ušt32_ˆ
·ck‘_num
,

91 
PŒ
<
Sock‘
> 
sock‘
);

93 
HªdËAcû±
(
PŒ
<
Sock‘
>, cÚ¡ 
Add»ss
& 
äom
);

95 
HªdËP“rClo£
(
PŒ
<
Sock‘
>);

97 
HªdËP“rE¼Ü
(
PŒ
<
Sock‘
>);

101 
	gPŒ
<
	gSock‘
> 
	gm_sock‘
;

102 
	g¡d
::
li¡
<
PŒ
<
Sock‘
> > 
m_sock‘Li¡
;

104 
Add»ss
 
	gm_loÿl
;

105 
ušt32_t
 
	gm_tÙ®Rx
;

106 
Ty³Id
 
	gm_tid
;

107 
	gT¿ûdC®lback
<
	gPŒ
<cÚ¡ 
	gPack‘
>, cÚ¡ 
	gAdd»ss
 &> 
	gm_rxT¿û
;

110 
	g¡d
::
m­
<
PŒ
<
Sock‘
>, std::
queue
<
Pack‘
> > 
m_queues
;

111 
	gv_num
[10]={-1,-1,-1,-1,-1,-1,-1,-1,-1,-1};

	@model/http-header.cc

21 
	~"ns3/as£¹.h
"

22 
	~"ns3/log.h
"

23 
	~"ns3/h—d”.h
"

24 
	~"ns3/simuÏtÜ.h
"

25 
	~"h‰p-h—d”.h
"

27 
NS_LOG_COMPONENT_DEFINE
("HTTPHeader");

29 
Çme¥aû
 
	gns3


32 
NS_OBJECT_ENSURE_REGISTERED
 (
HTTPH—d”
)

35 
	gHTTPH—d”
::
HTTPH—d”
() :

36 
m_£q
(0), 
m_ts
(
SimuÏtÜ
::
Now
().
G‘TimeS‹p
()), 
m_mes§ge_ty³
(

37 
HTTP_REQUEST
), 
m_video_id
(0), 
m_»sŞutiÚ
(0), 
m_£gm’t_id
(0)

40 
NS_LOG_FUNCTION
(
this
);

44 
	gHTTPH—d”
::
S‘Seq
(
ušt32_t
 
£q
)

46 
NS_LOG_FUNCTION
(
this
 << 
£q
);

47 
	gm_£q
 = 
£q
;

49 
ušt32_t


50 
	gHTTPH—d”
::
G‘Seq
() const

52 
NS_LOG_FUNCTION
(
this
);

53  
	gm_£q
;

57 
	gHTTPH—d”
::
S‘Mes§geTy³
(
ušt32_t
 
mes§ge_ty³
)

59 
NS_LOG_FUNCTION
(
this
 << 
mes§ge_ty³
);

60 
	gm_mes§ge_ty³
 = 
mes§ge_ty³
;

63 
ušt32_t


64 
	gHTTPH—d”
::
G‘Mes§geTy³
() const

66 
NS_LOG_FUNCTION
(
this
);

67  
	gm_mes§ge_ty³
;

70 
	gHTTPH—d”
::
S‘VideoId
(
ušt32_t
 
video_id
)

73 
NS_LOG_FUNCTION
(
this
 << 
video_id
);

74 
	gm_video_id
 = 
video_id
;

76 
ušt32_t


77 
	gHTTPH—d”
::
G‘VideoId
() const

80 
NS_LOG_FUNCTION
(
this
);

81  
	gm_video_id
;

84 
	gHTTPH—d”
::
S‘ResŞutiÚ
(
ušt32_t
 
»sŞutiÚ
)

87 
NS_LOG_FUNCTION
(
this
 << 
»sŞutiÚ
);

88 
	gm_»sŞutiÚ
 = 
»sŞutiÚ
;

90 
ušt32_t


91 
	gHTTPH—d”
::
G‘ResŞutiÚ
() const

93 
NS_LOG_FUNCTION
(
this
);

94  
	gm_»sŞutiÚ
;

98 
	gHTTPH—d”
::
S‘Segm’tId
(
ušt32_t
 
£gm’t_id
)

100 
NS_LOG_FUNCTION
(
this
 << 
£gm’t_id
);

101 
	gm_£gm’t_id
 = 
£gm’t_id
;

103 
ušt32_t


104 
	gHTTPH—d”
::
G‘Segm’tId
() const

106 
NS_LOG_FUNCTION
(
this
);

107  
	gm_£gm’t_id
;

110 
Time


111 
	gHTTPH—d”
::
G‘Ts
() const

113 
NS_LOG_FUNCTION
(
this
);

114  
TimeS‹p
(
m_ts
);

117 
Ty³Id


118 
	gHTTPH—d”
::
G‘Ty³Id
()

120 
Ty³Id
 
tid
 =

121 
Ty³Id
("ns3::HTTPH—d”").
S‘P¬’t
<
H—d”
>().
AddCÚ¡ruùÜ
<
HTTPH—d”
>();

122  
	gtid
;

124 
Ty³Id


125 
	gHTTPH—d”
::
G‘In¡ªûTy³Id
() const

127  
G‘Ty³Id
();

130 
	gHTTPH—d”
::
Pršt
(
¡d
::
o¡»am
 &
os
) const

132 
NS_LOG_FUNCTION
(
this
 << &
os
);

133 
	gos
 << "(£q=" << 
	gm_£q
 << "ime=" << 
TimeS‹p
(
m_ts
).
G‘SecÚds
() << ")";

135 
ušt32_t


136 
	gHTTPH—d”
::
G‘S”ŸlizedSize
() const

138 
NS_LOG_FUNCTION
(
this
);

144 
	gHTTPH—d”
::
S‘Pack‘Num
(
ušt32_t
 
·ck‘_num
)

146 
NS_LOG_FUNCTION
(
this
 << 
·ck‘_num
);

147 
	gm_·ck‘_num
 = 
·ck‘_num
;

149 
ušt32_t


150 
	gHTTPH—d”
::
G‘Pack‘Num
() const

152 
NS_LOG_FUNCTION
(
this
);

153  
	gm_·ck‘_num
;

157 
	gHTTPH—d”
::
S”Ÿlize
(
Bufãr
::
I‹¿tÜ
 
¡¬t
) const

159 
NS_LOG_FUNCTION
(
this
 << &
¡¬t
);

160 
	gBufãr
::
I‹¿tÜ
 
i
 = 
¡¬t
;

161 
	gi
.
Wr™eHtÚU32
(
m_£q
);

162 
	gi
.
Wr™eHtÚU64
(
m_ts
);

163 
	gi
.
Wr™eHtÚU32
(
m_mes§ge_ty³
);

164 
	gi
.
Wr™eHtÚU32
(
m_video_id
);

165 
	gi
.
Wr™eHtÚU32
(
m_»sŞutiÚ
);

166 
	gi
.
Wr™eHtÚU32
(
m_£gm’t_id
);

167 
	gi
.
Wr™eHtÚU32
(
m_·ck‘_num
);

169 
ušt32_t


170 
	gHTTPH—d”
::
De£rŸlize
(
Bufãr
::
I‹¿tÜ
 
¡¬t
)

172 
NS_LOG_FUNCTION
(
this
 << &
¡¬t
);

173 
	gBufãr
::
I‹¿tÜ
 
i
 = 
¡¬t
;

174 
	gm_£q
 = 
i
.
R—dNtohU32
();

175 
	gm_ts
 = 
i
.
R—dNtohU64
();

176 
	gm_mes§ge_ty³
 = 
i
.
R—dNtohU32
();

177 
	gm_video_id
 = 
i
.
R—dNtohU32
();

178 
	gm_»sŞutiÚ
 = 
i
.
R—dNtohU32
();

179 
	gm_£gm’t_id
 = 
i
.
R—dNtohU32
();

180 
	gm_·ck‘_num
 = 
i
.
R—dNtohU32
();

181  
G‘S”ŸlizedSize
();

	@model/http-header.h

21 #iâdeà
HTTP_TS_HEADER_H


22 
	#HTTP_TS_HEADER_H


	)

24 
	~"ns3/h—d”.h
"

25 
	~"ns3/n¡ime.h
"

27 
Çme¥aû
 
	gns3


35 
	#HTTP_REQUEST
 0

	)

36 
	#HTTP_RESPONSE
 1

	)

38 şas 
	cHTTPH—d”
 : 
public
 
H—d”


40 
public
:

41 
HTTPH—d”
();

47 
S‘Seq
(
ušt32_t
 
£q
);

52 
ušt32_t


53 
G‘Seq
() const;

59 
S‘Mes§geTy³
(
ušt32_t
 
mes§ge_ty³
);

60 
ušt32_t


61 
G‘Mes§geTy³
() const;

64 
S‘VideoId
(
ušt32_t
 
video_id
);

65 
ušt32_t


66 
G‘VideoId
() const;

69 
S‘ResŞutiÚ
(
ušt32_t
 
»sŞutiÚ
);

70 
ušt32_t


71 
G‘ResŞutiÚ
() const;

74 
S‘Segm’tId
(
ušt32_t
 
£gm’t_id
);

75 
ušt32_t


76 
G‘Segm’tId
() const;

78 
Time


79 
G‘Ts
() const;

81 
Ty³Id


82 
G‘Ty³Id
();

84 
vœtu®
 
ušt32_t


85 
G‘S”ŸlizedSize
() const;

88 
S‘Pack‘Num
(
ušt32_t
 
·ck‘_num
);

90 
ušt32_t


91 
G‘Pack‘Num
() const;

94 
	g´iv©e
:

95 
vœtu®
 
Ty³Id


96 
G‘In¡ªûTy³Id
() const;

97 
vœtu®
 

98 
Pršt
(
¡d
::
o¡»am
 &
os
) const;

99 
vœtu®
 

100 
S”Ÿlize
(
Bufãr
::
I‹¿tÜ
 
¡¬t
) const;

101 
vœtu®
 
ušt32_t


102 
De£rŸlize
(
Bufãr
::
I‹¿tÜ
 
¡¬t
);

104 
ušt32_t
 
	gm_£q
;

105 
ušt64_t
 
	gm_ts
;

107 
ušt32_t
 
	gm_mes§ge_ty³
;

108 
ušt32_t
 
	gm_video_id
;

109 
ušt32_t
 
	gm_»sŞutiÚ
;

110 
ušt32_t
 
	gm_£gm’t_id
;

112 
ušt32_t
 
	gm_·ck‘_num
;

	@model/http-parser.cc

21 
	~"h‰p-·r£r.h
"

22 
	~"ns3/log.h
"

23 
	~"ns3/add»ss.h
"

24 
	~"ns3/sock‘.h
"

25 
	~"ns3/·ck‘.h
"

26 
	~"ns3/simuÏtÜ.h
"

27 
	~"h‰p-h—d”.h
"

28 
	~"m³g-h—d”.h
"

29 
	~"dash-ş›Á.h
"

31 
NS_LOG_COMPONENT_DEFINE
("HttpParser");

33 
Çme¥aû
 
	gns3


36 
	gH‰pP¬£r
::
H‰pP¬£r
() :

37 
m_by‹s
(0), 
m_­p
(
NULL
), 
m_Ï¡m—su»m’t
("0s")

39 
NS_LOG_FUNCTION
(
this
);

42 
	gH‰pP¬£r
::~
H‰pP¬£r
()

44 
NS_LOG_FUNCTION
(
this
);

48 
	gH‰pP¬£r
::
S‘Aµ
(
DashCl›Á
 *
­p
)

50 
NS_LOG_FUNCTION
(
this
 << 
­p
);

51 
	gm_­p
 = 
­p
;

54 
	gH‰pP¬£r
::
R—dSock‘
(
PŒ
<
Sock‘
> 
sock‘
)

56 
NS_LOG_FUNCTION
(
this
 << 
sock‘
);

57 
Add»ss
 
	gäom
;

58 
	gby‹s
 = 
sock‘
->
RecvFrom
(&
m_bufãr
[
m_by‹s
], 
MPEG_MAX_MESSAGE
 - m_bytes,

59 0, 
äom
);

61 
MPEGH—d”
 
	gm³g_h—d”
;

62 
HTTPH—d”
 
	gh‰p_h—d”
;

64 
ušt32_t
 
	gh—d”size
 = 
m³g_h—d”
.
G‘S”ŸlizedSize
()

65 + 
h‰p_h—d”
.
G‘S”ŸlizedSize
();

67 ià(
	gby‹s
 > 0)

69 
	gm_by‹s
 +ğ
by‹s
;

71 ià(
	gm_Ï¡m—su»m’t
 > 
Time
("0s"))

73 
NS_LOG_INFO
(

74 
SimuÏtÜ
::
Now
().
G‘SecÚds
(è<< " by‹s: " << 
by‹s
 << " dt: " << (SimuÏtÜ::Now(è- 
m_Ï¡m—su»m’t
).G‘SecÚds(è<< " b™¿‹: " << (8 * (by‹ + 
h—d”size
)/ (Simulator::Now() - m_lastmeasurement).GetSeconds()));

76 
	gm_Ï¡m—su»m’t
 = 
SimuÏtÜ
::
Now
();

79 
NS_LOG_INFO
(

80 "### Bufã¸¥aû: " << 
m_by‹s
 << " QueuËngth " << 
m_­p
->
G‘PÏy”
().
G‘QueueSize
());

82 ià(
	gm_by‹s
 < 
	gh—d”size
)

87 
Pack‘
 
h—d”Pack‘
(
m_bufãr
, 
h—d”size
);

88 
	gh—d”Pack‘
.
RemoveH—d”
(
m³g_h—d”
);

90 
ušt32_t
 
	gmes§ge_size
 = 
h—d”size
 + 
m³g_h—d”
.
G‘Size
();

92 ià(
	gm_by‹s
 < 
	gmes§ge_size
)

96 
Pack‘
 
mes§ge
(
m_bufãr
, 
mes§ge_size
);

98 
memmove
(
m_bufãr
, &m_bufãr[
mes§ge_size
], 
m_by‹s
 - message_size);

99 
	gm_by‹s
 -ğ
mes§ge_size
;

100 
	gm_­p
->
Mes§geReûived
(
mes§ge
);

102 
R—dSock‘
(
sock‘
);

	@model/http-parser.h

21 #iâdeà
HTTP_PARSER_H_


22 
	#HTTP_PARSER_H_


	)

24 
	~<ns3/±r.h
>

25 
	~"m³g-h—d”.h
"

27 
Çme¥aû
 
	gns3


30 
şass
 
	gSock‘
;

31 
şass
 
	gDashCl›Á
;

33 şas 
	cH‰pP¬£r


35 
	gpublic
:

36 
H‰pP¬£r
();

37 
	gvœtu®


38 ~
H‰pP¬£r
();

40 
R—dSock‘
(
PŒ
<
Sock‘
> 
sock‘
);

42 
S‘Aµ
(
DashCl›Á
 *
­p
);

44 
	g´iv©e
:

45 
ušt8_t
 
m_bufãr
[
MPEG_MAX_MESSAGE
];

46 
ušt32_t
 
	gm_by‹s
;

47 
DashCl›Á
 *
	gm_­p
;

49 
Time
 
	gm_Ï¡m—su»m’t
;

	@model/mpeg-header.cc

21 
	~"ns3/as£¹.h
"

22 
	~"ns3/log.h
"

23 
	~"ns3/h—d”.h
"

24 
	~"ns3/simuÏtÜ.h
"

25 
	~"m³g-h—d”.h
"

27 
NS_LOG_COMPONENT_DEFINE
("MPEGHeader");

29 
Çme¥aû
 
	gns3


32 
NS_OBJECT_ENSURE_REGISTERED
 (
MPEGH—d”
)

35 
	gMPEGH—d”
::
MPEGH—d”
() :

36 
m_£q
(0), 
m_ts
(
SimuÏtÜ
::
Now
().
G‘TimeS‹p
()), 
m_äame_id
(0), 
m_¶ayback_time
(

37 0), 
m_ty³
('B')

40 
NS_LOG_FUNCTION
(
this
);

44 
	gMPEGH—d”
::
S‘Seq
(
ušt32_t
 
£q
)

46 
NS_LOG_FUNCTION
(
this
 << 
£q
);

47 
	gm_£q
 = 
£q
;

49 
ušt32_t


50 
	gMPEGH—d”
::
G‘Seq
() const

52 
NS_LOG_FUNCTION
(
this
);

53  
	gm_£q
;

57 
	gMPEGH—d”
::
S‘F¿meId
(
ušt32_t
 
äame_id
)

59 
NS_LOG_FUNCTION
(
this
);

60 
	gm_äame_id
 = 
äame_id
;

62 
ušt32_t


63 
	gMPEGH—d”
::
G‘F¿meId
() const

65 
NS_LOG_FUNCTION
(
this
);

66  
	gm_äame_id
;

70 
	gMPEGH—d”
::
S‘PÏybackTime
(
Time
 
¶ayback_time
)

72 
NS_LOG_FUNCTION
(
this
);

73 
	gm_¶ayback_time
 = 
¶ayback_time
.
G‘TimeS‹p
();

75 
Time


76 
	gMPEGH—d”
::
G‘PÏybackTime
() const

78 
NS_LOG_FUNCTION
(
this
);

79  
TimeS‹p
(
m_¶ayback_time
);

83 
	gMPEGH—d”
::
S‘Ty³
(
ušt32_t
 
ty³
)

85 
NS_LOG_FUNCTION
(
this
);

86 
	gm_ty³
 = 
ty³
;

88 
ušt32_t


89 
	gMPEGH—d”
::
G‘Ty³
() const

91 
NS_LOG_FUNCTION
(
this
);

92  
	gm_ty³
;

96 
	gMPEGH—d”
::
S‘Size
(
ušt32_t
 
size
)

98 
NS_LOG_FUNCTION
(
this
);

99 
	gm_size
 = 
size
;

102 
ušt32_t


103 
	gMPEGH—d”
::
G‘Size
() const

105 
NS_LOG_FUNCTION
(
this
);

106  
	gm_size
;

108 
Time


109 
	gMPEGH—d”
::
G‘Ts
() const

111 
NS_LOG_FUNCTION
(
this
);

112  
TimeS‹p
(
m_ts
);

115 
Ty³Id


116 
	gMPEGH—d”
::
G‘Ty³Id
()

118 
Ty³Id
 
tid
 =

119 
Ty³Id
("ns3::MPEGH—d”").
S‘P¬’t
<
H—d”
>().
AddCÚ¡ruùÜ
<
MPEGH—d”
>();

120  
	gtid
;

122 
Ty³Id


123 
	gMPEGH—d”
::
G‘In¡ªûTy³Id
() const

125  
G‘Ty³Id
();

128 
	gMPEGH—d”
::
Pršt
(
¡d
::
o¡»am
 &
os
) const

130 
NS_LOG_FUNCTION
(
this
 << &
os
);

131 
	gos
 << "(£q=" << 
	gm_£q
 << "ime=" << 
TimeS‹p
(
m_ts
).
G‘SecÚds
() << ")";

133 
ušt32_t


134 
	gMPEGH—d”
::
G‘S”ŸlizedSize
() const

136 
NS_LOG_FUNCTION
(
this
);

141 
	gMPEGH—d”
::
S”Ÿlize
(
Bufãr
::
I‹¿tÜ
 
¡¬t
) const

143 
NS_LOG_FUNCTION
(
this
 << &
¡¬t
);

144 
	gBufãr
::
I‹¿tÜ
 
i
 = 
¡¬t
;

145 
	gi
.
Wr™eHtÚU32
(
m_£q
);

146 
	gi
.
Wr™eHtÚU64
(
m_ts
);

147 
	gi
.
Wr™eHtÚU32
(
m_äame_id
);

148 
	gi
.
Wr™eHtÚU64
(
m_¶ayback_time
);

149 
	gi
.
Wr™eHtÚU32
(
m_ty³
);

150 
	gi
.
Wr™eHtÚU32
(
m_size
);

152 
ušt32_t


153 
	gMPEGH—d”
::
De£rŸlize
(
Bufãr
::
I‹¿tÜ
 
¡¬t
)

155 
NS_LOG_FUNCTION
(
this
 << &
¡¬t
);

156 
	gBufãr
::
I‹¿tÜ
 
i
 = 
¡¬t
;

157 
	gm_£q
 = 
i
.
R—dNtohU32
();

158 
	gm_ts
 = 
i
.
R—dNtohU64
();

159 
	gm_äame_id
 = 
i
.
R—dNtohU32
();

160 
	gm_¶ayback_time
 = 
i
.
R—dNtohU64
();

161 
	gm_ty³
 = 
i
.
R—dNtohU32
();

162 
	gm_size
 = 
i
.
R—dNtohU32
();

163  
G‘S”ŸlizedSize
();

	@model/mpeg-header.h

21 #iâdeà
MPEG_HEADER_H


22 
	#MPEG_HEADER_H


	)

24 
	~"ns3/h—d”.h
"

25 
	~"ns3/n¡ime.h
"

27 
Çme¥aû
 
	gns3


37 
	#MPEG_MAX_MESSAGE
 100000

	)

38 
	#MPEG_FRAMES_PER_SEGMENT
 1

39 
	#MPEG_TIME_BETWEEN_FRAMES
 20

40 şas 
	cMPEGH—d”
 : 
public
 
H—d”


	)

42 
	gpublic
:

43 
MPEGH—d”
();

49 
S‘Seq
(
ušt32_t
 
£q
);

53 
ušt32_t


54 
G‘Seq
() const;

60 
S‘F¿meId
(
ušt32_t
 
äame_id
);

61 
ušt32_t


62 
G‘F¿meId
() const;

65 
S‘PÏybackTime
(
Time
 
¶ayback_time
);

66 
Time


67 
G‘PÏybackTime
() const;

70 
S‘Ty³
(
ušt32_t
 
ty³
);

71 
ušt32_t


72 
G‘Ty³
() const;

75 
S‘Size
(
ušt32_t
 
size
);

76 
ušt32_t


77 
G‘Size
() const;

79 
Time


80 
G‘Ts
() const;

82 
Ty³Id


83 
G‘Ty³Id
();

85 
vœtu®
 
ušt32_t


86 
G‘S”ŸlizedSize
() const;

88 
	g´iv©e
:

89 
vœtu®
 
Ty³Id


90 
G‘In¡ªûTy³Id
() const;

91 
vœtu®
 

92 
Pršt
(
¡d
::
o¡»am
 &
os
) const;

93 
vœtu®
 

94 
S”Ÿlize
(
Bufãr
::
I‹¿tÜ
 
¡¬t
) const;

95 
vœtu®
 
ušt32_t


96 
De£rŸlize
(
Bufãr
::
I‹¿tÜ
 
¡¬t
);

98 
ušt32_t
 
	gm_£q
;

99 
ušt64_t
 
	gm_ts
;

101 
ušt32_t
 
	gm_äame_id
;

102 
ušt64_t
 
	gm_¶ayback_time
;

103 
ušt32_t
 
	gm_ty³
;

104 
ušt32_t
 
	gm_size
;

	@model/mpeg-player.cc

21 
	~"ns3/log.h
"

22 
	~"ns3/n¡ime.h
"

23 
	~"ns3/simuÏtÜ.h
"

24 
	~"h‰p-h—d”.h
"

25 
	~"m³g-h—d”.h
"

26 
	~"m³g-¶ay”.h
"

27 
	~"dash-ş›Á.h
"

28 
	~"DudpCl›Á.h
"

29 
	~<cm©h
>

30 
	~"·¿.h
"

31 
NS_LOG_COMPONENT_DEFINE
("MpegPlayer");

34 
Çme¥aû
 
	gns3


37 
	gM³gPÏy”
::
M³gPÏy”
() :

38 
m_¡©e
(
MPEG_PLAYER_NOT_STARTED
), 
m_š‹¼ru±iÚs
(0), 
m_tÙ®R©e
(0), 
m_mšR©e
(

39 100000000), 
m_äamesPÏyed
(0), 
m_bufãrD–ay
("0s")

41 
NS_LOG_FUNCTION
(
this
);

44 
	gM³gPÏy”
::~
M³gPÏy”
()

46 
NS_LOG_FUNCTION
(
this
);

50 
	gM³gPÏy”
::
G‘QueueSize
()

52  
m_queue
.
size
();

55 
Time


56 
	gM³gPÏy”
::
G‘R—lPÏyTime
(
Time
 
¶ayTime
)

58 
NS_LOG_INFO
(

59 " S¹: " << 
m_¡¬t_time
.
G‘SecÚds
(è<< " IÁ”: " << 
m_š‹¼u±iÚ_time
.G‘SecÚds(è<< "…Ïytime: " << 
¶ayTime
.G‘SecÚds(è<< "‚ow: " << 
SimuÏtÜ
::
Now
().GetSeconds() << "‡ctual: " << (m_start_time + m_interruption_time +…layTime).GetSeconds());

61  
	gm_¡¬t_time
 + 
	gm_š‹¼u±iÚ_time


62 + (
	gm_¡©e
 =ğ
MPEG_PLAYER_PAUSED
 ?

63 (
SimuÏtÜ
::
Now
(è- 
m_Ï¡·u£d
è: 
SecÚds
(0)è+ 
¶ayTime


64 - 
SimuÏtÜ
::
Now
();

68 
	gM³gPÏy”
::
ReûiveF¿me
(
PŒ
<
Pack‘
> 
mes§ge
)

71 
NS_LOG_FUNCTION
(
this
 << 
mes§ge
);

72 
NS_LOG_INFO
("Reûived F¿m" << 
m_¡©e
);

74 
	gPŒ
<
	gPack‘
> 
	gmsg
 = 
mes§ge
->
Cİy
();

76 
	gm_queue
.
push
(
msg
);

78 ià(
	gm_¡©e
 =ğ
MPEG_PLAYER_PAUSED
)

81 if(
m_queue
.
size
()>=(è
video_£r›s
[
u£rID
][
v_num
]){

82 
NS_LOG_INFO
("Play„esumed");

83 
	gm_¡©e
 = 
MPEG_PLAYER_PLAYING
;

84 
	gm_š‹¼u±iÚ_time
 +ğ(
SimuÏtÜ
::
Now
(è- 
m_Ï¡·u£d
);

88 
	g¡d
::
cout
<<"3,"<<
u£rID
<<","<<
m_Ï¡·u£d
.
G‘SecÚds
()<<","<<
SimuÏtÜ
::
Now
().G‘SecÚds()<<
¡d
::
’dl
;

89 
	g»cÜd
=1;

91 
	g¡d
::
cout
<<"4,"<<
u£rID
<<","<<
m_š‹¼ru±iÚs
<<","<<(
SimuÏtÜ
::
Now
(è- 
m_Ï¡·u£d
).
G‘SecÚds
()<<
¡d
::
’dl
;

93 
PÏyF¿me
();

96 ià(
	gm_¡©e
 =ğ
MPEG_PLAYER_NOT_STARTED
)

106 ià(
video_£r›s
[
u£rID
][
»q_num
]>0){

107 
T_¡¬t
 = 
Œue
;

108 
	gnow_£g
++;

112 if(
	gvideo_£r›s
[
u£rID
][
»q_num
+1]>0){

113 if(
	gm_queue
.
size
()>(è(
	gvideo_£r›s
[
u£rID
][
v_num
]+video_series[userID][v_num+1])){

114 
NS_LOG_INFO
("Play started");

115 
	gm_¡©e
 = 
MPEG_PLAYER_PLAYING
;

116 
	gm_¡¬t_time
 = 
SimuÏtÜ
::
Now
();

119 
PÏyF¿me
();

126 
	gM³gPÏy”
::
G‘ID
(
m_id
)

128 
u£rID
=
m_id
;

132 
	gM³gPÏy”
::
S¹
()

134 
NS_LOG_FUNCTION
(
this
);

135 
	gm_¡©e
 = 
MPEG_PLAYER_PLAYING
;

136 
	gm_š‹¼u±iÚ_time
 = 
SecÚds
(0);

141 
	gM³gPÏy”
::
PÏyF¿me
()

160 
NS_LOG_FUNCTION
(
this
);

161 ià(
	gm_¡©e
 =ğ
MPEG_PLAYER_DONE
)

165 ià(
	gm_queue
.
em±y
())

167 
NS_LOG_INFO
(
SimuÏtÜ
::
Now
().
G‘SecÚds
() << " No frameso…lay");

168 
	gm_¡©e
 = 
MPEG_PLAYER_PAUSED
;

169 
	gm_Ï¡·u£d
 = 
SimuÏtÜ
::
Now
();

170 
	gm_š‹¼ru±iÚs
++;

173 ià(
	gm_queue
.
size
()<(è
	gvideo_£r›s
[
u£rID
][
v_num
])

175 
	gm_¡©e
 = 
MPEG_PLAYER_PAUSED
;

176 
	gm_Ï¡·u£d
 = 
SimuÏtÜ
::
Now
();

177 
	gm_š‹¼ru±iÚs
++;

181 
	gT_¶ay
=
Œue
;

182 
	gnow_£g
++;

183 
	gcouÁ_·ck‘
 =0;

188 ià(
	g»cÜd
==0){

189 
cout
<<"£gm’t: "<<
v_num
<<
’dl
;

190 
	g¡d
::
cout
<<"3,"<<
u£rID
<<","<<
SimuÏtÜ
::
Now
().
G‘SecÚds
()<<","<<SimuÏtÜ::Now().G‘SecÚds()<<
¡d
::
’dl
;

192 
	g»cÜd
=0;

195 
MPEGH—d”
 
	gm³g_h—d”
;

196 
HTTPH—d”
 
	gh‰p_h—d”
;

199 if(
	gv_num
==0){

201 
i
=0;
	gi
<()(
	gvideo_£r›s
[
u£rID
][
v_num
]+video_series[userID][v_num+1]);i++){

202 
	gPŒ
<
	gPack‘
> 
	gmes§ge
 = 
m_queue
.
äÚt
();

203 
	gm_queue
.
pİ
();

204 
	gmes§ge
->
RemoveH—d”
(
m³g_h—d”
);

205 
	gmes§ge
->
RemoveH—d”
(
h‰p_h—d”
);

206 
	gm_tÙ®R©e
 +ğ
h‰p_h—d”
.
G‘ResŞutiÚ
();

207 
	gm_äamesPÏyed
++;

209 
	gv_num
 = 
v_num
+2;

213 
	gi
=0;i<()
	gvideo_£r›s
[
u£rID
][
v_num
];i++){

214 
	gPŒ
<
	gPack‘
> 
	gmes§ge
 = 
m_queue
.
äÚt
();

215 
	gm_queue
.
pİ
();

216 
	gmes§ge
->
RemoveH—d”
(
m³g_h—d”
);

217 
	gmes§ge
->
RemoveH—d”
(
h‰p_h—d”
);

218 
	gm_tÙ®R©e
 +ğ
h‰p_h—d”
.
G‘ResŞutiÚ
();

219 
	gm_äamesPÏyed
++;

222 
	gv_num
++;

225 if(
	gv_num
==61 && 
m_dashCl›Á
){

226 
cout
<<"š m•g--- T_¶ay: "<<
T_¶ay
<<
’dl
;

227 
	gm_dashCl›Á
->
StİAµliÿtiÚ
();

242 ià(
	gh‰p_h—d”
.
G‘Segm’tId
() > 0)

244 
	gm_mšR©e
 =

245 
h‰p_h—d”
.
G‘ResŞutiÚ
(è< 
m_mšR©e
 ?

246 
h‰p_h—d”
.
G‘ResŞutiÚ
(è: 
m_mšR©e
;

251 
Time
 
	gb_t
 = 
G‘R—lPÏyTime
(
m³g_h—d”
.
G‘PÏybackTime
());

261 if(()
	gv_num
<=56){

262 if(
m_dashCl›Á
){

263 if(
š™_bufãr
>
»q_num
){

264 if((è
v_num
>=
š™_bufãr
-
»q_num
+1){

265 
m_dashCl›Á
->
Reque¡Segm’t
();

271 ià(()
	gv_num
>=
š™_bufãr
){

272 if(()
v_num
<=61-
»q_num
){

274 
m_dashCl›Á
->
Reque¡Segm’t
();

280 
NS_LOG_INFO
(

281 
SimuÏtÜ
::
Now
().
G‘SecÚds
(è<< " PLAYING FRAME: " << " VidId: " << 
h‰p_h—d”
.
G‘VideoId
(è<< " SegId: " << h‰p_h—d”.
G‘Segm’tId
(è<< " Res: " << h‰p_h—d”.
G‘ResŞutiÚ
(è<< " F¿meId: " << 
m³g_h—d”
.
G‘F¿meId
(è<< " PÏyTime: " << m³g_h—d”.
G‘PÏybackTime
().G‘SecÚds(è<< " Ty³: " << (èm³g_h—d”.
G‘Ty³
(è<< " iÁ”Time: " << 
m_š‹¼u±iÚ_time
.G‘SecÚds(è<< " queueL’gth: " << 
m_queue
.
size
());

289 
	gSimuÏtÜ
::
ScheduË
(
MliSecÚds
(1000), &
M³gPÏy”
::
PÏyF¿me
, 
this
);

	@model/mpeg-player.h

21 #iâdeà
MPEG_PLAYER_H_


22 
	#MPEG_PLAYER_H_


	)

24 
	~<queue
>

25 
	~<m­
>

26 
	~"ns3/±r.h
"

27 
	~"ns3/·ck‘.h
"

28 
	~"udp-¶ay”.h
"

30 
Çme¥aû
 
	gns3


34 
	gMPEG_PLAYER_PAUSED
, 
	gMPEG_PLAYER_PLAYING
, 
	gMPEG_PLAYER_NOT_STARTED
, 
	gMPEG_PLAYER_DONE


37 
şass
 
	gDashCl›Á
;

38 
şass
 
	gDudpCl›Á
;

40 şas 
	cM³gPÏy”


43 
ä›nd
 
şass
 
	gUdpPÏy”
;

45 
	gpublic
:

46 
M³gPÏy”
();

48 
	gvœtu®


49 ~
M³gPÏy”
();

52 
ReûiveF¿me
(
PŒ
<
Pack‘
> 
mes§ge
);

55 
G‘QueueSize
();

58 
S¹
();

60 
Time


61 
G‘R—lPÏyTime
(
Time
 
¶ayTime
);

63 
šlše


64 
SchduËBufãrWakeup
(cÚ¡ 
Time
 
t
, 
DashCl›Á
 * 
ş›Á
)

66 
	gm_bufãrD–ay
 = 
t
;

67 
	gm_dashCl›Á
 = 
ş›Á
;

70 
šlše


71 
WakeupUdp
(
DudpCl›Á
 *
d_ş›Á
)

74 
	gm_udpCl›Á
 = 
d_ş›Á
;

80 
G‘ID
(
id
);

82 
	gm_¡©e
;

83 
Time
 
	gm_š‹¼u±iÚ_time
;

84 
	gm_š‹¼ru±iÚs
;

86 
Time
 
	gm_¡¬t_time
;

87 
ušt64_t
 
	gm_tÙ®R©e
;

88 
ušt32_t
 
	gm_mšR©e
;

89 
ušt32_t
 
	gm_äamesPÏyed
;

98 
	g´iv©e
:

102 
PÏyF¿me
();

104 
Time
 
	gm_Ï¡·u£d
;

105 
	g¡d
::
queue
<
PŒ
<
Pack‘
> > 
m_queue
;

106 
Time
 
	gm_bufãrD–ay
;

107 
DashCl›Á
 * 
	gm_dashCl›Á
;

108 
DudpCl›Á
 * 
	gm_udpCl›Á
;

109 
	gu£rID
;

110 
size_t
 
	gv_num
=0;

111 
	g»cÜd
=0;

	@model/para.h

1 
	~"m³g-¶ay”.h
"

3 
usšg
 
Çme¥aû
 
	g¡d
;

4 
	g¡d
::
¡ršg
 
šput_£r›s
;

5 
£g_Ëngth
;

6 
š™_bufãr
;

7 
veùÜ
 <> 
video_num
;

8 
veùÜ
<veùÜ<>> 
video_£r›s
;

9 
veùÜ
<veùÜ<veùÜ<>>> 
´obs
;

10 
veùÜ
<veùÜ<>> 
brs
;

11 
veùÜ
<veùÜ<>> 
di¡s
;

12 
veùÜ
<veùÜ<veùÜ<>>> 
video_size
;

13 
veùÜ
<veùÜ<>> 
u£r_£g_size
;

14 
veùÜ
<veùÜ<veùÜ<>>> 
´ed_šfo
;

15 
veùÜ
<veùÜ<veùÜ<>>> 
gt_šfo
;

16 
veùÜ
 <
¡ršg
> 
video_Çmes
;

17 
veùÜ
<veùÜ<>> 
u£r_šfo
;

18 
¡d
::
¡ršg
 
te_cŞ
, 
te_row
;

19 
te_num
;

20 
rho
;

21 
¡d
::
¡ršg
 
ex³rim’t_dœ
;

22 
¡d
::
¡ršg
 
ã©u»_dœ
;

23 
¡d
::
¡ršg
 
video_šfo_dœ
;

24 
¡d
::
¡ršg
 
´ob_dœ
;

25 
¡d
::
¡ršg
 
´ob_ov”®l_dœ
;

26 
¡d
::
¡ršg
 
u£r_šfo_fe
;

27 
¡d
::
¡ršg
 
¬—_dœ
;

28 
M
;

29 
¡d
::
¡ršg
 
mode
;

30 
¡d
::
¡ršg
 
cur_dœ
;

31 
¡d
::
¡ršg
 
dr_dœ
;

32 
»q_num
;

34 
veùÜ
<veùÜ<veùÜ<>>> 
cur_šfo
;

35 
veùÜ
<veùÜ<veùÜ<>>> 
dr_šfo
;

39 
veùÜ
<veùÜ<>> 
udp_£g_size
;

40 
veùÜ
<veùÜ<>> 
udp_£g_size2
;

41 
veùÜ
<veùÜ<>> 
udp_£g_size3
;

42 
veùÜ
<veùÜ<>> 
udp_£r›s
;

43 
boŞ
 
T_¶ay
;

44 
boŞ
 
T_¡¬t
;

46 
TP
;

47 
t_bw
;

48 
p_š‹r
;

49 
couÁ_·ck‘
;

50 
boŞ
 
loss_m¬k
;

51 
now_£g
;

	@model/udp-player.cc

21 
	~"ns3/log.h
"

22 
	~"ns3/n¡ime.h
"

23 
	~"ns3/simuÏtÜ.h
"

24 
	~"h‰p-h—d”.h
"

25 
	~"m³g-h—d”.h
"

26 
	~"udp-¶ay”.h
"

27 
	~"dash-ş›Á.h
"

28 
	~<cm©h
>

29 
	~"·¿.h
"

30 
	~"DudpCl›Á.h
"

31 
NS_LOG_COMPONENT_DEFINE
("UdpPlayer");

34 
Çme¥aû
 
	gns3


37 
	gUdpPÏy”
::
UdpPÏy”
() :

38 
m_¡©e
(
UDP_PLAYER_NOT_STARTED
), 
m_š‹¼ru±iÚs
(0), 
m_tÙ®R©e
(0), 
m_mšR©e
(

39 100000000), 
m_äamesPÏyed
(0), 
m_bufãrD–ay
("0s")

41 
NS_LOG_FUNCTION
(
this
);

44 
	gUdpPÏy”
::~
UdpPÏy”
()

46 
NS_LOG_FUNCTION
(
this
);

50 
	gUdpPÏy”
::
G‘QueueSize
()

52  
m_queue
.
size
();

55 
Time


56 
	gUdpPÏy”
::
G‘R—lPÏyTime
(
Time
 
¶ayTime
)

58 
NS_LOG_INFO
(

59 " S¹: " << 
m_¡¬t_time
.
G‘SecÚds
(è<< " IÁ”: " << 
m_š‹¼u±iÚ_time
.G‘SecÚds(è<< "…Ïytime: " << 
¶ayTime
.G‘SecÚds(è<< "‚ow: " << 
SimuÏtÜ
::
Now
().GetSeconds() << "‡ctual: " << (m_start_time + m_interruption_time +…layTime).GetSeconds());

61  
	gm_¡¬t_time
 + 
	gm_š‹¼u±iÚ_time


62 + (
	gm_¡©e
 =ğ
UDP_PLAYER_PAUSED
 ?

63 (
SimuÏtÜ
::
Now
(è- 
m_Ï¡·u£d
è: 
SecÚds
(0)è+ 
¶ayTime


64 - 
SimuÏtÜ
::
Now
();

68 
	gUdpPÏy”
::
ReûiveF¿me
(
PŒ
<
Pack‘
> 
mes§ge
)

75 
NS_LOG_FUNCTION
(
this
 << 
mes§ge
);

76 
NS_LOG_INFO
("Reûived F¿m" << 
m_¡©e
);

78 
	gPŒ
<
	gPack‘
> 
	gmsg
 = 
mes§ge
->
Cİy
();

80 
	gm_queue
.
push
(
msg
);

120 
	gUdpPÏy”
::
CheckPÏy
(){

122 ià(
T_¶ay
){

123 
PÏyF¿me
();

124 
	gT_¶ay
=
çl£
;

133 
	gUdpPÏy”
::
G‘ID
(
m_id
)

135 
u£rID
=
m_id
;

139 
	gUdpPÏy”
::
S¹
()

141 
NS_LOG_FUNCTION
(
this
);

142 
	gm_¡©e
 = 
UDP_PLAYER_PLAYING
;

143 
	gm_š‹¼u±iÚ_time
 = 
SecÚds
(0);

148 
	gUdpPÏy”
::
PÏyF¿me
()

155 
NS_LOG_FUNCTION
(
this
);

156 ià(
	gm_¡©e
 =ğ
UDP_PLAYER_DONE
)

160 ià(
	gm_queue
.
em±y
())

162 
NS_LOG_INFO
(
SimuÏtÜ
::
Now
().
G‘SecÚds
() << " No frameso…lay");

164 
	gm_Ï¡·u£d
 = 
SimuÏtÜ
::
Now
();

165 
	gm_š‹¼ru±iÚs
++;

169 ià(
	gm_queue
.
size
()<(è
	gudp_£r›s
[0][
v_num
])

171 ià(
	gloss_m¬k
)

174 
	gloss_m¬k
 = 
Œue
;

175 
	g·ck‘_loss_num
 = 
udp_£r›s
[0][
v_num
] - 
m_queue
.
size
();

176 
	gcout
 <<"…ack‘_loss_num: "<< 
	g·ck‘_loss_num
 <<
	g’dl
;

177 
	gcout
 <<"u,3,"<< 
	g·ck‘_loss_num
 <<
	g’dl
;

179 
	gm_Ï¡·u£d
 = 
SimuÏtÜ
::
Now
();

180 
	gm_š‹¼ru±iÚs
++;

185 
	gqueue_num
 = 
m_queue
.
size
();

186 
	gi
=0; i< 
	gqueue_num
; i++){

187 
	gm_queue
.
pİ
();

189 
	gv_num
++;

193 ià((
	gv_num
)==60 && 
m_udpCl›Á
)

194 
m_udpCl›Á
->
StİAµliÿtiÚ
 ();

197 
	gm_udpCl›Á
 -> 
S’d
();

198 
	gT_¶ay
=
çl£
;

200 
	gm_udpCl›Á
=
NULL
;

	@model/udp-player.h

21 #iâdeà
UDP_PLAYER_H_


22 
	#UDP_PLAYER_H_


	)

24 
	~<queue
>

25 
	~<m­
>

26 
	~"ns3/±r.h
"

27 
	~"ns3/·ck‘.h
"

30 
Çme¥aû
 
	gns3


34 
	gUDP_PLAYER_PAUSED
, 
	gUDP_PLAYER_PLAYING
, 
	gUDP_PLAYER_NOT_STARTED
, 
	gUDP_PLAYER_DONE


37 
şass
 
	gDudpCl›Á
;

38 
şass
 
	gDashCl›Á
;

41 şas 
	cUdpPÏy”


43 
	gpublic
:

44 
UdpPÏy”
();

46 
	gvœtu®


47 ~
UdpPÏy”
();

50 
ReûiveF¿me
(
PŒ
<
Pack‘
> 
mes§ge
);

53 
G‘QueueSize
();

56 
S¹
();

58 
Time


59 
G‘R—lPÏyTime
(
Time
 
¶ayTime
);

61 
šlše


62 
SchduËBufãrWakeup
(cÚ¡ 
Time
 
t
, 
DashCl›Á
 * 
ş›Á
)

64 
	gm_bufãrD–ay
 = 
t
;

65 
	gm_dashCl›Á
 = 
ş›Á
;

68 
šlše


69 
WakeupUdp
(
DudpCl›Á
 *
d_ş›Á
)

71 
	gm_udpCl›Á
 = 
d_ş›Á
;

76 
G‘ID
(
id
);

78 
	gm_¡©e
;

79 
Time
 
	gm_š‹¼u±iÚ_time
;

80 
	gm_š‹¼ru±iÚs
;

82 
Time
 
	gm_¡¬t_time
;

83 
ušt64_t
 
	gm_tÙ®R©e
;

84 
ušt32_t
 
	gm_mšR©e
;

85 
ušt32_t
 
	gm_äamesPÏyed
;

88 
PÏyF¿me
();

91 
CheckPÏy
();

92 
	g´iv©e
:

96 
Time
 
m_Ï¡·u£d
;

97 
	g¡d
::
queue
<
PŒ
<
Pack‘
> > 
m_queue
;

98 
Time
 
	gm_bufãrD–ay
;

99 
DashCl›Á
 * 
	gm_dashCl›Á
;

100 
DudpCl›Á
 * 
	gm_udpCl›Á
;

101 
	gu£rID
;

102 
size_t
 
	gv_num
=0;

103 
	g»cÜd
=0;

	@test/dash-test-suite.cc

4 
	~"ns3/dash-moduË.h
"

7 
	~"ns3/‹¡.h
"

9 
	~<¡ršg
>

10 
	~<f¡»am
>

11 
	~"ns3/cÜe-moduË.h
"

12 
	~"ns3/pošt-to-pošt-moduË.h
"

13 
	~"ns3/š‹º‘-moduË.h
"

14 
	~"ns3/­¶iÿtiÚs-moduË.h
"

15 
	~"ns3/ÃtwÜk-moduË.h
"

16 
	~"ns3/dash-moduË.h
"

20 
usšg
 
Çme¥aû
 
	gns3
;

23 şas 
	cDashTe¡Ca£1
 : 
public
 
Te¡Ca£


25 
public
:

26 
DashTe¡Ca£1
 ();

27 
	mvœtu®
 ~
DashTe¡Ca£1
 ();

29 
	m´iv©e
:

30 
vœtu®
 
DoRun
 ();

34 
	gDashTe¡Ca£1
::
	$DashTe¡Ca£1
 ()

35 : 
	`Te¡Ca£
 ("Dashest case (does‚othing)")

37 
	}
}

41 
DashTe¡Ca£1
::~
	$DashTe¡Ca£1
 ()

43 
	}
}

50 
DashTe¡Ca£1
::
	$DoRun
 ()

53 
boŞ
 
Œacšg
 = 
çl£
;

54 
ušt32_t
 
u£rs
 = 1;

55 
rg‘_dt
 = 7;

56 
¡İTime
 = 100.0;

61 
NodeCÚš”
 
nodes
;

62 
nodes
.
	`C»©e
(2);

66 
PoštToPoštH–³r
 
poštToPošt
;

67 
poštToPošt
.
	`S‘DeviûA‰ribu‹
("D©aR©e", 
	`SŒšgV®ue
("500Kbps"));

68 
poštToPošt
.
	`S‘ChªÃlA‰ribu‹
("D–ay", 
	`SŒšgV®ue
("5ms"));

69 
N‘DeviûCÚš”
 
deviûs
;

70 
deviûs
 = 
poštToPošt
.
	`In¡®l
(
nodes
);

75 
IÁ”ÃtSckH–³r
 
š‹º‘
;

76 
š‹º‘
.
	`In¡®l
(
nodes
);

81 
Ipv4Add»ssH–³r
 
v4
;

82 
v4
.
	`S‘Ba£
("10.1.1.0", "255.255.255.0");

83 
Ipv4IÁ”çûCÚš”
 
i
 = 
v4
.
	`Assign
(
deviûs
);

87 
ušt16_t
 
pÜt
 = 80;

89 
¡d
::
veùÜ
<
DashCl›ÁH–³r
> 
ş›Ás
;

90 
¡d
::
veùÜ
<
AµliÿtiÚCÚš”
> 
ş›ÁAµs
;

92 
ušt32_t
 
u£r
 = 1; u£¸<ğ
u£rs
; user++)

94 
DashCl›ÁH–³r
 
	`ş›Á
("ns3::TcpSocketFactory",

95 
	`IÃtSock‘Add»ss
(
i
.
	`G‘Add»ss
(1), 
pÜt
));

97 
ş›Á
.
	`S‘A‰ribu‹
("VideoId", 
	`Uš‹g”V®ue
(
u£r
));

98 
ş›Á
.
	`S‘A‰ribu‹
("wšdow", 
	`TimeV®ue
(
	`SecÚds
(
rg‘_dt
)));

99 
AµliÿtiÚCÚš”
 
ş›ÁAµ
 = 
ş›Á
.
	`In¡®l
(
nodes
.
	`G‘
(0));

100 
ş›ÁAµ
.
	`S¹
(
	`SecÚds
(1.0));

101 
ş›ÁAµ
.
	`Stİ
(
	`SecÚds
(
¡İTime
));

103 
ş›Ás
.
	`push_back
(
ş›Á
);

104 
ş›ÁAµs
.
	`push_back
(
ş›ÁAµ
);

108 
DashS”v”H–³r
 
	`£rv”
("ns3::TcpSocketFactory",

109 
	`IÃtSock‘Add»ss
(
Ipv4Add»ss
::
	`G‘Any
(), 
pÜt
));

110 
AµliÿtiÚCÚš”
 
£rv”Aµs
 = 
£rv”
.
	`In¡®l
(
nodes
.
	`G‘
(1));

111 
£rv”Aµs
.
	`S¹
(
	`SecÚds
(0.0));

112 
£rv”Aµs
.
	`Stİ
(
	`SecÚds
(
¡İTime
 + 5.0));

117 ià(
Œacšg
)

119 
AsciiT¿ûH–³r
 
ascii
;

120 
poštToPošt
.
	`EÇbËAsciiAÎ
(
ascii
.
	`C»©eFeSŒ—m
("dash-send.tr"));

121 
poštToPošt
.
	`EÇbËPÿpAÎ
("dash-£nd", 
çl£
);

128 
SimuÏtÜ
::
	`Run
();

129 
SimuÏtÜ
::
	`De¡roy
();

131 
ušt32_t
 
k
;

132 
k
 = 0; k < 
u£rs
; k++)

134 
PŒ
<
DashCl›Á
> 
­p
 = 
DyÇmicCa¡
<DashCl›Á>(
ş›ÁAµs
[
k
].
	`G‘
(0));

135 
¡d
::
cout
 << "Node: " << 
k
;

136 
­p
->
	`G‘Sts
();

140 
	`NS_TEST_ASSERT_MSG_EQ
 (
Œue
,rue, "true doesn'tƒqualrue for some„eason");

142 
	`NS_TEST_ASSERT_MSG_EQ_TOL
 (0.01, 0.01, 0.001, "Numbers‡re‚otƒqual withinolerance");

143 
	}
}

149 şas 
	cDashTe¡Su™e
 : 
public
 
Te¡Su™e


151 
public
:

152 
DashTe¡Su™e
 ();

155 
	gDashTe¡Su™e
::
	$DashTe¡Su™e
 ()

156 : 
	`Te¡Su™e
 ("dash", 
UNIT
)

159 
	`AddTe¡Ca£
 (
Ãw
 
DashTe¡Ca£1
, 
Te¡Ca£
::
QUICK
);

160 
	}
}

163 
DashTe¡Su™e
 
	gdashTe¡Su™e
;

	@/usr/include/stdint.h

22 #iâdeà
_STDINT_H


23 
	#_STDINT_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/wch¬.h
>

27 
	~<b™s/wÜdsize.h
>

34 #iâdeà
__št8_t_defšed


35 
	#__št8_t_defšed


	)

36 sigÃd 
	tšt8_t
;

37 
	tšt16_t
;

38 
	tšt32_t
;

39 #ià
__WORDSIZE
 == 64

40 
	tšt64_t
;

42 
__ex‹nsiÚ__


43 
	tšt64_t
;

48 
	tušt8_t
;

49 
	tušt16_t
;

50 #iâdeà
__ušt32_t_defšed


51 
	tušt32_t
;

52 
	#__ušt32_t_defšed


	)

54 #ià
__WORDSIZE
 == 64

55 
	tušt64_t
;

57 
__ex‹nsiÚ__


58 
	tušt64_t
;

65 sigÃd 
	tšt_Ëa¡8_t
;

66 
	tšt_Ëa¡16_t
;

67 
	tšt_Ëa¡32_t
;

68 #ià
__WORDSIZE
 == 64

69 
	tšt_Ëa¡64_t
;

71 
__ex‹nsiÚ__


72 
	tšt_Ëa¡64_t
;

76 
	tušt_Ëa¡8_t
;

77 
	tušt_Ëa¡16_t
;

78 
	tušt_Ëa¡32_t
;

79 #ià
__WORDSIZE
 == 64

80 
	tušt_Ëa¡64_t
;

82 
__ex‹nsiÚ__


83 
	tušt_Ëa¡64_t
;

90 sigÃd 
	tšt_ç¡8_t
;

91 #ià
__WORDSIZE
 == 64

92 
	tšt_ç¡16_t
;

93 
	tšt_ç¡32_t
;

94 
	tšt_ç¡64_t
;

96 
	tšt_ç¡16_t
;

97 
	tšt_ç¡32_t
;

98 
__ex‹nsiÚ__


99 
	tšt_ç¡64_t
;

103 
	tušt_ç¡8_t
;

104 #ià
__WORDSIZE
 == 64

105 
	tušt_ç¡16_t
;

106 
	tušt_ç¡32_t
;

107 
	tušt_ç¡64_t
;

109 
	tušt_ç¡16_t
;

110 
	tušt_ç¡32_t
;

111 
__ex‹nsiÚ__


112 
	tušt_ç¡64_t
;

117 #ià
__WORDSIZE
 == 64

118 #iâdeà
__šŒ_t_defšed


119 
	tšŒ_t
;

120 
	#__šŒ_t_defšed


	)

122 
	tušŒ_t
;

124 #iâdeà
__šŒ_t_defšed


125 
	tšŒ_t
;

126 
	#__šŒ_t_defšed


	)

128 
	tušŒ_t
;

133 #ià
__WORDSIZE
 == 64

134 
	tštmax_t
;

135 
	tuštmax_t
;

137 
__ex‹nsiÚ__


138 
	tštmax_t
;

139 
__ex‹nsiÚ__


140 
	tuštmax_t
;

144 #ià
__WORDSIZE
 == 64

145 
	#__INT64_C
(
c
èø## 
L


	)

146 
	#__UINT64_C
(
c
èø## 
UL


	)

148 
	#__INT64_C
(
c
èø## 
LL


	)

149 
	#__UINT64_C
(
c
èø## 
ULL


	)

155 
	#INT8_MIN
 (-128)

	)

156 
	#INT16_MIN
 (-32767-1)

	)

157 
	#INT32_MIN
 (-2147483647-1)

	)

158 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

160 
	#INT8_MAX
 (127)

	)

161 
	#INT16_MAX
 (32767)

	)

162 
	#INT32_MAX
 (2147483647)

	)

163 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

166 
	#UINT8_MAX
 (255)

	)

167 
	#UINT16_MAX
 (65535)

	)

168 
	#UINT32_MAX
 (4294967295U)

	)

169 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

173 
	#INT_LEAST8_MIN
 (-128)

	)

174 
	#INT_LEAST16_MIN
 (-32767-1)

	)

175 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

176 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

178 
	#INT_LEAST8_MAX
 (127)

	)

179 
	#INT_LEAST16_MAX
 (32767)

	)

180 
	#INT_LEAST32_MAX
 (2147483647)

	)

181 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

184 
	#UINT_LEAST8_MAX
 (255)

	)

185 
	#UINT_LEAST16_MAX
 (65535)

	)

186 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

187 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

191 
	#INT_FAST8_MIN
 (-128)

	)

192 #ià
__WORDSIZE
 == 64

193 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

194 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

196 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

197 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

199 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

201 
	#INT_FAST8_MAX
 (127)

	)

202 #ià
__WORDSIZE
 == 64

203 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

204 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

206 
	#INT_FAST16_MAX
 (2147483647)

	)

207 
	#INT_FAST32_MAX
 (2147483647)

	)

209 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

212 
	#UINT_FAST8_MAX
 (255)

	)

213 #ià
__WORDSIZE
 == 64

214 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

215 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

217 
	#UINT_FAST16_MAX
 (4294967295U)

	)

218 
	#UINT_FAST32_MAX
 (4294967295U)

	)

220 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

224 #ià
__WORDSIZE
 == 64

225 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

226 
	#INTPTR_MAX
 (9223372036854775807L)

	)

227 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

229 
	#INTPTR_MIN
 (-2147483647-1)

	)

230 
	#INTPTR_MAX
 (2147483647)

	)

231 
	#UINTPTR_MAX
 (4294967295U)

	)

236 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

238 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

241 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

247 #ià
__WORDSIZE
 == 64

248 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

249 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

251 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

252 
	#PTRDIFF_MAX
 (2147483647)

	)

256 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

257 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

260 #ià
__WORDSIZE
 == 64

261 
	#SIZE_MAX
 (18446744073709551615UL)

	)

263 #ifdeà
__WORDSIZE32_SIZE_ULONG


264 
	#SIZE_MAX
 (4294967295UL)

	)

266 
	#SIZE_MAX
 (4294967295U)

	)

271 #iâdeà
WCHAR_MIN


273 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

274 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

278 
	#WINT_MIN
 (0u)

	)

279 
	#WINT_MAX
 (4294967295u)

	)

282 
	#INT8_C
(
c
è
	)
c

283 
	#INT16_C
(
c
è
	)
c

284 
	#INT32_C
(
c
è
	)
c

285 #ià
__WORDSIZE
 == 64

286 
	#INT64_C
(
c
èø## 
L


	)

288 
	#INT64_C
(
c
èø## 
LL


	)

292 
	#UINT8_C
(
c
è
	)
c

293 
	#UINT16_C
(
c
è
	)
c

294 
	#UINT32_C
(
c
èø## 
U


	)

295 #ià
__WORDSIZE
 == 64

296 
	#UINT64_C
(
c
èø## 
UL


	)

298 
	#UINT64_C
(
c
èø## 
ULL


	)

302 #ià
__WORDSIZE
 == 64

303 
	#INTMAX_C
(
c
èø## 
L


	)

304 
	#UINTMAX_C
(
c
èø## 
UL


	)

306 
	#INTMAX_C
(
c
èø## 
LL


	)

307 
	#UINTMAX_C
(
c
èø## 
ULL


	)

	@/usr/include/stdlib.h

22 #iâdef 
_STDLIB_H


24 
	~<ã©u»s.h
>

27 
	#__Ãed_size_t


	)

28 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


29 
	#__Ãed_wch¬_t


	)

30 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

34 
	g__BEGIN_DECLS


36 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


37 
	#_STDLIB_H
 1

	)

39 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
è&& !defšed 
_SYS_WAIT_H


41 
	~<b™s/wa™æags.h
>

42 
	~<b™s/wa™¡©us.h
>

44 #ifdeà
__USE_MISC


49 #ià
defšed
 
__GNUC__
 && !defšed 
__ılu¥lus


50 
	#__WAIT_INT
(
¡©us
) \

51 (
	`__ex‹nsiÚ__
 (((uniÚ { 
	`__ty³of
(
¡©us
è
__š
; 
__i
; }) \

52 { .
__š
 = (
¡©us
è}).
__i
))

	)

54 
	#__WAIT_INT
(
¡©us
è(*(*è&(¡©us))

	)

62 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2 || defšed 
__ılu¥lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
wa™
 *
	m__u±r
;

70 *
	m__Œ
;

71 } 
	t__WAIT_STATUS
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
¡©us
è(¡©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (¡©us))

	)

85 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (
	`__WAIT_INT
 (¡©us))

	)

86 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (
	`__WAIT_INT
 (¡©us))

	)

87 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (
	`__WAIT_INT
 (¡©us))

	)

88 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (¡©us))

	)

89 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (¡©us))

	)

90 #ifdeà
__WIFCONTINUED


91 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (¡©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquÙ
;

100 
	m»m
;

101 } 
	tdiv_t
;

104 #iâdeà
__ldiv_t_defšed


107 
	mquÙ
;

108 
	m»m
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_defšed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


115 
__BEGIN_NAMESPACE_C99


117 
__ex‹nsiÚ__
 struct

119 
	mquÙ
;

120 
	m»m
;

121 } 
	tÎdiv_t
;

122 
	#__Îdiv_t_defšed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

139 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (cÚ¡ *
__ÅŒ
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

147 
	$©oi
 (cÚ¡ *
__ÅŒ
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

150 
	$©Ş
 (cÚ¡ *
__ÅŒ
)

151 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

152 
__END_NAMESPACE_STD


154 #ifdeà
__USE_ISOC99


155 
__BEGIN_NAMESPACE_C99


157 
__ex‹nsiÚ__
 
	$©Şl
 (cÚ¡ *
__ÅŒ
)

158 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$¡¹od
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

165 **
__»¡riù
 
__’d±r
)

166 
__THROW
 
	`__nÚnuÎ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$¡¹of
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

173 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1));

175 
	$¡¹Şd
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

176 **
__»¡riù
 
__’d±r
)

177 
__THROW
 
	`__nÚnuÎ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$¡¹Ş
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

184 **
__»¡riù
 
__’d±r
, 
__ba£
)

185 
__THROW
 
	`__nÚnuÎ
 ((1));

187 
	$¡¹oul
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

188 **
__»¡riù
 
__’d±r
, 
__ba£
)

189 
__THROW
 
	`__nÚnuÎ
 ((1));

190 
__END_NAMESPACE_STD


192 #ifdeà
__USE_MISC


194 
__ex‹nsiÚ__


195 
	$¡¹oq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

196 **
__»¡riù
 
__’d±r
, 
__ba£
)

197 
__THROW
 
	`__nÚnuÎ
 ((1));

199 
__ex‹nsiÚ__


200 
	$¡¹ouq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

201 **
__»¡riù
 
__’d±r
, 
__ba£
)

202 
__THROW
 
	`__nÚnuÎ
 ((1));

205 #ifdeà
__USE_ISOC99


206 
__BEGIN_NAMESPACE_C99


208 
__ex‹nsiÚ__


209 
	$¡¹Şl
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

210 **
__»¡riù
 
__’d±r
, 
__ba£
)

211 
__THROW
 
	`__nÚnuÎ
 ((1));

213 
__ex‹nsiÚ__


214 
	$¡¹ouÎ
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

215 **
__»¡riù
 
__’d±r
, 
__ba£
)

216 
__THROW
 
	`__nÚnuÎ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifdeà
__USE_GNU


235 
	~<xloÿË.h
>

239 
	$¡¹Ş_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

240 **
__»¡riù
 
__’d±r
, 
__ba£
,

241 
__loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4));

243 
	$¡¹oul_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

244 **
__»¡riù
 
__’d±r
,

245 
__ba£
, 
__loÿË_t
 
__loc
)

246 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

248 
__ex‹nsiÚ__


249 
	$¡¹Şl_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

250 **
__»¡riù
 
__’d±r
, 
__ba£
,

251 
__loÿË_t
 
__loc
)

252 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

254 
__ex‹nsiÚ__


255 
	$¡¹ouÎ_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

256 **
__»¡riù
 
__’d±r
,

257 
__ba£
, 
__loÿË_t
 
__loc
)

258 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

260 
	$¡¹od_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

261 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

262 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

264 
	$¡¹of_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

265 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

266 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

268 
	$¡¹Şd_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

269 **
__»¡riù
 
__’d±r
,

270 
__loÿË_t
 
__loc
)

271 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

275 #ifdeà
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__ex‹º_šlše
 

278 
	`__NTH
 (
	$©oi
 (cÚ¡ *
__ÅŒ
))

280  (è
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

281 
	}
}

282 
__ex‹º_šlše
 

283 
__NTH
 (
	$©Ş
 (cÚ¡ *
__ÅŒ
))

285  
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #ifdeà
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

292 
__NTH
 (
	$©Şl
 (cÚ¡ *
__ÅŒ
))

294  
	`¡¹Şl
 (
__ÅŒ
, (**è
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

308 
	$a64l
 (cÚ¡ *
__s
)

309 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

313 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


314 
	~<sys/ty³s.h
>

321 
	$¿ndom
 (è
__THROW
;

324 
	$¤ªdom
 (
__£ed
è
__THROW
;

330 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

331 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

335 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

338 #ifdeà
__USE_MISC


343 
	s¿ndom_d©a


345 
št32_t
 *
åŒ
;

346 
št32_t
 *
½Œ
;

347 
št32_t
 *
¡©e
;

348 
¿nd_ty³
;

349 
¿nd_deg
;

350 
¿nd_£p
;

351 
št32_t
 *
’d_±r
;

354 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

355 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

357 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

358 
__THROW
 
	`__nÚnuÎ
 ((2));

360 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

361 
size_t
 
__¡©–’
,

362 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

363 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

365 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

366 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

367 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$¿nd
 (è
__THROW
;

376 
	$¤ªd
 (
__£ed
è
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifdeà
__USE_POSIX


381 
	$¿nd_r
 (*
__£ed
è
__THROW
;

385 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


389 
	$d¿nd48
 (è
__THROW
;

390 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

393 
	$Ìªd48
 (è
__THROW
;

394 
	$Äªd48
 (
__xsubi
[3])

395 
__THROW
 
	`__nÚnuÎ
 ((1));

398 
	$m¿nd48
 (è
__THROW
;

399 
	$j¿nd48
 (
__xsubi
[3])

400 
__THROW
 
	`__nÚnuÎ
 ((1));

403 
	$¤ªd48
 (
__£edv®
è
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__nÚnuÎ
 ((1));

406 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

408 #ifdeà
__USE_MISC


412 
	sd¿nd48_d©a


414 
__x
[3];

415 
__Şd_x
[3];

416 
__c
;

417 
__š™
;

418 
__ex‹nsiÚ__
 
__a
;

423 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

424 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

425 
	$”ªd48_r
 (
__xsubi
[3],

426 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

427 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

430 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

431 *
__»¡riù
 
__»suÉ
)

432 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

433 
	$Äªd48_r
 (
__xsubi
[3],

434 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

435 *
__»¡riù
 
__»suÉ
)

436 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

439 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

440 *
__»¡riù
 
__»suÉ
)

441 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

442 
	$j¿nd48_r
 (
__xsubi
[3],

443 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

444 *
__»¡riù
 
__»suÉ
)

445 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

448 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

449 
__THROW
 
	`__nÚnuÎ
 ((2));

451 
	$£ed48_r
 (
__£ed16v
[3],

452 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

454 
	$lcÚg48_r
 (
__·¿m
[7],

455 
d¿nd48_d©a
 *
__bufãr
)

456 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

462 #iâdeà
__m®loc_ªd_ÿÎoc_defšed


463 
	#__m®loc_ªd_ÿÎoc_defšed


	)

464 
__BEGIN_NAMESPACE_STD


466 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

468 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

469 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

470 
__END_NAMESPACE_STD


473 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


474 
__BEGIN_NAMESPACE_STD


480 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

481 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

483 
	$ä“
 (*
__±r
è
__THROW
;

484 
__END_NAMESPACE_STD


486 #ifdef 
__USE_MISC


488 
	$cä“
 (*
__±r
è
__THROW
;

491 #ifdeà
__USE_MISC


492 
	~<®loÿ.h
>

495 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

496 || 
defšed
 
__USE_MISC


498 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

501 #ifdeà
__USE_XOPEN2K


503 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

504 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

507 #ifdeà
__USE_ISOC11


509 *
	$®igÃd_®loc
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

510 
__THROW
 
__©Œibu‹_m®loc__
 
	`__©Œibu‹_®loc_size__
 ((2)è
__wur
;

513 
__BEGIN_NAMESPACE_STD


515 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

519 
	$©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

521 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


523 #ifdeà
__ılu¥lus


524 "C++" 
	$©_quick_ex™
 ((*
__func
) ())

525 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

527 
	$©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

530 
__END_NAMESPACE_STD


532 #ifdef 
__USE_MISC


535 
	$Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

536 
__THROW
 
	`__nÚnuÎ
 ((1));

539 
__BEGIN_NAMESPACE_STD


543 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

545 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


549 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

551 
__END_NAMESPACE_STD


553 #ifdeà
__USE_ISOC99


554 
__BEGIN_NAMESPACE_C99


557 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

558 
__END_NAMESPACE_C99


562 
__BEGIN_NAMESPACE_STD


564 *
	$g‘’v
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

565 
__END_NAMESPACE_STD


567 #ifdeà
__USE_GNU


570 *
	$£cu»_g‘’v
 (cÚ¡ *
__Çme
)

571 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

574 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


578 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

581 #ifdeà
__USE_XOPEN2K


584 
	$£‹nv
 (cÚ¡ *
__Çme
, cÚ¡ *
__v®ue
, 
__»¶aû
)

585 
__THROW
 
	`__nÚnuÎ
 ((2));

588 
	$un£‹nv
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 #ifdef 
__USE_MISC


595 
	$ş—»nv
 (è
__THROW
;

599 #ià
defšed
 
__USE_MISC
 \

600 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
)

606 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1));

609 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


618 #iâdeà
__USE_FILE_OFFSET64


619 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

621 #ifdeà
__REDIRECT


622 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

623 
	`__nÚnuÎ
 ((1)è
__wur
;

625 
	#mk¡emp
 
mk¡emp64


	)

628 #ifdeà
__USE_LARGEFILE64


629 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

633 #ifdeà
__USE_MISC


640 #iâdeà
__USE_FILE_OFFSET64


641 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

643 #ifdeà
__REDIRECT


644 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

645 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

647 
	#mk¡emps
 
mk¡emps64


	)

650 #ifdeà
__USE_LARGEFILE64


651 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

652 
	`__nÚnuÎ
 ((1)è
__wur
;

656 #ifdeà
__USE_XOPEN2K8


662 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

665 #ifdeà
__USE_GNU


672 #iâdeà
__USE_FILE_OFFSET64


673 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

675 #ifdeà
__REDIRECT


676 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

677 
	`__nÚnuÎ
 ((1)è
__wur
;

679 
	#mko¡emp
 
mko¡emp64


	)

682 #ifdeà
__USE_LARGEFILE64


683 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

692 #iâdeà
__USE_FILE_OFFSET64


693 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

694 
	`__nÚnuÎ
 ((1)è
__wur
;

696 #ifdeà
__REDIRECT


697 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

698 
__æags
), 
mko¡emps64
)

699 
	`__nÚnuÎ
 ((1)è
__wur
;

701 
	#mko¡emps
 
mko¡emps64


	)

704 #ifdeà
__USE_LARGEFILE64


705 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

706 
	`__nÚnuÎ
 ((1)è
__wur
;

711 
__BEGIN_NAMESPACE_STD


716 
	$sy¡em
 (cÚ¡ *
__commªd
è
__wur
;

717 
__END_NAMESPACE_STD


720 #ifdef 
__USE_GNU


723 *
	$ÿnÚiÿlize_fe_Çme
 (cÚ¡ *
__Çme
)

724 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

727 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


733 *
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
,

734 *
__»¡riù
 
__»sŞved
è
__THROW
 
__wur
;

739 #iâdeà
__COMPAR_FN_T


740 
	#__COMPAR_FN_T


	)

741 (*
	t__com·r_â_t
) (const *, const *);

743 #ifdef 
__USE_GNU


744 
__com·r_â_t
 
	tcom·risÚ_â_t
;

747 #ifdeà
__USE_GNU


748 (*
	t__com·r_d_â_t
) (const *, const *, *);

751 
__BEGIN_NAMESPACE_STD


754 *
	$b£¬ch
 (cÚ¡ *
__key
, cÚ¡ *
__ba£
,

755 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

756 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

758 #ifdeà
__USE_EXTERN_INLINES


759 
	~<b™s/¡dlib-b£¬ch.h
>

764 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

765 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

766 #ifdeà
__USE_GNU


767 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

768 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

769 
	`__nÚnuÎ
 ((1, 4));

774 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

775 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

776 
__END_NAMESPACE_STD


778 #ifdeà
__USE_ISOC99


779 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

780 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

784 
__BEGIN_NAMESPACE_STD


788 
div_t
 
	$div
 (
__num”
, 
__d’om
)

789 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

790 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

791 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

792 
__END_NAMESPACE_STD


794 #ifdeà
__USE_ISOC99


795 
__BEGIN_NAMESPACE_C99


796 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

797 
__d’om
)

798 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

799 
__END_NAMESPACE_C99


803 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

804 || 
defšed
 
__USE_MISC


811 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

812 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

817 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

818 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

823 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

824 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

827 #ifdeà
__USE_MISC


829 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

830 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

831 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

832 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

833 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

834 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

835 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

836 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

841 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

842 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

843 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

844 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

845 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

846 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

848 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

849 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

850 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

851 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

852 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

853 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

854 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

855 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

859 
__BEGIN_NAMESPACE_STD


862 
	$mbËn
 (cÚ¡ *
__s
, 
size_t
 
__n
è
__THROW
;

865 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

866 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

869 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
;

873 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

874 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

876 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

877 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

878 
__THROW
;

879 
__END_NAMESPACE_STD


882 #ifdeà
__USE_MISC


887 
	$½m©ch
 (cÚ¡ *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

891 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


898 
	$g‘subİt
 (**
__»¡riù
 
__İtiÚp
,

899 *cÚ¡ *
__»¡riù
 
__tok’s
,

900 **
__»¡riù
 
__v®u•
)

901 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

905 #ifdeà
__USE_XOPEN


907 
	$£tkey
 (cÚ¡ *
__key
è
__THROW
 
	`__nÚnuÎ
 ((1));

913 #ifdeà
__USE_XOPEN2KXSI


915 
	$posix_İ’±
 (
__oæag
è
__wur
;

918 #ifdeà
__USE_XOPEN


923 
	$g¿Á±
 (
__fd
è
__THROW
;

927 
	$uÆock±
 (
__fd
è
__THROW
;

932 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

935 #ifdeà
__USE_GNU


939 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

940 
__THROW
 
	`__nÚnuÎ
 ((2));

943 
	`g‘±
 ();

946 #ifdeà
__USE_MISC


950 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

951 
__THROW
 
	`__nÚnuÎ
 ((1));

954 
	~<b™s/¡dlib-æßt.h
>

957 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


958 
	~<b™s/¡dlib.h
>

960 #ifdeà
__LDBL_COMPAT


961 
	~<b™s/¡dlib-ldbl.h
>

965 #undeà
__Ãed_m®loc_ªd_ÿÎoc


967 
__END_DECLS


	@/usr/include/alloca.h

18 #iâdef 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<ã©u»s.h
>

23 
	#__Ãed_size_t


	)

24 
	~<¡ddef.h
>

26 
	g__BEGIN_DECLS


29 #undeà
®loÿ


32 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

34 #ifdef 
__GNUC__


35 
	#®loÿ
(
size
è
	`__butš_®loÿ
 (size)

	)

38 
__END_DECLS


	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

97 #undeà
__USE_ISOC11


98 #undeà
__USE_ISOC99


99 #undeà
__USE_ISOC95


100 #undeà
__USE_ISOCXX11


101 #undeà
__USE_POSIX


102 #undeà
__USE_POSIX2


103 #undeà
__USE_POSIX199309


104 #undeà
__USE_POSIX199506


105 #undeà
__USE_XOPEN


106 #undeà
__USE_XOPEN_EXTENDED


107 #undeà
__USE_UNIX98


108 #undeà
__USE_XOPEN2K


109 #undeà
__USE_XOPEN2KXSI


110 #undeà
__USE_XOPEN2K8


111 #undeà
__USE_XOPEN2K8XSI


112 #undeà
__USE_LARGEFILE


113 #undeà
__USE_LARGEFILE64


114 #undeà
__USE_FILE_OFFSET64


115 #undeà
__USE_MISC


116 #undeà
__USE_ATFILE


117 #undeà
__USE_GNU


118 #undeà
__USE_REENTRANT


119 #undeà
__USE_FORTIFY_LEVEL


120 #undeà
__KERNEL_STRICT_NAMES


124 #iâdeà
_LOOSE_KERNEL_NAMES


125 
	#__KERNEL_STRICT_NAMES


	)

135 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


136 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

137 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

139 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

146 #ià(
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE
) \

147 && !
defšed
 
	g_DEFAULT_SOURCE


152 #undeà
_DEFAULT_SOURCE


153 
	#_DEFAULT_SOURCE
 1

	)

157 #ifdeà
_GNU_SOURCE


158 #undeà
_ISOC95_SOURCE


159 
	#_ISOC95_SOURCE
 1

	)

160 #undeà
_ISOC99_SOURCE


161 
	#_ISOC99_SOURCE
 1

	)

162 #undeà
_ISOC11_SOURCE


163 
	#_ISOC11_SOURCE
 1

	)

164 #undeà
_POSIX_SOURCE


165 
	#_POSIX_SOURCE
 1

	)

166 #undeà
_POSIX_C_SOURCE


167 
	#_POSIX_C_SOURCE
 200809L

	)

168 #undeà
_XOPEN_SOURCE


169 
	#_XOPEN_SOURCE
 700

	)

170 #undeà
_XOPEN_SOURCE_EXTENDED


171 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

172 #undeà
_LARGEFILE64_SOURCE


173 
	#_LARGEFILE64_SOURCE
 1

	)

174 #undeà
_DEFAULT_SOURCE


175 
	#_DEFAULT_SOURCE
 1

	)

176 #undeà
_ATFILE_SOURCE


177 
	#_ATFILE_SOURCE
 1

	)

182 #ià(
defšed
 
_DEFAULT_SOURCE
 \

183 || (!
defšed
 
	g__STRICT_ANSI__
 \

184 && !
defšed
 
	g_ISOC99_SOURCE
 \

185 && !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 \

186 && !
defšed
 
	g_XOPEN_SOURCE
))

187 #undeà
_DEFAULT_SOURCE


188 
	#_DEFAULT_SOURCE
 1

	)

192 #ià(
defšed
 
_ISOC11_SOURCE
 \

193 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

194 
	#__USE_ISOC11
 1

	)

198 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

199 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

200 
	#__USE_ISOC99
 1

	)

204 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

205 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

206 
	#__USE_ISOC95
 1

	)

213 #ià((
defšed
 
__ılu¥lus
 && __cplusplus >= 201103L) \

214 || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__
)

215 
	#__USE_ISOCXX11
 1

	)

221 #ifdeà
_DEFAULT_SOURCE


222 #ià!
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE


223 
	#__USE_POSIX_IMPLICITLY
 1

	)

225 #undeà
_POSIX_SOURCE


226 
	#_POSIX_SOURCE
 1

	)

227 #undeà
_POSIX_C_SOURCE


228 
	#_POSIX_C_SOURCE
 200809L

	)

230 #ià((!
defšed
 
__STRICT_ANSI__
 \

231 || (
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) >= 500)) \

232 && !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

233 
	#_POSIX_SOURCE
 1

	)

234 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

235 
	#_POSIX_C_SOURCE
 2

	)

236 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

237 
	#_POSIX_C_SOURCE
 199506L

	)

238 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

239 
	#_POSIX_C_SOURCE
 200112L

	)

241 
	#_POSIX_C_SOURCE
 200809L

	)

243 
	#__USE_POSIX_IMPLICITLY
 1

	)

246 #ià(
defšed
 
_POSIX_SOURCE
 \

247 || (
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >= 1) \

248 || 
defšed
 
_XOPEN_SOURCE
)

249 
	#__USE_POSIX
 1

	)

252 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


253 
	#__USE_POSIX2
 1

	)

256 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199309L

257 
	#__USE_POSIX199309
 1

	)

260 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199506L

261 
	#__USE_POSIX199506
 1

	)

264 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200112L

265 
	#__USE_XOPEN2K
 1

	)

266 #undeà
__USE_ISOC95


267 
	#__USE_ISOC95
 1

	)

268 #undeà
__USE_ISOC99


269 
	#__USE_ISOC99
 1

	)

272 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200809L

273 
	#__USE_XOPEN2K8
 1

	)

274 #undeà
_ATFILE_SOURCE


275 
	#_ATFILE_SOURCE
 1

	)

278 #ifdef 
_XOPEN_SOURCE


279 
	#__USE_XOPEN
 1

	)

280 #ià(
_XOPEN_SOURCE
 - 0) >= 500

281 
	#__USE_XOPEN_EXTENDED
 1

	)

282 
	#__USE_UNIX98
 1

	)

283 #undeà
_LARGEFILE_SOURCE


284 
	#_LARGEFILE_SOURCE
 1

	)

285 #ià(
_XOPEN_SOURCE
 - 0) >= 600

286 #ià(
_XOPEN_SOURCE
 - 0) >= 700

287 
	#__USE_XOPEN2K8
 1

	)

288 
	#__USE_XOPEN2K8XSI
 1

	)

290 
	#__USE_XOPEN2K
 1

	)

291 
	#__USE_XOPEN2KXSI
 1

	)

292 #undeà
__USE_ISOC95


293 
	#__USE_ISOC95
 1

	)

294 #undeà
__USE_ISOC99


295 
	#__USE_ISOC99
 1

	)

298 #ifdeà
_XOPEN_SOURCE_EXTENDED


299 
	#__USE_XOPEN_EXTENDED
 1

	)

304 #ifdeà
_LARGEFILE_SOURCE


305 
	#__USE_LARGEFILE
 1

	)

308 #ifdeà
_LARGEFILE64_SOURCE


309 
	#__USE_LARGEFILE64
 1

	)

312 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

313 
	#__USE_FILE_OFFSET64
 1

	)

316 #ià
defšed
 
_DEFAULT_SOURCE


317 
	#__USE_MISC
 1

	)

320 #ifdef 
_ATFILE_SOURCE


321 
	#__USE_ATFILE
 1

	)

324 #ifdef 
_GNU_SOURCE


325 
	#__USE_GNU
 1

	)

328 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


329 
	#__USE_REENTRANT
 1

	)

332 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

333 && 
__GNUC_PREREQ
 (4, 1è&& 
defšed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

334 #ià
_FORTIFY_SOURCE
 > 1

335 
	#__USE_FORTIFY_LEVEL
 2

	)

337 
	#__USE_FORTIFY_LEVEL
 1

	)

340 
	#__USE_FORTIFY_LEVEL
 0

	)

345 
	~<¡dc-´edef.h
>

353 #undeà
__GNU_LIBRARY__


354 
	#__GNU_LIBRARY__
 6

	)

358 
	#__GLIBC__
 2

	)

359 
	#__GLIBC_MINOR__
 23

	)

361 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

362 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

365 #iâdeà
__ASSEMBLER__


366 #iâdeà
_SYS_CDEFS_H


367 
	~<sys/cdefs.h
>

372 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


373 
	#__USE_LARGEFILE
 1

	)

374 
	#__USE_LARGEFILE64
 1

	)

380 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

381 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

382 && 
defšed
 
	g__ex‹º_šlše


383 
	#__USE_EXTERN_INLINES
 1

	)

391 
	~<gnu/¡ubs.h
>

	@/usr/include/xlocale.h

20 #iâdeà
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loÿË_¡ruù


30 
__loÿË_d©a
 *
	m__loÿËs
[13];

33 cÚ¡ *
	m__ùy³_b
;

34 cÚ¡ *
	m__ùy³_tŞow”
;

35 cÚ¡ *
	m__ùy³_touµ”
;

38 cÚ¡ *
	m__Çmes
[13];

39 } *
	t__loÿË_t
;

42 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifdeà
__GCC_IEC_559


37 #ià
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifdeà
__GCC_IEC_559_COMPLEX


45 #ià
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

55 
	#__STDC_ISO_10646__
 201505L

	)

58 
	#__STDC_NO_THREADS__
 1

	)

	@
1
.
1
/usr/include
55
1319
examples/dash-4g.cc
examples/dash-add.cc
examples/dash-example.cc
examples/dash-fix.cc
examples/dash-multi.cc
examples/dash-multi_back.cc
examples/dash-wifi.cc
examples/first.cc
examples/link-example.cc
examples/ttt.cc
examples/udp_dash.cc
helper/DudpHelper.cc
helper/DudpHelper.h
helper/dash-client-helper.cc
helper/dash-client-helper.h
helper/dash-server-helper.cc
helper/dash-server-helper.h
model/DudpClient.cc
model/DudpClient.h
model/DudpServer.cc
model/DudpServer.h
model/algorithms/aaash-client.cc
model/algorithms/aaash-client.h
model/algorithms/fdash-client.cc
model/algorithms/fdash-client.h
model/algorithms/osmp-client.cc
model/algorithms/osmp-client.h
model/algorithms/raahs-client.cc
model/algorithms/raahs-client.h
model/algorithms/sftm-client.cc
model/algorithms/sftm-client.h
model/algorithms/svaa-client.cc
model/algorithms/svaa-client.h
model/dash-client.cc
model/dash-client.h
model/dash-server.cc
model/dash-server.h
model/http-header.cc
model/http-header.h
model/http-parser.cc
model/http-parser.h
model/mpeg-header.cc
model/mpeg-header.h
model/mpeg-player.cc
model/mpeg-player.h
model/para.h
model/udp-player.cc
model/udp-player.h
test/dash-test-suite.cc
/usr/include/stdint.h
/usr/include/stdlib.h
/usr/include/alloca.h
/usr/include/features.h
/usr/include/xlocale.h
/usr/include/stdc-predef.h
